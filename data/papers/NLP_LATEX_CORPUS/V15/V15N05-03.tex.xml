<?xml version="1.0" ?>
<root>
  <jtitle>整合性を考慮した物語要約システムの構築</jtitle>
  <jauthor>横野光</jauthor>
  <jabstract>物語は複数の話題で構成された文書である．内容の理解にはこの展開していく話題を正しく把握しなければならず，そのために原文書の代わりに用いられる要約は特に整合性を重視する必要がある．本稿では整合性として話題の繋がりに着目した物語要約手法を提案する．提案手法では，まず物語を主題に着目した話題単位に分割し，登場人物に着目した重要度によって要約として抽出する話題を決定する．その後，話題間の整合性を保つために，話題間の状況の変化を示す文を補完する．提案手法の有効性を確認するため実際の物語を対象とした被験者の主観的評価による比較実験を行った．整合性を考慮しないtfidfを用いた重要文抽出に比べて，提案手法の方が内容の理解において良好な結果を得ることができた．</jabstract>
  <jkeywords>物語要約，報知的要約,整合性，登場人物抽出,話題抽出</jkeywords>
  <section title="はじめに">インターネットの拡大により大量の文書情報が入手可能となった現在において，ユーザが自分の望む情報を手早く手に入れるための要素技術として要約が重要となってきている．近年の自動要約の研究では新聞記事や論説文，議事録，特許文書を対象とするものが多い．こうした文書は論理的な構造を持つため，その文書構造を利用した要約手法が提案され，一定の成果が上げられている．一方で，より多くの人がインターネットを使うようになり，Web上で多くの文芸作品が公開され，自由に読むことができるようになった．さらに，著作権の切れた文学作品を電子テキスト化し公開している青空文庫のようなインターネット電子図書館も存在している．こうした背景から電子化された多くの文学作品や物語から好みに応じた，読みたい作品を探す手段としての要約（指示的要約）の必要性があると考えられる．また，近年``あらすじ本''と呼ばれる複数の文学作品のあらすじをまとめて紹介している本が出版されていることから，その内容を簡潔にまとめた原文書の代わりとして機能する要約（報知的要約）まで必要とされていることが伺える．物語の指示的要約には結末を含まず，物語の展開においてある程度重要な箇所を含んでいることが必要とされる．これに対して，重要な箇所の推定は物語全体の構成を把握することが必要である．よって本研究では物語に対して報知的要約を作成する手法の構築を目標とする．これにより同時に指示的要約もカバーすることができると考える．物語は登場人物が遭遇した出来事と登場人物の行動の描写で構成されている．出来事は基本的に時系列順に記述されるため，論説文に見られるような，主張する事柄を中心としてその前後に根拠や前提を配置するといった論理的な構成はほとんど存在しない．さらに，論説文では著者の主張が述べられている箇所が重要であるとされ，“〜する必要がある”や“〜すべきである”といった文末表現を手がかり語として要約作成に利用することができる．しかし，物語ではどの箇所が重要であるかは全体の流れや他の箇所との関係から決定されるため，そのような手がかり語を定義することができない．従って，新聞記事や論説文を対象としているような要約手法では物語の要約に適応しないと考えられる．また，新聞記事の要約では背景となる前提知識を読者が保有しているために文章の繋がりが悪くてもある程度は推測によって補完することができるため，要約中に記事中の重要文がいくつか存在すれば要約として機能する．これに対して物語では背景となる前提知識は物語固有であることが多いため，その要約は対象とする物語の重要な要素を含むだけでなく要約中の整合性まで考慮しなければ要約として十分に機能することができない．整合性とは文書の意味的なまとまりの良さのことであり，本稿では話題間の繋がりの良さのことを示す．本研究では話題の繋がりに焦点を置いた物語要約システムを構築する．物語は登場人物の行動を中心に展開していくことから，まず登場人物を自動抽出して，それを軸に話題にまとまりのある重要箇所（章参照）を取り出す．さらに重要箇所間の繋がりを補完し読みやすさを向上させるために，局所的重要度を測定し重要箇所間の連結を考慮した文抽出を提案する．本手法を評価するために物語9作品を用いた複数人による人手の要約評価を行い，ベースラインとしてtfidfを利用した重要文抽出手法との比較を行う．</section>
  <section title="関連研究">自動要約の主な手法の一つに重要文抽出がある．これはテキスト中の文に対して重要度を計算し，その上位から要約率分だけ抽出するという手法である．重要度の計算にはtfidfを用いる手法や，単語の共起を利用する手法などがある．これらの手法においては重要度は文そのものにしか着目しておらず，抽出された文同士の関係については考慮されていない．そのため生成された要約には以下のような問題が生じる．要約文に代名詞が含まれていても，その先行詞が要約中に存在しない場	合がある．全体を通して首尾一貫性に欠ける要約が生成される可能性がある．1.の問題に対しては照応解析を行い，代名詞をその先行詞に置換するなどといった対応で解消できる．2.の問題は生成された要約の読みやすさにも関係している．読みやすい要約の作成は自動要約の研究において大きな課題であり，様々な研究が行われている．話題の繋がりを考慮した先行研究も存在する．市丸らは文中で共起する単語を話題と定義し，その連想による文間，段落間の繋がりに着目した手法を，館林らはテキストをセグメントに分割し，そのセグメント内での重要性とセグメント間の結束性に関する重要性を同時に考慮した要約手法を提案し，それぞれ一定の成果を上げている．要約全体のまとまりを考慮しているという点では，本研究はこれらの研究と関連があるが，より物語に即しており，単語の共起ではなく登場人物とその行動に着目しているという点で異なっている．自動要約を含め現在行われている言語処理の研究では新聞記事や論説文を対象としているものが多いが，物語を対象とした研究も行われている．物語の構造に関する研究として，石井らは登場人物に着目した事象をネットワークで繋ぐことによる構造化を，馬場らは物語テキストの柔軟な検索のために人物に着目したモデル化を行っている．また，小林は場所，時間，登場人物に着目した場面境界の認定手法を提案している．一方，物語を対象とした要約の研究に関して，Kazantseva~は短編小説の指示的な要約の作成を目的としたSVMによる重要文抽出を行っている．また，横野は登場人物の感情表現に着目した文抽出による要約を，村上らは命題間の関係に着目した要約手法を，山本らは隣接文間の結束性に基づいた提案している．他にも，物語の登場人物に着目した手法としてLehnertの提案したplotunitによるものがある．これは物語の構造の中心は登場人物の感情的な反応と感情の状態，それらの因果関係にあるという考えに基づいている．この要約手法では物語中の出来事に対して登場人物が良い感情を抱いたか悪い感情を抱いたかという情報を付与し，それらを組み合わせて物語の構造を組み立て，要約を作成する．しかし，実現に関しては出来事に対して登場人物がどのような感情を抱いたかと推定することは困難である．本研究は物語の登場人物に着目するという点ではLehnertと同様であるが，行動から登場人物の感情を推測するといった深い意味処理は行わない．また，整合性に焦点を当てているという点で他の物語の自動要約手法とは異なっている．</section>
  <section title="整合性を考慮した要約文の抽出">章で述べたように整合性とは意味的な文書のまとまりの良さのことであり，これを実現するためには適切に話題間の繋がりを扱うことが重要であると考える．ここで話題とは同じ対象について述べている一つのまとまりのことである．物語では時間の経過や舞台となる場所の移動によって区切られる場面という大きなまとまりが考えられるが，本稿では話題を場面よりも小さな単位と捉え，一つの場面は複数の話題から構成されていると考える．本稿で提案する手法の流れを図に示す．提案手法は要約生成のための3つの手順と，その手順において利用する人物辞書を構築するための登場人物抽出で構成される．登場人物抽出では人物辞書の他に未知語として出現した登場人物表現を登録した形態素辞書を作成する．この形態素辞書は要約生成の各手順で行う処理に利用する．要約生成に関する手順について説明する．まず一つ目は物語中にいくつか存在する場面内において話題が一貫した箇所（以降トピック・ブロックと呼ぶ）があると仮定して，トピック・ブロック抽出を行う．文を単位とする既存の要約手法では文間の関係が考慮されず，そのために一連の事象が複数の文に渡って記述されている場合に正しく要約を抽出することができない．よってトピック・ブロックの導入により話題が一貫した単位を要約の最小単位として，不用意に話題を切断しないことが期待できる．二つ目としてトピック・ブロックから要約に必要となる重要なトピック・ブロック（以降重要ブロックと呼ぶ）を選択するために，登場人物辞書を用いて登場人物を軸とした重要度を提案する．これは登場人物が物語のストーリーの理解に重要な要素であるという観点から，トピック・ブロック中に登場人物の活動が記述されている文があるものを重要とする．三つ目として重要箇所として取り出されたトピック・ブロック間の話題の整合性を補完するための文（以降ブロック連結文と呼ぶ）を抽出する．これは重要箇所の抽出というタスクは取り出した文の整合性やまとまりを求めるというタスクと直交していることが原因であり，重要ブロックのみを取り出しても，ブロック間に不整合が生じるためである．この処理は文を単位として行う．これは不整合の解消には場面の切り替えや主人公の移動などの話題間の繋がりを示唆する文が物語には存在するはずで，それらは大抵1文単位で記述されていることが期待できるからである（図）．生成する要約の要約率と重要ブロックとブロック連結文の割合はパラメータとして人手で設定する．重要ブロックの割合を大きくすれば物語に重要な文を多く含む要約を生成し，逆にブロック連結文の割合を大きくすれば，整合性のある要約を生成する．次の節で登場人物抽出について述べた後，節でトピック・ブロック抽出について述べる．節で重要ブロック抽出について説明し，節でブロック連結文の抽出について説明する．</section>
  <subsection title="登場人物抽出">登場人物を抽出するというタスクにおける問題は以下の2点である．登場人物はその物語に固有の表現であるものが多く，それらは単語と	して一般的な辞書に登録されていない．(a)と関連しているが『さるかに合戦』に登場する``うす''のように人	名でないものが人物化することがある．list従って，登場人物の抽出に際して人名辞書などの既存の辞書に頼った方法では抽出漏れが生じてしまう．そこで本研究では物語文から次の2段階の手法で登場人物を推定する．文字列中から登場人物候補を文字種情報と形態素情報を利用して獲得	し，辞書登録を行う．登録した辞書を用いた係り受け解析器で文を解析し，登場人物候補の単	語の係り先の動詞の意味から人物表現を同定する．馬場らは形態素解析で得られた品詞情報を利用した人物抽出の手法を採用している．また網羅性の向上のために人名辞典から人名を収集し形態素辞書に登録している．この手法は対象とする物語のジャンルを限定すれば有効である．これに対して本研究では対象のジャンルを限定しない．そのため，辞書を利用した手法ではなく，物語における登場人物表現の出現の仕方に着目した手法を提案する．上記の2段階の手法について具体的に記述する．まず物語文から登場人物候補を取り出すために文字n-gramを利用して頻度の高い部分文字列を獲得する．n-gramの単位を形態素ではなく文字にしている理由は，登場人物表現が辞書に登録されていないために生じる形態素解析誤りの影響を抑えるためである．これによって例えば『さるかに合戦』で``〜とこがには〜''などの表記から``こがに''という正しい候補を獲得することができる．次に，得られた部分文字列に対してMeCabによる形態素解析を行ってから，以下のフィルタリングを行い残ったものを登場人物候補としてMeCabの辞書に登録する．平仮名，カタカナの小文字から始まっていない句読点，カギ括弧，``！''，``？''を含まない文字列中に接続詞，連体詞，代名詞を含まない複数の形態素で構成されている文章中に``は''を接続した形で出現する上記のルールにより，単語としてあり得ない文字列や，例えば``そして杜子春''，``杜子春は''などのように人物表現の周辺でよく使われる表現を含んだ文字列を人物候補から削除できる．フィルタリングで残った候補に対して，同頻度で出現したn-gram文字列で他の文字列の部分文字列であるような候補は削除し，残った候補をMeCabの辞書に``名詞，固有名詞，一般''として追加する．これにより既に形態素辞書に登録されてある人物候補と同様に物語固有の人物表現を扱うことができる．ここで作成した形態素辞書は以降で説明する要約生成に関する処理にも利用する．ここで登場人物が現れる際の文の特徴について考える．登場人物は物語において重要な役割を担っているため，主題として取り上げられることが多い．また，登場人物は意志を持つものであるため，意志性のある動作を記述している文の動作主として現れることが多い．意志性のある動作とはその動作の実現に対して動作主が能動的に関与しているとみなせる動作のことである．この傾向を利用して，文中の名詞が登場人物として出現しているかどうかを推定する．具体的には物語の地の文に対して，更新した辞書を用いたCaboChataku/software/cabocha/による係り受け解析を行い，主題化する機能を持つ副助詞``は''を後接して複数回出現する名詞で，その文の述部となる動詞に一つでも意志性のある動作を示すものがあれば，その名詞を登場人物と推定する．意志性のある動作を示す動詞の判定には日本語和語動詞LCSを利用した．これは日本語和語動詞を中心に約1000個の動詞に関してその語彙概念構造を記述を試みたものであり，実際にLCSが付与されている延べ742項目の動詞を利用した．『風の又三郎』に対する人物抽出の例を付録に示す．人物抽出の精度を計るために章の評価実験で用いた物語9編を使用した予備実験を行った．複数の被験者に登場人物を列挙してもらい，そのうち過半数の被験者が登場人物と認定したものを正解とした．部分文字列を獲得する際のnの範囲は2〜10とし，出現頻度が2以上の部分文字列のみを対象とした．実験の結果，平均の再現率は0.74，適合率は0.68となった．人手で作成した正解の例と実験の詳細な結果を付録に示す．</subsection>
  <subsection title="トピック・ブロックの抽出">物語文に対して話題がある程度まとまった範囲で出現する部分を仮定しトピック・ブロックとして抽出する．ある文書の話題は何か，そしてその話題の切れ目はどこかという課題は大変難しい問題であり，例えば単語の共起と単語の重要度を利用した手法や，語の反復距離を使用した手法などが提案されているが決定的な手法はまだ確立していない．本稿では作者が記した1文の表現に着目し，1文単位の主題を仮定してそれが連続する文をまとめることでトピック・ブロックを作成する．厳密な連続でトピック・ブロックを作成すると，小さなトピック・ブロックが多く作られ，本来は1つのまとまりであるべき箇所が過分割される可能性がある．これを防ぐため，ウィンドウ幅を設定し，その中での連続を見る．本稿ではこのウィンドウ幅を前2文とした．従って，別の主題の文を間に挟んで同じ主題を持つ文は同じトピック・ブロックに属する．1文の主題とは文中に出てきた単語で表現するならば主語が有力な候補であり，特に副助詞``は''は主語を取り上げて主題化する機能を有している．そこで副助詞``は''が後接する名詞を1文の主題と見なし，ない場合は助詞``が''が後接する名詞を主題とする．ただし，``今日は''，``このごろは''など``は''と接続して副詞的な働きを持つ名詞は主題とは考えにくいので，MeCabを利用して副詞可能となる名詞は排除する．また，主題は省略されやすく，同じ主題が連続する場合は後に続く文において明示的に現れないことが多い．従って，文中に助詞``は''と``が''がない場合は，それが省略されているとみなし前文における主題をその文の主題とする．助詞``は''，``が''を後接している名詞が代名詞の場合，センタリング理論に基づいた単純な照応解析を行う．具体的には代名詞が出現した文の1つ前の文に出現する名詞を先行詞候補とし，その候補が接続する助詞について以下の優先順に従って先行詞を決定する．*0.5screen[]格助詞の``で''や副助詞などがこれに含まれる*-0.5具体例を『杜子春』（芥川龍之介）の一部から示す．*0.5するとどこからやって来たか、突然彼の前へ足を止めた、片目眇の老人があります。それが夕日の光を浴びて、大きな影を門へ落すと、じっと杜子春の顔を見ながら、「お前は何を考えているのだ」と、横柄に声をかけました。screen2文目にある代名詞``それ''の先行詞の候補として1文目から下線部の5個の名詞が挙げられる．このうち上記の優先順から助詞``は''を後接している``老人''を``それ''の先行詞とみなす．センタリング理論に基づいた照応解析の精度を計るため，本稿の評価実験で用いた物語9編を対象に予備実験を行った．助詞``は''，``が''を後接する代名詞に対して出力された先行詞を人手で正否を判定した．実験の結果，照応解析の平均の精度は0.41(134/330)であった．1文ごとの主題を抽出した後，設定した幅のウィンドウの中で連続した主題の文をまとめることでトピック・ブロックを作成する．このときウィンドウ幅内で全く同じ主題が連続した文だけでなく，同じ主題に挟まれた文も同一のトピック・ブロックに含める．これは1文ごとの主題は主語を手がかりに獲得しているが，話の展開においては連続しない場合があるためである．上記の操作はすべて会話文は考慮せず，いわゆる地の文のみを対象とする．このとき会話文は直前の地の文と同じトピック・ブロックに属することとする．これは会話の途中で話題が転換することはほとんどないと考えられるからである．例えば，『赤ずきんちゃん』（グリム兄弟）において以下に示す部分では途中でおばあさんの台詞が入っているが，おおかみを中心に話が展開している．従って，この部分をひとまとまりのトピック・ブロックとみなす．*0.5ところが、このあいだに、すきをねらって、おおかみ（主題）は、すたこらすたこら、おばあさんのおうちへかけていきました。そして、とんとん、戸をたたきました。「おや、どなた。」「赤ずきんちゃんよ。お菓子とぶどう酒を、おみまいにもって来たのよ。あけてちょうだい。」「とっ手をおしておくれ。おばあさんはご病気でよわっていて、おきられないのだよ。」おおかみ（主題）は、とっ手をおしました。screen[]前処理の照応解析でこの文の主題を「おおかみ」と判定している．*-0.5さらに1文が多重のトピック・ブロックに所属することを認める．具体的にはある文s_iに対してその文からウィンドウ幅分だけ前の文のトピック・ブロック中で主題が同じ文が存在すれば，その文が属するトピック・ブロックにs_iも属するとする．同時にその文とs_i間の文も同じトピック・ブロックに属する．これは，ある文が示す主題には助詞``は''や``が''によって明示的に示されるものと文脈から推定できるものの2種類が考えられ，その文はそれぞれの主題で構成される話題の一部分とみなせると考えるからである．ウィンドウ内に主題が同じ文がなければその文を新しいトピック・ブロックに加える．例をあげて説明する．文s_0からs_4があり，その主題が表のようであったとき，ここから抽出されるトピック・ブロックは図のようになる．文s_0，s_1は前に同じ主題を持つ文が存在しないためそれぞれ新しいトピック・ブロックに割り当てる．文s_2はウィンドウ幅内に同じ主題を持つ文s_0が存在するため，その文が属するトピック・ブロックP_0に加える．さらにその間にある文s_1もP_0に加える．一方，文s_4は文s_1と同じ主題を持つが，s_1がウィンドウ幅内にないので新しいトピック・ブロックに属することになる．</subsection>
  <subsection title="重要ブロックの決定">抽出したトピック・ブロックについて物語におけるストーリーへの関与度を評価し，関与しているものが高いものを重要ブロックとして要約に採用する．手法としてはまず重要度の評価尺度を導入し（節参照），次に物語の構成や接続詞情報を考慮して重要ブロックの抽出を行う（節参照）．</subsection>
  <subsubsection title="重要度計算">物語においては，登場人物が行動を起こし，それによって状況が変化するような箇所が重要であると考えられる．これに基づいてトピック・ブロックの重要度を定義する．まずトピック・ブロック内の各文のスコア付けについて説明し，その後ブロック全体の重要度を求める．トピック・ブロック内を構成する文に対して，登場人物や動作主の変化に関する動詞が含まれている場合は評価が高くなるようにスコア付けを行う．具体的には以下の式で決定する．[Score_sentence(s)=_ws(Terms(w)tw(w,s))weight(s)]Score_sentence(s)は文sに対するスコアであり，wはs中に出現する単語である．Terms(w)は単語wの文書全体における重要度を示しており，wが登場人物である場合にその頻度を重要度とする．[Terms(w)=文書Dにおける単語wの出現頻度&amp;（wが登場人物表現）0&amp;（上記以外）cases]tw(w,s)は単語wの文sにおける主題性に基づく重みである．[tw(w,s)=1.2&amp;（単語wが文sの主題）1&amp;（上記以外）cases]weight(s)は文sの述部における動詞に着目して，動作主体が変化を伴うような動詞であれば重要度を高くするように設定する．この判定には竹内らの語彙概念構造辞書を利用する．この辞書では``主体の変化''という分類があり，例えば``寝る''，``振り向く''といった動詞が分類されている．[weight(s)=1.2&amp;（文s中の動詞の意味に``主体の変化''が含まれている）1&amp;（上記以外）cases]トピック・ブロックPの重要度Score_tb(P)は上記で決めた文の重要度を利用して以下の式で求める．[Score_tb(P)=_s_iPScore_sentence(s_i)|P|]ここで|P|はP中の文の数である．これにより正規化することで長さに依存しないスコアとなる．</subsubsection>
  <subsubsection title="重要ブロックの抽出">トピック・ブロックに対して求めた重要度に基づいて重要ブロックを決定する．基本的には要約率を満たすまで重要度の高いトピック・ブロックから選んでいくが，その前にどのような物語でも比較的重要と考えられるトピック・ブロックを重要ブロックとして選ぶ．物語では，登場人物表現が最初に出現する文はその登場人物の説明であることが多く，登場人物表現が最後に出現する文はその登場人物の最終状況を説明している文であることが多い．そこで，重要度の高いものからトピック・ブロックを選択する前に，登場人物表現が最初に出現するトピック・ブロックと最後に出現するトピック・ブロックを重要ブロックとして抽出し，残りのトピック・ブロックに対して重要度の上位から順に要約率分だけ抽出する．物語のあらすじにとって関与が低い要素を省くために，抽出した重要ブロックに対して文の連接関係に着目した要約を行う．ここで不必要な要素とは同じことを繰り返して述べていたり，補足説明をしている要素のことである．連接関係の推定には接続詞と文末表現を利用する．接続関係の分類は永野による7種類の関係（表）を利用した．具体的な手法について述べる．あらかじめ接続詞と文末表現のそれぞれに対して，それが示す連接関係との対応を作成しておく．一部の関係について対応の例を表に示す．隣接する2文に対して，後文に出現する接続詞と文末表現から作成した対応を利用し連接関係を推定する．後文に連接関係の推定に使用する接続詞や文末表現がなかった場合は2文間の連接関係は``展開''とする．推定した連接関係が``補足''，``同格''と判定されたものについて，その後文を削除する．</subsubsection>
  <subsection title="ブロック連結文の抽出">隣接する重要ブロック間での整合性を保つために，その間において生じた状況の変化を示すような文を挿入する．状況の変化とは時間経過や場所移動による場面転換や，登場人物の心境や取り巻く環境の変化などのことである．物語中でこのような状況の変化が起こったとき，それを示すような文がなければ読者はそれに気付かず，読み進めていくにつれて違和感を覚えたり，物語本文を読んだときに得られる理解と異なる理解をする可能性がある．このような状況の変化を示す文をブロック連結文と呼び，要約に挿入することで重要ブロック間の整合性を損なわないようにする．本稿では重要ブロックと原文においてその間に存在するトピック・ブロックでの登場人物表現の出現を基にした局所的な重要度を定義し，これを利用してブロック連結文を抽出する．</subsection>
  <subsubsection title="局所的重要度の計算">隣接する重要ブロックにおいて片方に出現し，且つ，もう片方には出現していないような登場人物があれば，その登場人物は重要ブロック間の状況の変化に関わっていると考えられる．そのような登場人物について記述してある文をブロック連結文として抽出するために，隣接する重要ブロック間での出現の仕方によって登場人物の局所的な重要度を決定し，それを基にして重要ブロック間における文の重要度を決定する．隣接する重要ブロックP_i=s_j,,s_k，P_i+1=s_m,,s_n(j&lt;k&lt;m&lt;n)に対して，この間における登場人物tの局所的重要度を以下の式で求める．[Terms_local(t,P_i,P_i+1)=_s_jss_nfreq(t,s)lw(t,P_i,P_i+1)]freq(t,s)は文sにおける登場人物表現tの出現頻度であり，lw(t,P_i,P_i+1)は単語tがセグメントの連結に対する有効性を表す重みである．P_iとP_i+1間の文の集合をIP_i=s_k+1,,s_m-1とする．[lw(t,P_i,P_i+1)=]この単語の重要度と節で利用した動詞の意味分類を用いて，重要ブロックP_i，P_i+1間の文s_iの局所的重要度Score_local(s_i,P_i,P_i+1)を以下のように定める．[Score_local(s_i,P_i,P_i+1)=_ts_iTerms_local(t,P_i,P_i+1)weight(s_i)]weight(s_i)は重要ブロックの決定で用いた動詞の意味による重みである．これは動詞の意味分類において動作主体の変化を表す動詞として分類されているものであり，これらの動詞が出現した文には重要ブロック間で起きた状況の変化が記述されてある可能性が高いためスコアを少し上げる．</subsubsection>
  <subsubsection title="ブロック連結文抽出">局所的な重要度に基づいて抽出するブロック連結文を決定する．要約として抽出した隣接する重要ブロックP_k，P_k+1について，その間にある文の局所的重要度を上記の式Score_local(s_i,P_i,P_i+1)によって計算し，下記に示すブロック連結文の量CS(IP_k)以下でScore_local(s_i,P_i,P_i+1)の高いものから順にブロック連結文として抽出する．ブロック連結文は要約として抽出された重要ブロックに属していない文から選択する．生成する要約の要約率xとする．要約率は原文書の文字数に対する要約文書の文字数の割合で与えられ，以下の式から求める．[要約率=要約文書の文字数原文書の文字数]要約における重要ブロックの割合をとすると，隣接する重要ブロックP_k，P_k+1間の文集合IP_kに対して取り出すべき文の量CS(IP_k)は以下のようになる．[CS(IP_k)=(1-)x1-x|IP_k|]ここで|IP_k|はIP_kに属する文の量である．割合を大きくすると限られた要約率の中で重要ブロックを多く抽出することを意味し，反対にを小さくすると整合性を重視して連結文を多く取り出すことを意味する．本手法によって生成した要約中に出現するブロック連結文の例を図に示す．下線部が抽出したブロック連結文であり，その前後は要約として抽出した重要ブロックの一部である．図に示すように“郊外の家へ帰ろうと思った。”という部分から主人公の龍介が“通りを出た。”までに汽車に乗り損ねたことが推論できる内容が補完されている．</subsubsection>
  <section title="評価">提案手法の有用性を確認するために実験を行った．報知的な要約では原文書の内容をどれだけ正確に抽出できているかということが重要となる．本稿では，要約の整合性と原文書の適切な部分が要約として抽出できているかを被験者による実験によって確認する．形態素解析器MeCabやChaSen，係り受け解析器CaboChaなどの既存の言語処理ツールは基本的に現代仮名遣いと口語文法に則って書かれた文を処理の対象としている．このため，実験の対象とする物語は，青空文庫で入手できる口語文法と現代仮名遣いで書かれている3人称視点の物語9作品とした（付録）．3人称視点の物語に限定している理由は，1人称視点で書かれた物語では，地の文に語り手となる登場人物の心理描写が交じり，登場人物の行動を述べる文との判別が困難であると考えたためである．比較手法にはtfidfによる重要文抽出（以降tfidf法と呼ぶ）を採用した．tfidfは単語の重要度を決定する手法の一つであり，ある文書集合において特定の文書に出現する単語を重要であるとみなす．本稿では，文中に出現する名詞の重要度をtfidfによって求め，その和をその文の重要度とし，重要度の高いものから順に要約率を満たすまで文を抽出することで要約を生成する．文書dにおける名詞tに対する重要度weight(t,d)は以下の式で求める．[weight(t,d)=tf(t,d)(log(Ndf(t))+1)]tf(t,d)は文書d中の名詞tの出現頻度であり，df(t)は文書集合中で名詞tが出現している文書数，Nは文書集合に含まれる文書の数である．本実験で利用する文書集合は上記で挙げた物語9作品とした(N=9)．</section>
  <subsection title="評価方法">要約の評価でよく用いられる方法はあらかじめ人手で正解データを作成しておき，それとシステムの出力を比較するというものである．この方法は正解データとなる人手で作成された要約が個人による差異が小さければ有効である．本稿では人手による要約の個人差を計るため，3人の被験者に重要文抽出による要約率30%の要約と要約率50%の要約，本手法で作成したトピック・ブロック単位での重要箇所抽出による要約率30%の要約を作成してもらい，それぞれのkappa値を算出した．その結果を表に示す．kappa値が0.7を越えると個人差が少ない良いデータだと一般的に考えられている．これに従うと，人手による要約は個人差が大きく，唯一の正解データを作成することは困難であると言える．また，30%要約に関して文単位での要約とトピック・ブロック単位での要約を比較すると，文単位での要約におけるkappa値に比べてトピック・ブロック単位での要約におけるkappa値の方が作品ごとの差が大きいという結果になった．そこで本稿では正解データを利用した評価ではなく，被験者による主観的な評価を行った．実験項目は以下の通りである．整合性に関する評価内容理解に関する評価本研究において整合性とは話題のまとまりの良さとみなしている．話題のまとまりの良い文書とは，読者がその文書を読んで予測できる展開と文書の実際の展開が似ているような文書だと考えられる．逆に話題のまとまりが悪い文書では読者の予測と文書の実際の展開が異なることがあり，このとき読者はその文書が読みにくいと感じることがある．そこで本稿では整合性の評価として，10人の被験者に各作品毎に提案手法による要約とtfidf法による要約の2種類の要約を提示し，読みやすさの評価，つまり要約文が話として繋がっているかどうかを評価し，良いと思う方を選択するよう指示した．どちらでもないという選択肢は設けず，各作品に対して必ずどちらかを選択してもらうようにした．後者の内容理解に関する評価では被験者が物語の内容を知っていると正しい評価ができないということが考えられる．そこで実験を行う際に物語の内容を知らない被験者を選び，全ての作品に対して評価を行った．また，提案手法かtfidf法のどちらか片方の要約を読んでから，もう片方の評価を行うと後者の評価の際に前者で読んだ要約から得られた知識を被験者が無意識に使ってしまう可能性がある．そのため，被験者にはどちらか片方の要約しか提示しない．この実験では1作品あたり提案手法による要約に対する評価とtfidf法による要約に対する評価のそれぞれについて8人の被験者で行っている．内容理解に関する評価は以下の手順で行った．対象の作品に対する提案手法か比較手法のどちらか一方		の要約を読み，そのあらすじを自由筆記で作成する．こ		こで被験者には要約が提案手法によるものか		tfidf法によ		るものかは知らせない．原文書を読んで，作業1で書いたあらすじを被験者が自		分で修正するlistこれは報知的要約が理想的なものであるならば，そこから得られる理解と原文書を読んだときに得られる理解は同じであるという仮定に基づいている．上記の作業2において修正数が少なければ，その要約は良いと評価できる．自由筆記でのあらすじ作成では，単文で記述することと，名詞に関しては要約内に出現した単語のみを使用することを被験者に指示した．修正の方法は以下の3種類のどれかに従うように指示した．訂正（1文中の一部を追加削除）追加（1文を追加）削除（1文を削除）作成するあらすじには個人差が生じるが，これは修正数をあらすじ中の文の数で正規化することで対処する．評価に使用した要約の要約率は提案手法，tfidf法ともに30%に設定した．また提案手法では重要ブロックとブロック連結文の割合を設定する必要がある．本研究では物語の内容を簡単に把握できるための報知的要約の生成を目的としている．そのため要約には物語に重要な要素を多く含んでいる必要がある．しかし，重要な要素を羅列するだけでは文書としてのまとまりに欠け，それが内容の理解の妨げになる可能性がある．このことから重要な要素を中心として構成され，文書のまとまりを考慮した要約が良い要約であると考える．これを反映した要約を生成するため，本稿では生成する要約における重要ブロックの割合は0.7と設定した．</subsection>
  <subsection title="結果と考察">整合性の評価の結果を表に示す．数字は各手法の方が読みやすいと判定した人の数である．個人差によるばらつきを考慮して，9作品の平均で整合性を評価すると提案手法がtfidfよりも優れた結果を示していることが分かる．『風の又三郎』では評価が良くなかったが，これは後の内容理解での考察にも関係するが会話文の中に物語の展開に関わる表現が入っているため本手法ではうまく扱うことができなかったのが原因である．内容理解の評価の結果を表に示す．あらすじの平均文数は被験者が作成したあらすじの文数の平均を取ったものである．評価値は以下の式に基づいて決定した．[評価値=（訂正数1+追加数2+削除数0.5）被験者が作業1で答えたあらすじの文数]修正の際に，新たに文を追加したということは内容の理解に必要な情報が要約には含まれていなかったことを示している．文の訂正は必要な情報は現れていたもののその解釈で誤りがあったことを示している．このことから追加が最も重大な修正といえる．これを反映するために各修正項目にペナルティをかける．上記の評価式は修正項目にペナルティをかけた値の合計を修正前のあらすじの文数で正規化したものである．評価値が小さいほど要約を読んだときに得られる理解と原文書を読んだときに得られる理解の差が小さいと考える．実験の結果，表の9作品に対する評価値の総合計から，提案手法の方がtfidf法よりも内容理解において原文との差異が少なく，被験者に対してよりよい理解を与えたことが示された．しかしながら，提案手法が大きく勝るというものではなく，またいくつかの作品では劣っている部分もある．これらについて考察を述べる．提案手法では重要ブロックの抽出の際に会話文の内容を考慮していない．そのため，物語の内容に対して会話文が重要である箇所があってもその部分を正しく抽出することができない．一方，tfidf法では地の文や会話文に関係なく，単語の重要度から抽出する文を決定しているので，会話文の中に重要度の高い語が含まれていればそれを抽出することができる．例として『風の又三郎』に対する提案手法による要約（図）と，tfidf法による要約（図）を示す．この例ではtfidf法の方では物語の内容にとって重要と考えられる先生の台詞を会話文から抽出している．この他に提案手法がtfidf法に劣ってしまう要因として，重要箇所抽出の際に本来要約に必要とされるべき箇所が抽出できなかったということが考えられる．提案手法ではトピック・ブロックを単位として重要箇所抽出を行っている．このため，重要箇所抽出で正しく重要ブロックが抽出できなかったとき，内容理解に関する評価において被験者が該当部分に関する全ての記述を行うことになる．これに対してtfidf法では文を単位として抽出を行っているため，重要な箇所が全て抽出できなくてもある程度の文は抽出できることがある．この場合，内容理解の評価で被験者が追加する項目は提案手法と比べて少なくなり，結果としてtfidf法の方が良い評価になる．例えば，『名人伝』には主人公である紀昌とその師である飛衛が対決する場面がある．提案手法による要約（図）ではこの場面が重要箇所と見なされずに抽出できていないが，tfidf法では文単位で抽出されるため，ある程度は要約に出現している（図）．本稿で行った内容理解に関する実験において被験者はこの場面を重要と判断してあらすじに加えているが，提案手法による要約に対してはその場面に該当する記述を全て加筆している．一方，tfidf法による要約に対しては記述を補完するだけでよく，修正のために追加する文の数はtfidf法による要約の方が少なくなる．その結果，内容理解の評価ではtfidf法の方が良いという結果になったと考えられる．しかし，整合性の評価において『名人伝』では提案手法が大きく上回っている．これはtfidf法による要約では細かな欠損が多く，それらが被験者に対して何度も違和感を生じさせ，結果として提案手法による要約の方が読みやすいという評価になったと考えられる．tfidf法では物語においてどのような単語が重要かという判断を文書集合に依存しているとみなせる．従って，一般的に使われるような語がある物語において重要な要素であった場合，tfidfではこれを重要な語とみなせないことがある．この点においてtfidf法による要約は作品によっては不安定になることが予測される．実際，表の評価値の分散をみると提案手法に比べてtfidf法の方が分散が大きく，内容理解に貢献できる場合と劣る場合の差が小さくない．提案手法は整合性も考慮したつなぎの文も含めて要約率を達成して出力している一方で，tfidf法による要約では特徴的な名詞を多く含む文を出力している．よってtfidfは同じ要約率という制約で読みやすさを捨てた分，内容に関する文をより多く出力していると考えられる．この点が内容理解で大きな差が出なかった原因の一つである．しかしながら，その内容理解の質は提案手法とtfidf法による要約手法では同じでないと考えられる．表において，被験者が作成したあらすじの文数を見ると全ての作品において提案手法の方がtfidf法よりも倍近く上回っている．もし物語の内容を十分理解していれば，より詳細なあらすじを作成することができる．このとき，作成されたあらすじの文の数は多くなると考えられる．従って，提案手法による要約から作成されたあらすじの文の数が多いということは，tfidf法による要約に比べて，提案手法による要約はあらすじの作成に貢献する文を多く含んでいるとみなすことができる．本研究では物語の内容理解のための要約の生成を目的としており，このことから提案手法の方がより質の高い要約を生成できると考えられる．物語では何を重要と見なすかは人によって異なることが多い．そのため，人手で要約を作った場合でも個人差が大きく，また物語は個々の特徴が違うため，物語による違いも大きいと考えられる．表，表から複数の人間による判断である合計値の平均と，そのばらつき具合である分散のいずれにおいて提案手法の方が上回っており，このことから提案手法はtfidf法による要約と比べて物語の違いによる影響を受けにくく，安定した要約を生成できるという点で有効であると考えられる．本研究では重要ブロック間のつながりを補完するためにブロック連結文を導入している．その有効性を調べるため，ブロック連結文を挿入せずに重要ブロックの抽出のみで作成した要約と提案手法による要約とで整合性に関する比較評価を行った．表は整合性についての評価結果である．9作品を対象にした平均では有意な差は見られなかった．これは短い物語（『杜子春』，『鼻』，『名人伝』（160文前後））に対して既に重要ブロックで十分な整合性がありブロック連結文を挿入することで冗長となり評価を下げたと考えられる．よって短い物語に対してはブロック連結文を適用しないなどの手法を取り入れることができれば有意な差が得られると考えられる．一方，内容理解に対する評価では表に示すようにブロック連結文を適用することで評価値が0.86から0.84に減少し，向上が見られた．これは総合的にはブロック連結文が内容を補完したため内容理解に対して有効に働いたと考えられる．提案手法の性能の限界を調べるために人物を人手で抽出し，かつ，トピック・ブロックの決定のための主題を人手で特定した場合の提案手法による要約について内容理解の評価実験を行った．その結果を表に示す．提案手法による要約，重要ブロック抽出による要約と比較して，人手で前処理を行った場合での要約に対する評価がもっとも良かった．提案手法では照応解析をセンタリング理論に基づいた単純な方法で行っており，実験の対象の物語に対する精度が0.41と低い．従って，照応解析の精度を上げることで提案手法の性能の向上が見込める．また表においてブロック連結文の有無だけでは整合性の向上は全作品に対して明らかではなかったが表に示すとおり，重要ブロックが一貫した話題で構成されていればtfidf法に比べて全作品に対して整合性が勝ることを示した．よって表や表に示されるように内容理解において提案手法に基づく要約がtfidf法による要約に対して優れた結果が得られたのは結局，整合性を指向して一貫性のある要約を出力できたことが理由であると考えられる．</subsection>
  <section title="おわりに">本稿では整合性を考慮した物語の要約手法を提案した．整合性は読者が内容を正しく把握するために重要な要素であり，特に複数の話題について述べている文書では話題間の整合性が明らかでないと読者への負担が大きくなる．物語では場面転換などで話の状況の変化が何回も発生する．この状況の変化を把握できていないと，実際に物語で述べられている状況と読者が理解している状況に差異が生じ，結果として間違った理解をしてしまう可能性がある．状況の変化には場所の移動や時間の経過などがあるが，本手法は特にその状況に登場している人物の移り変わりに着目した．従来の重要箇所抽出による要約に，隣接する抽出した箇所間での整合性を保つように，人物の移り変わりに関する文を挿入することで整合性のある読みやすい要約を作成した．tfidf法による要約との比較実験では，被験者の内容の理解の程度に関してわずかではあるが提案手法の方が原文から得られる内容を反映している要約を作成できることを示した．被験者による整合性の評価で行った読みやすさに関する実験では提案手法の方が読みやすいという評価が得られた．また，ブロック連結文の有無の違いに関する評価実験から，ブロック連結文だけでなく重要ブロックとの両方の効果によって要約文全体の読みやすさ（整合性）の向上に対して有効であることを示した．さらに提案手法は内容理解において整合性を考慮していないtfidf法に比べて優れていることが評価結果から示された．このことから整合性を考慮することでより内容を理解しやすい要約が生成できると考えられる．提案手法ではトピック・ブロックの重要度計算に登場人物とその行動を考慮したが，節で示したように会話文を考慮する必要がある．また，より詳細な話題間の繋がりを計算するために，場所の移動や時間経過などの場面転換表現も考慮に入れる必要がある．これらが今後の課題である．</section>
  <section title="実験に使用した小説">[]台詞はカギ括弧でくくられたまとまりを1文とみなす．</section>
  <section title="登場人物抽出の例"/>
  <section title="人物抽出の予備実験結果">document</section>
</root>
