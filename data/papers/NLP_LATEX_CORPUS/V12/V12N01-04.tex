
\documentstyle[jnlpbbl,graphicx,lingmacros]{jnlp_j}

\setcounter{page}{1}
\setcounter{巻数}{2}
\setcounter{号数}{3}
\setcounter{年}{1995}
\setcounter{月}{7}
\受付{1995}{5}{6}
\再受付{1995}{7}{8}
\採録{1995}{9}{10}

\setcounter{secnumdepth}{2}

\title{チャット対話における発言間の継続関係と応答関係の同定}
\author{徳永 泰浩\affiref{NINTENDO} \and 乾 健太郎\affiref{NAIST} \and 松本 裕治\affiref{NAIST}}
\headauthor{徳永 泰浩・乾 健太郎・松本 裕治}

\headtitle{チャット対話における発言間の継続関係と応答関係の同定}
\affilabel{NINTENDO}{任天堂株式会社 総合開発本部}
{iRD Product Development Department，Nintendo Co., Ltd.}
\affilabel{NAIST}{奈良先端科学技術大学院大学 情報科学研究科}
{Graduate School of Information Science，Nara Institute of Science and Technology}

\jabstract{ 本論文では，チャット対話の対話構造を解析する手法を提案し，そ
の実現可能性について論じる．まず，発言間の二項関係である継続関係と応答関
係に対話構造を分解し形式化する．継続関係とは，質問やそれに対する応答を構
成する同一話者による発言間の関係である(例えば，1つの質問を構成する2つの
発言「あなたは」と「学生ですか？」の関係，あるいは1つの応答を構成する2つ
の発言「はい」と「そうです」の関係)．応答関係とは，質問と応答のような異
なる話者による発言間の関係である．これらの関係に基き、発言をまとめあげる
ことで対話構造を解析する．本研究では，この問題をある発言とそれに先行する
発言との間に継続関係または応答関係があるか否かの2 値分類問題に分解し，コ
ーパスベースの教師あり機械学習を試みた．解析対象は，対話構造を付与したコ
ーパスである(2 人対話と3 人対話の合計69 対話，11905発言)．本手法による対
話構造全体の正解との一致率は，2人対話87.4\%，3人対話84.6\%であった．}

\jkeywords{チャット，対話理解，対話構造解析}

\etitle{Identifying Continuation and Response Relations\\
between Utterances in Computer-Mediated Chat \\Dialogues}
\eauthor{Yasuhiro Tokunaga\affiref{NINTENDO} \and  Kentaro
Inui\affiref{NAIST} \and Yuji Matsumoto\affiref{NAIST}}

\eabstract{ This paper proposes a computational model for analyzing the 
communicative structure of computer-mediated chat dialogues, reporting 
the present results of our empirical evaluation. We first formalize 
communicative structure underlying chat dialogues by decomposing it into 
{\it continuation relations} and {\it response relations}. A 
continuation relation holds between utterences of the same speaker that 
constitute a complete chunk functioning as a question response, etc. 
(e.g. the relation between the separate utterences {\it Are} and {\it 
you a student?}, which constitute a question). A response relations, on 
the other hand, holds between utterances, e.g. a question and its 
response, made by different speakers. Our model analyzes communicative 
structure by grouping utterances together according to these types of 
relations in a bottom-up fashion. For this process, we use corpus-based 
supervised machine learning. We manually annotated a chat dialogue 
corpus with communicative structure (two-person and three-person 
dialogues: 69 dialogues in total, containing 11,905 utterance tokens). 
The automatic analyses matched the manual analyses in 87.4\% for 
two-person dialogues and 84.6\% for three.}

\ekeywords{chat, interactional understanding, interactional structure analysis}

\begin{document}
\maketitle

\section{はじめに}

省略補完や代用表現の解釈といった対話理解のための対話構造のモデル化と解
析は，音声対話を対象にした機械翻訳の分野で特に重要とされている．これに
対し，チャット対話を対象とした対話構造のモデル化と解析は，情報抽出やコ
ミュニケーション支援といったチャット対話を言語資源として利用する研究分野に
おいても重要とされている\cite{Khan:02,Kurabayashi:02,Ogura:03}．このよ
うな分野では，「現在話されている話題は何か」「誰がどの話題について情
報をもっているか」といった情報を獲得することが必要であり，各発言の相
互の関係を示す対話構造を同定する必要がある．

チャット対話では，表\ref{tbl:chat}のようにメッセージを送受信することで対
話が進む．対話は文字データとして記録されるため，そのまま言語資源として利
用できる．しかし，チャット対話はその独特の特徴のため，音声対話を対象とし
た既存の対話構造モデルをそのまま適用することは難しい．まず，表
\ref{tbl:chat}の25 と27の発言のように，質問と応答のような意味的につなが
りを持つ発言が隣接しない場合がある．また，質問や応答を構成する発言自体も
31 と32，33の発言のように区切って送信({\bf 区切り送信}) される場合がある
\cite{Werry:96}．このように，チャット対話の基本単位 は音声対話のそれとは
異なる．

本論文の目的は，チャット対話の発言間の二項関係である継続関係と応答関係を
同定する処理を自動化して対話構造を解析する手法を提案し，その実現可能性に
ついて論じることである．2節で詳述するように同一話者による発言のまとまり
を{\bf ムーブ}と呼ぶ．このとき，チャット対話の対話構造を解析する作業は，
次の２つの処理に分解できる．

\begin{description}

\item{\boldmath $継続関係の同定：$}\.同\.一\.話\.者の発言間の継続関係を
同定することによってそれらをムーブにまとめる処理．

\item{\boldmath $応答関係の同定：$}質問と応答のような\.異\.な\.る\.話\.
者のムーブ間の応答関係を同定し，チャット対話全体の対話構造を抽出する処理
．

\end{description}

具体的には，表\ref{tbl:chat} の発言31から33までからなるムーブを構成する
発言間の二項関係(例えば，発言31と32及び発言32と33)を継続関係，質問と応答
のような異なる話者のムーブ間の二項関係(例えば，発言31から33までからなる
ムーブと発言34 からなるムーブ)を応答関係と定義し，これらの関係に基づいて，
発言をまとめあげることで対話構造を解析する．本研究では，この問題をある発
言とそれに先行する発言との間に継続関係があるか否か，または応答関係がある
か否かの2 値分類問題に分解し，コーパスベースの教師あり機械学習を試みた．
解析対象はオフラインのチャット対話ログである．
\section{対話構造のモデル}

\begin{table}[tbt]
  \begin{center}
    \caption{チャット対話例}
    \label{tbl:chat}
    \begin{tabular}{cccl}
      \hline
      \hline
      発言ID & 受信時刻 & 送信者名 & \multicolumn{1}{c}{送信内容(発言)} \\
      \hline
      ...&...&...&...\\
       24&23:01&A&もう少し早くやるべきだったのでは\\
       25&23:01&B&仕事ですか？\\
       26&23:01&C&すみませぬm(\_ \_)m\\
       27&23:02&A&いえ\\
       28&23:02&A&ファンハール解任の話です\\ 
       29&23:02&C&インテル戦前にですか？\\
       30&23:02&A&いよいよ解任されそうって話です\\
       31&23:03&B&ファンファールのサッカーを\\
       32&23:03&B&出来る面子じゃありませんよ\\
       33&23:03&B&バルセロナは\\ 
       34&23:03&C&確かに\\
      ...&...&...&...\\
      \hline
    \end{tabular}
  \end{center}
\end{table}

\begin{figure}[tbt]
 \centerline{
    \includegraphics{fig/chat_layeredstructure2relateness.eps}
  }  
  \caption{チャット対話の対話構造モデル}
  \label{fig:chat_layeredstructure2relateness}
\end{figure}

我々は，Sinclairらの対話構造モデル\cite{Sinclair:92}を拡張し，チャット対
話に適用した．表\ref{tbl:chat}のチャット対話例にこのモデルを適用した結果
を図\ref{fig:chat_layeredstructure2relateness}に示す．

Sinclairらは対話構造を，複数の階層から構成される対話のやりとりの構造とし
てモデル化している．まず，対話中の発言を相互行為上の機能(真偽を確かめる
質問や確認など)によって定義される単位である{\bf アクト}と見なす．次に，\.
同\.一\.話\.者による複数のアクトを，質問や応答などの対話の局所構造の中で
の機能を表現する{\bf ムーブ}にまとめる．さらに，\.異\.な\.る\.話\.者によ
るムーブの間の関係(例えば，話者Aの質問に対する話者Bの応答)を考え，こうし
た関係にある複数のムーブのまとまりを{\bf エクスチェンジ}とする．

Sinclairらのモデルは，対話の発言間の関係を捉える道具立てとしてチャット対
話の構造解析にも有用であると考えられる．しかし，チャット対話にこのモデル
をそのまま適用することは2つの理由で難しい．1つ目の理由は，処理の基本単位
の違いである．Sinclairらの対話構造モデルでは，区切り送信によって生じた表
\ref{tbl:chat} の31のような未完結な発言を想定しておらず，そうした発言の
扱いが明らかでない．2つ目の理由は，ムーブ間の応答関係の交差の問題である．
チャット対話では，表1の対話例の発言24と26のように，応答関係にあるムーブ
同士が必ずしも隣接しない．Sinclairらのモデルはこの例のようにムーブ間の応
答関係が交差する可能性を想定していない．

我々は，Sinclairらのモデルを以下のように拡張する．区切り送信は発言権を相
手に渡さないために起こるとされている\cite{Hosoma:00}．我々は，このような
発言を発言権の保持を意図するアクトと見なし，モデルの基本単位を区切り送信
によって区切られた個々の発言に変更する．また，ムーブ間の応答関係が交差す
る現象を表現できるよう，交差を許すモデルに拡張する．これらの拡張により，
チャット対話特有の現象を含めて対話構造を表現することができるようになり，
対話構造解析アルゴリズムの議論が可能になる．

また，Sinclairらのモデルは，どのような発言(アクト)同士が継続関係をなして
ムーブを構成するか，あるいはどのようなムーブ 同士が応答関係をなしてエク
スチェンジを構成するかに関する具体的な規定が示されておらず，この点も問題
である．4節に詳述するように，本論文で提案する解析手法には，教師データと
して対話構造を付与した信頼性の高いコーパスが必要である．このため，対話構
造モデルをチャット対話データに適用するための具体的な指針が必要である．以
下2.1節及び2.2 節では，発言間の継続関係およびムーブ間の応答関係を新しく
規定し，指針を示す．この結果，3節で述べるように，タグ付け作業者間の判断
のゆれが少ない，信頼性の高い注釈つきコーパスを構築することができた． 

\subsection{継続関係の定義}

ムーブを構成する同一話者による発言(アクト)間の関係を継続関係と呼ぶ．表
\ref{tbl:chat}の例で言うと，発言31から33までの同一話者による一連の発言の
まとまりがムーブであり，発言31と32の関係及び32と33の関係をそれぞれ継続関
係と言う．一方，発言28と30 は同一話者による発言であるが，それぞれ異なる
ムーブの構成素であり，この発言間には継続関係はないと考える．上で論じたよ
うに，本モデルでは区切り送信で区切られた発言を基本単位に変更したので，ど
のような発言同士が継続関係をなしてムーブを構成するかを新しく規定する必要
がある．以下，継続関係にある発言(例えば発言27と28)において，前の発言(例
えば発言27)を先行発言，後の発言(例えば発言28)を後続発言と呼ぶ．

継続関係の定義は，人間が判断しやすいもので，かつ同定の自動化も容易なもの
でなければならない．本論文では新たに，統語的手がかりに基づいて，継続関係
を助詞類型，接続詞類型，特殊表記型，名詞類型，倒置型，挿入節型の6 つの型
に分けて定義する．以下に示す継続関係の例では，統語的手がかりに下線をひく．

\begin{description}
\item{\boldmath $助詞類型：$} 

先行発言(a)の末尾表現が格助詞または接続助詞，読点であるといった局所的な
情報から，先行発言(a)の一部が後続発言(b)の一部に係ると判断できる場合を助
詞類型を呼ぶ． 

  
  \eenumsentence{
  \item[a)] Aさん：Bさん\underline{は}
  \item[b)] Aさん：技術がないからダメ．
  } 

  
  \eenumsentence{
  \item[a)] Aさん：一生懸命やってるのですが\underline{、}
  \item[b)] Aさん：報われません
  } 

\item{\boldmath $接続詞類型：$}

先行発言(a)の末尾表現が発言のはじまりを示す合図表現または接続詞，フィラ
ー，感動詞，接続表現であるといった局所的な情報から，先行発言(a)の一部が
後続発言(b)の一部に係ると判断できる場合を接続詞類型と呼ぶ．

  
  \eenumsentence{
  \item[a)] Aさん：\underline{あのー、で}
  \item[b)] Aさん：Xって会社名、聞いたことある？
  }

\item{\boldmath $特殊表記型：$}

先行発言(a)の末尾表現が終助詞または助動詞などの文末表現であり，後続発言
(b)の先頭表現がエモーティコンや引用記号を使った引用表現であるといった局
所的な情報から，先行発言(a)の一部が後続発言(b)の一部に係ると判断できる場
合を特殊表記型と呼ぶ．

\eenumsentence{
\item[a)] Aさん：で，実際やめたけど\underline{ね}
\item[b)] Aさん：\underline{（笑）}
}

\item{\boldmath $名詞型：$}

先行発言(a)の末尾の形態素が名詞であり，名詞が数詞又は名詞の後に助詞が省
略されていると判断でき先行発言(a)の一部が後続発言(b)の一部に係ると判断で
きる場合を名詞型と呼ぶ．下の例では，先行発言(a)の名詞「S選手」の後に助詞
が省略されていると判断できる．


  \eenumsentence{
  \item[a)] Aさん：\underline{S選手}
  \item[b)] Aさん：エースですよ
  }

\item{\boldmath $倒置型：$}

後続発言(b)の一部が先行発言(a)の一部に係ると判断できる場合を倒置型と呼ぶ．

  
  \eenumsentence{
	\item[a)] Aさん：エースですよ
	\item[b)] Aさん：\underline{マンチェスターでも}
  }

\item{\boldmath $挿入節型：$}

後続発言(b)が先行発言(a)に対しての言い換えや言い直し等の挿入節と判断でき
る場合を挿入節型と呼ぶ．下の例では，発言(a)から(c)にかけての同一話者によ
る一連の発言が同一ムーブである．挿入型に限り，発言(a)と(b)及び発言(a)と
(c) がそれぞれ継続関係にあるとする．つまり，継続関係が枝分かれすることに
なる．発言(b)と(c)の間には何ら統語的関係は認められないので，枝分かれ構造
を仮定するのは自然である．また，厳密には挿入節とは言えないが，自分の発言
に対する付加的発言，いわゆる自己レスも挿入型とする．自己レスは，例えば下
の例の発言(a)と(b)のように，挿入型と同様の出現形態と判断できるからである．

  
  \eenumsentence{
  \item[a)] Aさん：勘違いしていると思いますが
  \item[b)] Aさん：\underline{変な文章だな(´Д｀;)}
  \item[c)] Aさん：北の某大学は俺にとっちゃアントラーズみたいなもんです
  }

\end{description}

\subsection{応答関係の定義}

エクスチェンジを構成する異なる話者によるムーブ間の関係を応答関係と呼ぶ．
表\ref{tbl:chat}の例で言うと，発言31から33までのムーブAとそれと異なる話
者による発言34からなるムーブBが応答関係にある．一方，発言30からなるムー
ブCとムーブAは発話者は異なるが，応答関係にはなく，異なるエクスチェンジに
属する．

本論文では，エクスチェンジの一般形\cite{Sinclair:92,Ishizaki:01} にし
たがってムーブの機能を{\bf 働きかけ}，{\bf 応答}，{\bf 補足}，{\bf 応
答/働きかけ}の4つに分類し，ムーブ間の応答関係を規定する．エクスチェン
ジの構成規則は以下のように一般化されている\cite{Ishizaki:01}．*は0回
以上の繰り返しを表す．

\begin{description}\item{\boldmath $エクスチェンジの一般形：
$}\begin{eqnarray*} [働きかけ]＋([応答/働きかけ])＋[応答]＋[補足
]*\end{eqnarray*}\end{description}この構成規則から，応答関係にあるムーブ
の機能の組合せとしては，[働きかけ]→[応答]，[応答]→[補足]，[補足]→[補
足]の3通りが可能である．さらに我々は以下に述べるように，各ムーブを構成す
る発言の種類に基づいて，ムーブ間の応答関係をより詳細に制限する．

まず，発言をアクトと呼ばれる下位分類に分類する．アクトの分類方法について
はすでにいくつかの提案がある．本研究では発話行為タグ\cite{Araki:99} を参
考に表\ref{tbl:acts}に示す20種類のアクトを定義した．ただし，アクトが区切
り送信によって複数の発言に分割されている場合は，それら複数の発言をまとめ
たものにアクトを与える．次に，どのようなムーブ同士が応答関係を構成し得る
かに関する制約をムーブに含まれるアクトに基づいて表\ref{tbl:crp}のように
与える．例(8)は，発言(a)と(b)からなるムーブAと発言(c)と(d)からなるムーブ
Bとの応答関係である．発言(a)と(b)のアクトは区切り送信によって複数の発言
に分割された真偽情報要求アクトである．一方，発言(c)は否定・拒否アクト，
発言(d)は情報伝達アクトであり，ムーブBは2つのアクトからなる．表
\ref{tbl:crp}から，真偽情報要求アクトを含むムーブと応答関係を構成し得る
のは，肯定アクトあるいは否定・拒否アクト，不明な応答アクトを含むムーブで
ある．

\eenumsentence{
\item[a)] Aさん：ベロンって				[真偽情報要求]
\item[b)] Aさん：まだラツィオにいるんだっけ？		[(区切り送信)]
\item[c)] Bさん：いや					[否定・拒否]
\item[d)] Bさん：彼はマンチェスターにいます。		[情報伝達]
}

\begin{table}[tbt]
  \begin{center}
    \caption{ムーブの機能に対応する発言のアクト}
    \label{tbl:acts}
    \begin{tabular}{|c|c|l|}
      \hline
      \multicolumn{1}{|c|}{機能} & \multicolumn{1}{|c|}{アクト} & \multicolumn{1}{|c|}{定義} \\
      \hline
      \hline
      働きかけ&示唆&聞き手に対する行為の要求で，聞き手が諾否または何らかの応答を\\
      &&返す必要が必ずしもないもの\\
      &依頼&聞き手に対する行為の要求で，聞き手が諾否または何らかの応答を\\
      &&返す必要のあるもの\\
      &提案&両者で行う行為の提案で，聞き手が諾否または何らかの応答を返す\\
      &&必要が必ずしもないもの\\
      &勧誘&両者で行う行為の提案で，聞き手が諾否または何らかの応答を返す\\
      &&必要のあるもの\\
      &確認&話し手が文脈または何らかの知識から聞き手の応答に対して予測を\\
      &&持って発する質問\\ 
      &真偽情報要求&話し手が聞き手の応答に対する予測をもっていない質問で，「はい」\\
      &&または「いいえ」で答えられるもの\\
      &未知情報要求&話し手が聞き手の応答に対する予測をもっていない質問で，なんら\\
      &&かの値または表現を応答として要求するもの\\
      &約束・申し出&話し手の行為の提案\\ 
      &希望&話し手が目標とする状態を述べるもの\\
      &情報伝達&話し手の知識や意見，または話し手が事実と思っていることを述べ\\
      &&るもの\\
      &その他の言明&感謝・謝意の表明など\\
      &その他の働きかけ&対話の調整など\\
      &不明な働きかけ&働き掛けを意味する発言ではあるが，上記の分類には含まれない\\
      &&もの\\
      \hline
      応答&肯定・受諾&真偽情報要求に対してその命題内容を肯定する際の返答，および依\\
      &&頼や勧誘に対してその要求を受け入れることを示す際の返答\\
      &否定・拒否&真偽情報要求に対してその命題内容を否定する際の返答，および依\\
      &&頼や勧誘に対してその要求を受け入れないことを示す際の返答\\
      &未知情報応答&未知情報要求に対して，その値を与える発言\\
      &あいづち&相手の発言をうながす発言\\
      &不明な応答&応答を意図する発言ではあるが，上記の分類には含まれないもの\\
      \hline
      補足&了解&応答の後に続き，やりとりの目的が達成されたことを伝えるもの\\
      &不明な補足&補足の機能をもつが，上記の分類には含まれないもの\\
      \hline
    \end{tabular}
  \end{center}
\end{table}

\begin{table}[tbt]
  \begin{center}
    \caption{応答関係にあるムーブの対応表}
    \label{tbl:crp}
    \begin{tabular}{|l|l|l|}
      \hline
      \multicolumn{1}{|c|}{先行ムーブの機能} & \multicolumn{1}{|c|}{先行ムーブに含まれるアクト} & \multicolumn{1}{|c|}{後続ムーブに含まれるアクト} \\
      \hline
      \hline
      働きかけ&示唆&肯定・受諾，否定・拒否，不明な応答\\
      &依頼&肯定・受諾，否定・拒否，不明な応答\\
      &提案&肯定・受諾，否定・拒否，不明な応答\\
      &勧誘&肯定・受諾，否定・拒否，不明な応答\\
      &確認&肯定・受諾，否定・拒否，不明な応答\\
      &真偽情報要求&肯定・受諾，否定・拒否，不明な応答\\
      &未知情報要求&未知情報応答，不明な応答\\
      &約束・申し出&肯定・受諾，否定・拒否，不明な応答\\
      &希望&あいづち，不明な応答\\
      &情報伝達&肯定・受諾，否定・拒否，あいづち\\
      &&不明な応答\\
      &その他の言明&不明な応答\\
      &その他の働きかけ&不明な応答\\
      &不明な働きかけ&肯定・受諾，否定・拒否，未知情報応答\\
      &&あいづち，不明な応答\\
      \hline
      応答&肯定・受諾&了解，不明な補足\\
      &否定・拒否&了解，不明な補足\\
      &未知情報応答&了解，不明な補足\\
      &あいづち&了解，不明な補足\\
      &不明な応答&了解，不明な補足\\
      \hline
      補足&了解&了解，不明な補足\\
      &不明な補足&了解，不明な補足\\
      \hline
    \end{tabular}
  \end{center}
\end{table}
\section{実験用コーパス}

本研究では，教師付き機械学習を利用し，チャット対話の対話構造解析を行な
う．そのために，訓練データとして対話構造を付与したコーパスが必要になる．
しかし，これまでの研究では主に人手で作った規則を用いて解析する手法をとっ
ていたため，訓練データとして使える大規模な対話構造付きコーパスは存在し
ない．そこで我々は，対話構造を付与したコーパスを作成した．

\subsection{コーパスの元にしたデータ}

本研究で使用するコーパスは，IRC(Internet Relay Chat)で公開されているチャ
ット対話データを独自に収集し，それを元に作成したものである．使用したチャ
ットシステムは， 
CHOCOA\footnote{http://www.labs.fujitsu.com/freesoft/chocoa/}である．
CHOCOAでは，分単位の受信時刻，送信者名，送信内容の3つ組が一度に送受信で
きる．本研究では，これを入力対話の基本単位とした．対話参加者の入退出の通
知などチャットシステム自体が通知する発言は分析対象から除外した．

収集した対話データは，2人対話34対話(5769発言中システム発言を除外した
5180発言)と3人対話35対話(7439発言中システム発言を除外した6725発言) の
合計69対話(13208発言中システム発言を除外した11905発言)である．発言者の
異なりは27名であり，多くの話題は進路，サッカー，テレビゲームについてで
ある． 収録期間は約4カ月である． 全発言に占める関係先を持つ発言数は表
\ref{tbl:relrate4.1} の通りである．


\begin{table}[tbt]
  \begin{center}
    \caption{全発言に占める関係先を持つ発言数}
    \label{tbl:relrate4.1}
    \begin{tabular}{|l|r|r|}
      \hline
      & 2人対話 & 3人対話 \\
      \hline
      継続関係先をもつ発言数 & 1635 & 1599\\\hline
      応答関係先をもつ発言数 & 500 & 589\\\hline
      総発言数 & 5180 & 6725\\
      \hline
    \end{tabular}
  \end{center}
\end{table}

\subsection{対話構造の表現方法} 

2節で提示した対話構造モデルをチャット対話データに付与したコーパスの一部
を表\ref{tbl:exp4.1}に示す．コーパスの各項目について説明する．発言ID は
各発言固有のIDである．関係先は，発言と関係を持つ発言のIDである．関係先の
発言が複数考えられる場合(例えば，発言45，46，47のように，2 つの質問発言
に対して1 発言で答えるもの)は両方の発言を関係先とする．関係名は，継続関
係，応答関係のいずれかであり，関係先を持たない場合は空欄にする．継続型は
2.1節の継続関係のタイプ，アクトは2.2節の表\ref{tbl:acts}で示したアクトを
表す．発言31，32，33のように，区切り送信によって一つのアクトが複数の発言
に分割されたと考えられる場合は，先頭の発言(例えば，発言31)にアクトを付与
する．受信時刻は発言を受信した時間，送信者は発言者名，送信内容は発言内容
を指す．

\begin{table}[tbt]
  \footnotesize
  \begin{center}
    \caption{チャット対話の対話構造を付与したコーパス}
    \label{tbl:exp4.1}
    \begin{tabular}{cccccccl}
      \hline
      \hline
      発言ID & 関係先 & 関係 & 継続型 & アクト &受信時刻 & 送信者 & \multicolumn{1}{c}{送信内容} \\
      \hline
      ...&...&...&...&...&...&...&...\\
       24&-&-&-&真偽情報要求&23:01&A&もう少し早くやるべきだったのでは\\
       25&-&-&-&真偽情報要求&23:01&B&仕事ですか？\\
       26&24&応答&-&真偽情報応答&23:01&C&すみませぬm(\_ \_)m\\
       27&25&応答&-&真偽情報応答&23:02&A&いえ\\
       28&27&継続&接続詞類型&情報伝達&23:02&A&ファンハール解任の話です\\ 
       29&-&-&-&真偽情報要求&23:02&C&インテル戦前にですか？\\
       30&29&応答&-&真偽情報応答&23:02&A&いよいよ解任されそうって話です\\
       31&-&-&-&情報伝達&23:03&B&ファンファールのサッカーを\\
       32&31&継続&助詞類型&(区切り送信)&23:03&B&出来る面子じゃありませんよ\\
       33&32&継続&倒置型&(区切り送信)&23:03&B&バルセロナは\\ 
       34&31&応答&-&あいづち&23:03&C&確かに\\
      ...&...&...&...&...&...&...&...\\
       45&-&-&-&真偽情報要求&23:15&A&Cさんいたりしない？\\
       46&-&-&-&真偽情報要求&23:16&A&Dさんとか？\\
       47&45,46&応答&-&真偽情報応答&23:16&B&さあ\\
       ...&...&...&...&...&...&...&...\\
      \hline
    \end{tabular}
  \end{center}
\end{table}

コーパスの信頼性をタグ(関係先ID及び関係名)の一致率で評価した．評価尺度と
してκ値(Kappa Statistics)を採用した．コーパスから取り出した3人対話837発
言について2人の作業者がそれぞれタグを付与し，κ値を求めた結果は
\boldmath{$0.762$}であった．この結果から，2節で論じた継続関係，応答関係
の基準によって，比較的信頼性の高い注釈付きコーパスが構築できたと言える．
得られたデータは提案手法の評価対象としても信頼に足るものであると判断した．
\section{提案手法}

\subsection{対話構造解析アルゴリズム}
入力対話に対し，対話の先頭の発言から最末の発言にかけて順番に解析す
る．提案した対話構造の階層モデルに従い，まず継続関係の同定を入力対話全
てに対して試み，発言をムーブにまとめあげる．その後，ムーブ間の応答関係
を同定し，ムーブをエクスチェンジにまとめあげる．本手法では，ムーブ間の
応答関係を同定する際には，ムーブを構成する全ての発言を素性の抽出対象と
するため，ボトムアップに対話構造を解析する手法を用いた．

\begin{figure}[tbt]
 \centerline{
    \includegraphics{fig/identify_relateness3.eps}
  }  
  \caption{継続先発言の同定手順}
  \label{fig:identify_relateness3}
\end{figure}

\subsubsection{継続関係の同定}
入力対話に対し，対話の先頭の発言から最末の発言までを走査しながら，
その位置での発言(以下，{\bf 対象発言}と呼ぶ) ごとに次のステップに従っ
て処理を進める．

\begin{description}
\item{\bf ステップ1：継続先発言候補の抽出}

継続関係にある発言が対象発言に隣接しているとは限らないため，対象発言か
ら$n$発言前までの対象発言と同一話者の発言とのペアを全て抽出する．一つ
の対象発言に対する$n$個の異なる先行発言とのペアの集合を候補ペア集合と
する．

\item{\bf ステップ2：継続先発言の決定} 

分類器は，表\ref{tbl:features}に示す素性集合を利用して，候補ペア集合に含
まれるすべてのペアに対して継続関係があるか否かを分類する．複数のペアが関
係ありと分類された場合は，分類器の出力するスコア(確信度) の一番高いペア
に一意に決定する．候補のペア全てが関係なしと分類された場合，対象発言には
継続関係にある先行発言が存在しないとする．つまり，対象発言はムーブを構成
する先頭の発言と同定される．表\ref{tbl:features}については4.3節で詳述す
る．

\end{description}
表\ref{tbl:chat}の対話を例に継続関係の同定手順を図
\ref{fig:identify_relateness3}に示す．図は対象発言が28，先行発言の参照
数$n$が4の場合を表している．まず，対象発言と同一話者による発言である24 
と27の発言とのペアを候補ペアとして抽出し，分類する．分類後，発言24と28 
及び27と28のペアと複数のペアが関係ありと分類されるが，スコアを比較した
結果，27と28 のペアが継続関係となる．

\begin{figure}[tbt]
 \centerline{
    \includegraphics{fig/identify_OTOrelateness.eps}
  }  
  \caption{応答先ムーブの同定手順}
  \label{fig:identify_OTOrelateness}
\end{figure}

\subsubsection{応答関係の同定}
入力対話に対し，対話の先頭のムー
ブから最末のムーブまでを走査しながら，その位置でのムーブ(以下，{\bf 対
象ムーブ}と呼ぶ) ごとに次のステップに従って処理が進む．

\begin{description}

\item{\bf ステップ1：応答先ムーブ候補の抽出}

応答関係にあるムーブが対象ムーブに隣接しているとは限らないため，対象ムー
ブから$n$ムーブ前までの対象ムーブと異なる話者のムーブとのペアをすべて
抽出する．一つの対象ムーブに対する$n$個の異なる先行ムーブとのペアの集
合を，候補ペア集合とする．

\item{\bf ステップ2：応答先ムーブの決定} 

分類器は，表\ref{tbl:features}に示す素性集合を利用して，候補ペア集合に
含まれるすべてのペアに対して応答関係があるか否かを分類する．複数のペア
が関係ありと分類された場合は，分類器が出力するスコア(確信度) の一番高
いペアに一意に決定する．候補のペア全てが関係なしと分類された場合，対象
ムーブには応答関係にある先行ムーブが存在しないとする．つまり，対象
ムーブがエクスチェンジを構成する先頭のムーブと同定される．

\end{description}

表\ref{tbl:chat}の対話を例に応答関係の同定手順を図
\ref{fig:identify_OTOrelateness}に示す．図は対象ムーブが34(この事例では，
発言34のみがムーブを構成する発言)，先行発言の参照数$n$が7の場合を表して
いる．対象ムーブと異なる話者によるムーブ(27，30，31の発言が各ムーブを構
成する発言の中で，先頭の発言) のペアを候補ペアとして抽出し，分類する． 
結果，31と34 の発言を含むムーブのペアが応答関係となる．

\subsection{分類器}
本手法では，素性として複数の発言の形態素情報の2つ組の組合せを全て考え
るため，素性の異なりは数万となり分類器への入力ベクトルは高次元にな
る．そこで，分類器には，素性集合の冗長性に対して比較的頑健な性質を持つ
サポートベクタマシン\cite{Vapnik1995a}を利用した．スコア(確信度) とし
ては分離平面からの距離を用いた．訓練時には，継続関係及び応答関係の同定
処理のステップ1と同じ処理を行ない獲得した各ペアから表
\ref{tbl:features}に示す素性集合を抽出し，各訓練事例とする．素性集合は
継続関係及び応答関係で異なる．


\subsection{素性}

表\ref{tbl:features}に示す素性について説明する．表中及び文中の略表記はそ
れぞれ，CRRuは対象発言．CRRmは対象ムーブ．PREuは先行発言．PREmは先行ムー
ブ． NANu\_sは対象発言と先行発言の間にある対象発言に最寄りの同一話者の発
言．NANm\_sは対象ムーブと先行ムーブの間にある対象ムーブに最寄り同一話者
のムーブ．NANm\_dは対象ムーブと先行ムーブの間にある最寄りの対象ムーブと
異なる話者のムーブ． NBNu\_sは対象発言の発言時間から1分以内に発言された
最寄りの対象発言と同一話者の発言．を表す．

\begin{description}

\item{\bf 発言に含まれる形態素情報：crr\_o，pre\_o，nan\_o，nbn\_o}

発言CRRu，NBNu\_sの先頭の一形態素情報と発言CRRu，PREu，NANu\_sの末尾の一
形態素情報をそれぞれ素性とする．形態素の異なりの数だけ素性がある．

\item{\bf 発言の末尾の表層表現：lw}

発言CRRu，PREuの末尾の表層表現が句点または読点，クエスチョンマークである
か否かの2値を素性とする．

\item{\bf 発言間の発言時刻の差：time} 

CRRuとPREu間の発言時刻の差が2 分以上離れているか否かの2値を素性とする．

\item{\bf 発言間の結束度：coh} 

本研究で言う結束度は，発言同士のムーブ単位へのまとまりやすさを表す．CRRu
とPREu間及びCRRuとNBNu\_s間の結束度を計り，どちらのペアの結束度が強いか
の2値を素性とする．強さが同じであった場合は，CRRuとPREu間の結束度が強い
とする．結束度の強さは，個々のペアの$\langle n (名詞)，rel (助詞)，v(動
詞) \rangle$の共起確率$P(\langle n，rel，v \rangle)$の大きさで計る．共起
確率の求め方の詳細については付録を参照されたい．

\item{\bf ムーブに含まれるアクト：crr\_a，pre\_a，nans\_a，nand\_a} 

素性の抽出対象となる各発言が表\ref{tbl:acts}に示したアクトを含むか否かを
表すバイナリベクタ．アクトは，あらかじめ定義した表層表現パタンとの対応を
示すテーブルを用いて推定し，20種のアクトラベルを用いて表現する．このテー
ブルは，作成したコーパスの837事例を観察し，ムーブに含まれるアクトとムー
ブの表層表現を元に作成した．このテーブルをアクト辞書と呼び，内容の一部を
表\ref{tbl:dic1}に示す．実験に用いたアクト辞書は，108個の表層表現パタン
を持つ．複数のアクトラベルが記述されているものは，行為の多義があることを
示す．

\begin{table}[tbt]
 \begin{center}
   \caption{素性と抽出対象}

\begin{tabular}{|c|l|l|l|}
\hline
     & 抽出対象 & \multicolumn{2}{|l|}{CRRu，PREu，NANu\_s，NBNu\_s                                                                                        }\\
\cline{2-2}\cline{3-3}\cline{4-4}継続 & 素性         & 単体        & 
発言CRRuの先頭と末尾の形態素情報：crr\_o\\
&&&発言PREuの末尾の形態素情報：pre\_o\\
&&&発言NANu\_sの先頭と末尾の形態素情報：nan\_o\\
&&&発言NBNu\_sの先頭の形態素情報：nbn\_o\\
&&&発言CRRu，PREuの末尾の表層表現：lw\\
\cline{3-4}
     &          & 二項間          & 
発言間の結束度：coh\\
&&&CRRu，PREu間の発言時刻の差：time\\
\hline
     & 抽出対象 & \multicolumn{2}{|l|}{CRRm，PREm，NANm\_s，NANm\_d                                                                                        }\\
\cline{2-2}\cline{3-3}\cline{4-4}応答 & 素性         & 単体        & 
ムーブCRRmに含まれるアクト：crr\_a\\
&&&ムーブPREmに含まれるアクト：pre\_a\\
&&&ムーブNANm\_sに含まれるアクト：nans\_a\\
&&&ムーブNANm\_dに含まれるアクト：nand\_a\\
&&&ムーブCRRm，PREmの末尾の表層表現：lw\\
\cline{3-4}
     &          & 二項間          & 
CRRm，PREm間の名詞または動詞，形容詞いずれかの一致：match\\
&&&CRRm，PREm間の発言時刻の差：time\\
\hline

\end{tabular}
\label{tbl:features}
\end{center}
\end{table}

\begin{table}[tbt]
\small
  \begin{center}
    \caption{アクト辞書}
    \label{tbl:dic1}
    \begin{tabular}{l|l}
      \hline
      表層表現パタン & \multicolumn{1}{c}{アクトラベル} \\
      \hline
      はい & [肯定・許諾] [あいづち] \\
      ほう & [あいづち] \\
      できるの	& [真偽情報要求] \\
      だよね & [確認]\\
      したい & [希望]\\
      ...&...\\
      \hline
    \end{tabular}
  \end{center}
\end{table}

\item{\bf ムーブの末尾の表層表現：lw} 

ムーブCRRm，PREmを構成する発言の中で一番最後の発言の末尾の表層表現がクエ
スチョンマークであるか否かの2値を素性とする．

\item{\bf ムーブ間の名詞または動詞，形容詞いずれかの一致：match} 

ムーブCRRm，PREmに含まれる名詞，動詞または形容詞のいずれかが一致するか否
かの2 値を素性とする．

\item{\bf ムーブ間の発言時刻の差：time} 

ムーブCRRm，PREmを構成する先頭の発言の発言時刻の差が5分以上離れているか
否かの2値を素性とする．

\end{description}
\section{評価実験}
\subsection{実験環境}
実験には，本研究で作成したチャット対話コーパス(2節で述べた対話構造モデ
ル及び指針作成，アクト辞書作成で分析対象とした837事例を除いた計11028事
例)を用いた．事前にすべての発言に対して茶筌\cite{Matsumoto:02} を利用
し形態素解析を行なった． 結果の妥当性・再現性を高めるために5分割交差検
定を行なった．素性の組合せも同定規則として採り入れるため，分類器(サポー
トベクタマシン)のカーネル関数として2 次の多項式カーネルを用いた．

参照する先行発言数は解析時及び訓練時共に，継続関係で7，応答関係で8発言
とした．これはコーパスにある発言から最も遠い関係先までの発言数であ
る．解析時に対象発言からいくつ先の発言までとのペアを考えるかという参照
先数のパラメタ最適化の問題があるが，今回は扱わなかった．

\subsection{調査項目}

本手法及びベースラインの手法による対話構造の解析精度について調査した．
2.1節及び2.2節で詳述した継続型や，ムーブに含まれるアクトまでは同定しない．
この分類は，3節で詳述したコーパス作成の指針，4.3節で詳述したアクト辞書の
作成時，および実験結果の分析作業で利用した．

ベースラインの手法では，入力対話の先頭から最末の発言までを走査しながら，
(ステップ1) 対象発言と対象発言に最寄りの同一話者による先行発言が継続関係
にあるとみなし，(ステップ2)正しい継続関係先を与えた状態で，対象ムーブと
それに最寄りの異なる話者の先行ムーブが応答関係にあるとみなし，対話構造を
解析する．

継続関係と応答関係の同定実験の結果は，精度及び再現率，F値で評価した．対
話構造全体の解析結果は一致率で評価した．関係先が複数ある発言では，いずれ
かひとつと一致した場合を正解とした．

\vspace{-0.4cm}

\begin{eqnarray*}
精度 &= &\frac{\mbox{\small 解析器が関係同定に成功した事例数}}
{\mbox{\small 解析器が関係を持つと判断した事例数}}
\end{eqnarray*}
\vspace{-0.9cm}

\begin{eqnarray*}
再現率 &= &\frac{\mbox{\small 解析器が関係同定に成功した事例数}}
{\mbox{\small 実際に関係を持つ事例数}}
\end{eqnarray*}
\vspace{-0.9cm}

\begin{eqnarray*}
一致率 &= &\frac{\mbox{\small 解析器が特定した関係先がコーパスの正解タグと一致した発言の総数}}
{\mbox{\small コーパス中の発言の総数}}
\end{eqnarray*}

\subsection{実験結果}
本手法とベースラインの手法による対話構造の解析結果を比較することにより，
本手法の有効性を評価した．

対話構造全体の解析結果を表\ref{tbl:tree5.1}に示す．BL2p及びBL3pは2人対
話及び3人対話データにベースラインの手法を適用した結果，提案2p及び提案
3pは2人対話及び3人対話データに本手法を適用した結果である．一致率は，2
人対話及び3人対話それぞれにおいて，本手法がベースラインの手法を上回っ
ている．

継続関係及び応答関係の同定結果を表\ref{tbl:result2}に示す．継続関係にあ
る発言の多くは隣接しているため，BL2p，BL3pの再現率は高い．しかし，互いに
隣接する発言でも実際には継続関係を持たない場合もあるため，精度は低い．こ
れに対し本手法では，継続関係を持たない発言間の関係も同定しているため，精
度も高くなっている．応答関係の同定における再現率は，継続関係のものと比べ
て低い．5.4節で詳述するように，特に情報伝達や真偽情報要求，未知情報要求
アクトを含むムーブとの応答関係同定の失敗が再現率を大きく下げる原因となっ
ている．しかしながら，精度については， BL2p，BL3pに比べ本手法が大きく上回
った．アクト辞書を用いてムーブに含まれるアクトを推定することで，適切な応
答関係を同定できたと言える．アクト辞書によるアクト推定を行なわなかった場
合の精度，再現率，F 値はそれぞれ2人対話で0.633，0.169，0.266，3 人対話で
0.690，0.117，0.200であった．

ここで，2人対話と3人対話それぞれの同定精度がほぼ同程度であったことは興味
深い．この理由としては，3 人対話において2人の情報交換が支配的であったこ
とが関係していると考えられる．このような現象は音声対話においても報告され
ている\cite{Ishizaki:99}．

以上の結果から，本タスクは単純な方法で解けるほど簡単な問題ではないが，
アルゴリズムを工夫すれば自動化の実現性が十分にある問題であることが分か
る．こうした問題に取り組みその実現可能性を実証した例は我々の知る限り過
去にない．

\subsection{結果に対する考察}

\subsubsection{継続関係の同定性能}

\begin{table}[tbt]
\small
  \begin{center}
    \caption{対話構造の一致率}
    \label{tbl:tree5.1}
    \begin{tabular}{|l|c|c||c|c|}
      \hline
       & BL2p & 提案2p & BL3p & 提案3p \\
      \hline
      一致率 & .334 & \boldmath{$.874$} & .265 & \boldmath{$.846$}\\
      \hline
    \end{tabular}
  \end{center}
\end{table}

\begin{table*}[tbt]
\small
  \begin{center}
    \caption{継続関係及び応答関係の同定結果}
    \label{tbl:result2}
  \begin{tabular}{cc}
    継続関係の同定結果 &
    応答関係の同定結果 \\
    \begin{tabular}{|l|c|c||c|c|}
      \hline
       & BL2p & 提案2p & BL3p & 提案3p \\
      \hline
      精度 & .381 & \boldmath{$.914$} & .348 & \boldmath{$.927$}\\
      再現率 & \boldmath{$.985$} & .909 & \boldmath{$.986$} & .881\\
      F値 & .549 & \boldmath{$.912$} & .515 & \boldmath{$.903$}\\
      \hline
    \end{tabular} &
    \begin{tabular}{|l|c|c||c|c|}
      \hline
       & BL2p & 提案2p & BL3p & 提案3p \\
      \hline
      精度 & .098 & \boldmath{$.743$} & .131 & \boldmath{$.743$}\\
      再現率 & \boldmath{$.613$} & .418 & \boldmath{$.682$} & .361\\
      F値 & .169 & \boldmath{$.535$} & .220 & \boldmath{$.486$}\\
      \hline
     \end{tabular}\\
  \end{tabular}
  \end{center}
\end{table*}

継続関係の同定における継続型毎の再現率を表\ref{tbl:cont_2_inve5.2}に示
す．今回の実験では，継続型までは同定していないため，精度，及びF 値を求
めることはできなかった．表\ref{tbl:cont_2_inve5.2}に示すとおり，特殊表
記型と倒置型，挿入型の再現率が他の型に比べて低い．このうち，倒置型と挿
入型の誤りは頻度も少なくなく，無視できない．

\begin{description}

\item{\boldmath $倒置型：$} 

187件のうち，約3割を再現できなかった．このうち12件は，事例(9)のように，
$\langle n，rel，v \rangle$の3つ組(4.3節「発言間の結束度」の項を参照)だけ
では発言間の結束度を判断しにくい場合であった．このため，発言bと発言cが継
続関係にあるという間違った判断をした事例も多く観察された． これは，共起
確率モデルに取り入れる事例を拡張することで改善できると考えられる． 
$\langle n，rel，v \rangle$の3つ組だけではなく，$\langle ポジションチェン
ジ，オーバーラップ \rangle$といった $\langle n (名詞)，n (名詞) \rangle$
等の共起確率も考慮する．また，助詞「は」の二重使用はペナルティを与えると
いった文法上の制約を取り入れることも考えられる．

\eenumsentence{\item[a)] Aさん：ポジションチェンジなんですよね 
\item[b)] Aさん：\underline{向こうのオーバーラップは}［関係先：(a)，関係名：継続（倒置型）］ 
\item[c)] Aさん：攻めきれない時はどうするんだろ
 }

\item{\boldmath $挿入型：$} 

87件のうち，約3割を再現できなかった．このうち11件は，事例(10)のように，
表層表現からは判断しにくい場合であった．文末表現(例えば，「〜ですか？」
や「〜か」)をもつ発言間には継続関係がない場合が本コーパス中には多い．こ
のため，訓練事例中に正例と負例が混在し，関係同定に教師あり学習器を利用し
た本手法ではうまく扱えなかった．このような事例を扱える素性を考える必要が
ある．

  \eenumsentence{
  \item[a)] Aさん：受けた仕事はどうするん\underline{ですか？}  
  \item[b)] Aさん：まだ受けてなかった\underline{か}［関係先：(a)，関係名：継続（挿入型）］ 
  }
  
  また，事例(11)のような，誤字の修正を意図した発言との同定を誤る場合も
  少なくなかった．このような事例では，発言a，b間における文節(例えば，
  「服にしですが」と「福西ですが」)を同定し，文字列間の類似度を利用す
  ることが考えられる．
  
  \eenumsentence{
  \item[a)] Aさん：個人的には\underline{服にしですが}
  \item[b)] Aさん：\underline{福西ですが}［関係先：(a)，関係名：継続（挿入型）］ 
  }
\end{description}

\begin{table}[tbt]
\small
  \begin{center}
    \caption{継続型毎の継続関係の再現率}
    \label{tbl:cont_2_inve5.2}
    \begin{tabular}{|l|c|r||c|r|}
      \hline
      \multicolumn{1}{|c|}{継続型} & 提案2p & 発言数& 提案3p & 発言数\\
      \hline
      助詞類型 &.948& 1021&.921&937\\
      接続詞類型  &.851& 215&.822&191\\
      特殊表記型  &.833& 6&.857&7\\
      名詞型  &.903& 62&.791&86\\
      倒置型  &.735& 102&.698&86\\
      挿入型  &.755& 49&.789&38\\
     \hline
   \end{tabular}
  \end{center}
\end{table}

\subsubsection{応答関係の同定性能}

応答関係については，再現率，精度とも継続関係に比べて劣っている．これにつ
いては，まずタスク自身の難しさが理由の一つとして考えられる．3.2節で述べ
たように，本研究ではコーパスに付与したタグの信頼性を2人の作業者の一致率
で評価したが，もう少し詳しく見ると，継続関係のκ値0.825に対し，応答関係
のκ値は0.634であり，継続関係と比べると応答関係の同定は人間にとっても難
しい作業であることがわかる．

つぎに，ムーブに含まれるアクト毎の応答関係の再現率を表\ref{tbl:res5.2.1}，
表\ref{tbl:res5.2.2}に示す．横軸はデータセットを表し，縦軸はムーブに含ま
れるアクト毎の応答関係を表す．縦軸で，ブラケットで囲まれた2つの部分のう
ち，左の部分は，先行ムーブに含まれるアクトであり，右は後続ムーブに含まれ
るアクトである．表\ref{tbl:res5.2.1}のブラケットの中の”$all$”は，表
\ref{tbl:acts}で示した全てのアクトを意味する．表\ref{tbl:res5.2.2}は，表
\ref{tbl:res5.2.1}のうち事例の多かった情報伝達および真偽情報要求，未知情
報要求アクトを先行ムーブに含む場合の再現率をさらに詳しく分析したものであ
る．ムーブに複数のアクトが含まれる場合は，ムーブを構成する先頭の発言のア
クトのみをカウントした．

表\ref{tbl:res5.2.1}，表\ref{tbl:res5.2.2}に示すとおり，全体的な再現率は
高くはない．このうち，情報伝達と真偽情報要求，未知情報要求アクトを先行ム
ーブに含む応答関係は頻度も少なくなく，無視できない．

\begin{table}[tbt]
\small
  \begin{center}
    \caption{アクト毎の応答関係の再現率}
    \label{tbl:res5.2.1}
    \begin{tabular}{|l|c|r||c|r|}
      \hline
       \multicolumn{1}{|c|}{アクト} & 提案2p & 関係数 & 提案3p & 関係数\\
      \hline
	  $[勧誘][all]$&.500&2		&-&0 \\
	  $[依頼][all]$&.167&6		&.000&1 \\
	  $[確認][all]$&.333&24		&.360&25 \\
	  $[示唆][all]$&.200&5		&.000&4 \\
	  $[提案][all]$&.000&1		&1&1 \\
	  $[情報伝達][all]$&.432&185	&.330&270 \\
	  $[肯定・受諾][all]$&.100&10	&.000&8 \\
	  $[否定・拒否][all]$&.143&7	&.231&13 \\
	  $[不明な応答][all]$&.500&5	&.333&12 \\
	  $[真偽情報要求][all]$&.544&79	&.547&75 \\
	  $[未知情報応答][all]$&.500&6	&.333&12 \\
	  $[未知情報要求][all]$&.460&50	&.442&52 \\
	  $[約束・申し出][all]$&.000&1	&.000&1 \\
	  $[その他の言明][all]$&.000&3	&-&0 \\
	  $[その他の働き掛け][all]$&.000&3	&.500&10 \\
      \hline
    \end{tabular}
  \end{center}
\end{table}

\begin{table}[tbt]
\small
  \begin{center}
    \caption{アクト毎の応答関係の再現率(一部)}
    \label{tbl:res5.2.2}
    \begin{tabular}{|l|c|r||c|r|}
      \hline
       \multicolumn{1}{|c|}{アクト} & 提案2p & 関係数 & 提案3p & 関係数\\
      \hline
      $[情報伝達][あいづち]$		&.491&114	&.345&168\\
      $[情報伝達][肯定・受諾]$		&.667&36	&.267&60\\
      $[情報伝達][否定・拒否]$		&.167&12	&.179&28\\
      $[情報伝達][不明な応答]$		&.900&20	&.714&14\\
      $[真偽情報要求][あいづち]$	&.000&1	&-&0\\
      $[真偽情報要求][肯定・受諾]$	&.667&33	&.500&36\\
      $[真偽情報要求][否定・拒否]$	&.385&26	&.583&24\\
      $[真偽情報要求][不明な応答]$	&.500&19	&.583&12\\
      $[未知情報要求][あいづち]$	&-&0	&.000&1\\
      $[未知情報要求][不明な応答]$	&.667&3	&.600&5\\
      $[未知情報要求][未知情報応答]$	&.447&47	&.444&45\\
      \hline
    \end{tabular}
  \end{center}
\end{table}

\begin{description}

\item{\boldmath $情報伝達：$} 

情報伝達アクトを先行ムーブに含む応答関係455件のうち，約6割を再現できなか
った．事例の多くは，例(12)のような後続ムーブを構成する発言のアクトがあい
づちであるムーブとの応答関係であった．実験では，4.3節で述べたようにアク
ト辞書を人手で作成しているため，例(12)のような表記のゆれには対応仕切れな
い．文字列毎の一致から類似度を計り，表記の揺れを吸収するといった拡張が必
要である．

\eenumsentence{
\item[a)] Aさん：狭いスペースでやらないと駄目なんすよ[情報伝達]
\item[b)] Bさん：なるほろ[関係先：(a)，関係名：応答（あいづち）]
}

\item{\boldmath $真偽情報要求：$} 

真偽情報要求アクトを先行ムーブに含む応答関係154件のうち，約5割を再現でき
なかった．多くは，肯定・承諾や否定・拒否を明示する表現(「はい」や「いい
え」など)が使われていないムーブであり，アクト辞書だけではアクトを推定で
きない事例であった．このため，再現率が低くなったと考える．

例(13)のように，否定・拒否を意図する表現が明示的されていない場合がある．
発言者Aの「オフシーズンはあるのか？」という真偽情報要求に対して，発言者B
は「正月もイベントです」と答えている．このムーブは，「多くの人が休むであ
ろう正月にもイベントをやるのだから，オフシーズンはない」という否定・拒否
を暗示している．

\eenumsentence{
  \item[a)] Aさん：オフシーズンってのがあるんですか？[真偽情報要求]
  \item[b)] Bさん：正月もイベント参加です[関係先：(a)，関係名：応答（否定・拒否）]
}

こうした事例に対応するには，常識的知識と複雑な推論が必要であると考えら
れる．表層的な手がかりを使った統計的学習によるアプローチの限界を示すも
のと言えるかもしれない．

\item{\boldmath $未知情報要求：$} 

未知情報要求アクトを先行ムーブに含む応答関係102件のうち，約5割を再現でき
なかった．しかし我々は，再現率の低さはもっと深刻になると予想していた．本
手法では，アクト辞書を用いて各ムーブに含まれるアクトを推定し素性とするこ
とは可能であるが，未知情報応答発言におけるいわゆる5W1Hを推定することはで
きない．にも関わらず，このような再現率及び精度が得られたことは興味深い．
本手法では，例(14)の発言(ムーブ)(b)，(d)間のような未知情報要求アクトを含
むムーブと未知情報応答アクトを含むムーブ間の応答関係を同定するための特別
な処理は行なっていない(「誰が来たの？」という発言が人の情報を要求してい
ることを推定していない)．応答関係にあるムーブ同士の近接性や，ムーブ間の
動詞が一致していることが同定に役立ったと考えられる．

\eenumsentence{
  \item[a)] Aさん：\underline{うちの大学は}
  \item[b)] Bさん：\underline{K大から誰が来たの？}[未知情報要求]
  \item[c)] Aさん：\underline{大丈夫らしいです}[関係先：(a)，関係名：継続（助詞型）]
  \item[d)] Aさん：\underline{凄く優秀な助手が来ました}[関係先：(b)，関係名：応答（未知情報応答）]
}

\end{description}

\subsection{各素性の有効性について}

4.3節で詳述した素性全てを使用して作成した解析器を用いた同定結果と1つの素
性を省いた残りの素性を用いた同定結果とを比較し，省いた素性が関係同定にど
の程度有効かを考察する．

表\ref{tbl:featureAnalysys_cont}は， 解析器作成で使用した素性の組み合わせ
毎の継続関係の同定精度， 再現率， F値を表している． 素性を削除して精度等が
下がる場合は，削除した素性は関係同定に有効であると考えられる．表中の略表
記の意味は4.3節及び表\ref{tbl:features}を参照されたい．precは精度． recは
再現率． fはF値を表す．なお，全ての素性の組み合わせc0は，本手法で使用した
素性の組み合わせである．

\begin{table}[tbt]
  \footnotesize
  \begin{center}
    \caption{素性の組み合わせと継続関係の同定性能}
    \label{tbl:featureAnalysys_cont}
    \begin{tabular}{|c|ccccccc|rrr|rrr|}
      \hline
      \multicolumn{1}{|c|}{}&\multicolumn{7}{|c|}{素性の組み合わせ} & \multicolumn{3}{|c|}{2人対話}& \multicolumn{3}{|c|}{3人対話}\\
      \hline
      & crr\_o & pre\_o & nan\_o & nbn\_o & lw & coh & time & \multicolumn{1}{c}{prec} & \multicolumn{1}{c}{rec} & \multicolumn{1}{c|}{f} & \multicolumn{1}{c}{prec} & \multicolumn{1}{c}{rec} & \multicolumn{1}{c|}{f}\\
      \hline
      c0&○&○&○&○&○&○&○&\boldmath{$.914$}&\boldmath{$.909$}&\boldmath{$.912$}&.926&\boldmath{$.882$}&\boldmath{$.903$}\\
      c1&×&○&○&○&○&○&○&.845&.759&.800&.876&.729&.796\\
      c2&○&×&○&○&○&○&○&.779&.839&.808&.817&.758&.786\\
      c3&○&○&×&○&○&○&○&.911&.905&.908&.924&.878&.900\\
      c4&○&○&○&×&○&○&○&.895&.874&.884&.905&.828&.864\\
      c5&○&○&○&○&×&○&○&.907&.902&.904&\boldmath{$.928$}&.869&.898\\
      c6&○&○&○&○&○&×&○&.912&\boldmath{$.909$}&.911&.925&.880&.902\\
      c7&○&○&○&○&○&○&×&.908&.903&.905&.918&.867&.892\\
      \hline
    \end{tabular}
  \end{center}
\end{table}

\begin{table}[tbt]
\small
  \begin{center}
    \caption{素性の組み合わせと継続型毎の再現率(2人対話)}
    \label{tbl:cont-featureByType-2}
    \begin{tabular}{|l|cccccccc|}
      \hline
      \multicolumn{1}{|c|}{継続型}& c0 & c1 & c2 & c3 & c4 & c5 & c6 & c7 \\
      \hline
      助詞類型 &.948&.860&.868&.946&.921&.948&.950&.949\\
      接続詞類型  &.851&.716&.786&.847&.833&.833&.851&.847\\
      特殊表記型  &.833&.167&.667&.667&.667&.667&.833&.667\\
      名詞型  &.903&.565&.758&.903&.823&.871&.903&.823\\
      倒置型  &.735&.206&.794&.725&.608&.725&.725&.696\\
      挿入節型  &.755&.306&.714&.735&.735&.755&.755&.755\\
     \hline
   \end{tabular}
  \end{center}
\end{table}

表\ref{tbl:featureAnalysys_cont}から，全ての素性を用いた組み合わせc0を用
いた場合のF値が2人対話，3人対話共に一番高いことがわかる．また，ほぼ素性
crr\_o，pre\_o，nbn\_oの順に関係同定に寄与していることがわかる．表
\ref{tbl:cont-featureByType-2}からは，各素性がどの種類の関係同定に寄与し
ているかを見ることができる．なお，3人対話の結果は，2人対話と傾向が似てい
たため割愛する．crr\_oは，特殊表記型，倒置型および挿入節型で特に効果があ
る．2.1節の事例からもわかるように，対象発言の先頭と末尾の形態素情報とい
った統語的手がかりが関係同定に有用であったと考えられる．pre\_oは助詞類型，
接続詞類型で特に効果がある．2.1節の事例からもわかるように，先行発言の末
尾の形態素情報といった統語的手がかりが関係同定に有用であったと考えられる．
しかし一方で，倒置型の同定には悪影響を及ぼしている．例(15)，(16)のように，
先行発言の末尾の形態素情報が同じ発言でも継続関係を持つ場合と持たない場合
が本コーパス中には多い．このため，訓練事例中に正例と負例が混在し，関係同
定に教師あり学習器を利用した本手法ではうまく扱えず，再現率を下げたと考え
られる．

  \eenumsentence{
  \item[a)] Aさん：出来る面子じゃありませんよ
  \item[b)] Aさん：バルセロナ\underline{は}[関係先：(a)，関係名：継続（倒置型）]
  }

  \eenumsentence{
  \item[a)] Aさん：そうは思いません
  \item[b)] Aさん：ベッカム\underline{は}
  \item[c)] Aさん：移籍しますよ[関係先：(b)，関係名：継続（助詞型）]
  }

nbn\_oは倒置型の同定に効果がある．例(17)のようにNBNu\_sの先頭の形態素が
ムーブの先頭を表す接続詞類と考えられるものであった場合，対象発言と先行発
言が継続関係にあるという判断に効果があったと考えられる．

  \eenumsentence{
  \item[a)] Aさん：ポジションチェンジなんですよね
  \item[b)] Aさん：向こうのオーバーラップは[関係先：(a)，関係名：継続（倒置型）]
  \item[c)] Aさん：\underline{ところで}、
  }

次に，応答関係の場合について述べる．表\ref{tbl:featureAnalysys_res}は， 
解析器作成で使用した素性の組み合わせ毎の応答関係の同定精度，再現率，F値
を表している． 表中の略表記の意味は4.3節及び表\ref{tbl:features}を参照さ
れたい．なお，全ての素性の組み合わせr0は，本手法で使用した素性の組み合わ
せである．

\begin{table}[tbt]
  \footnotesize
  \begin{center}
    \caption{素性の組み合わせと応答関係の同定性能}
    \label{tbl:featureAnalysys_res}
    \begin{tabular}{|c|ccccccc|rrr|rrr|}
      \hline
      \multicolumn{1}{|c|}{}&\multicolumn{7}{|c|}{素性の組み合わせ} & \multicolumn{3}{|c|}{2人対話}& \multicolumn{3}{|c|}{3人対話}\\
      \hline
      &crr\_a&pre\_a&nans\_a&nand\_a& lw & match & time & \multicolumn{1}{c}{prec} & \multicolumn{1}{c}{rec} & \multicolumn{1}{c|}{f} & \multicolumn{1}{c}{prec} & \multicolumn{1}{c}{rec} & \multicolumn{1}{c|}{f}\\
      \hline
      r0&○&○&○&○&○&○&○&.743&.418&.535	&.743&\boldmath{$.361$}&\boldmath{$.486$}\\
      r1&×&○&○&○&○&○&○&.672&.191&.297	&.705&.159&.260\\
      r2&○&×&○&○&○&○&○&.729&.389&.507	&.707&.327&.447\\
      r3&○&○&×&○&○&○&○&.727&.411&.525	&.741&.357&.482\\
      r4&○&○&○&×&○&○&○&.738&.421&.536	&\boldmath{$.764$}&.353&.483\\
      r5&○&○&○&○&×&○&○&\boldmath{$.816$}&.281&.418	&.746&.254&.379\\
      r6&○&○&○&○&○&×&○&.746&.423&\boldmath{$.540$}	&.712&.349&.468\\
      r7&○&○&○&○&○&○&×&.724&\boldmath{$.430$}&\boldmath{$.540$}	&.750&.357&.484\\
      \hline
    \end{tabular}
  \end{center}
    
\end{table}

\begin{table}[tbt]
\small
  \begin{center}
    \caption{アクト毎の応答関係の再現率 2人対話}
    \label{tbl:res-featureByType-2}
    \begin{tabular}{|l|cccccccc|}
      \hline
       \multicolumn{1}{|c|}{アクト} & r0 & r1 & r2 & r3 & r4 & r5 & r6 & r7 \\
      \hline
	  $[勧誘][all]$			&.500&.500&.000&.000&.500&.500&.000&.500 \\
	  $[依頼][all]$			&.167&.167&.000&.167&.167&.167&.000&.167 \\
	  $[確認][all]$			&.333&.125&.167&.333&.333&.167&.292&.333 \\
	  $[示唆][all]$			&.200&.000&.200&.200&.200&.200&.200&.200 \\
	  $[提案][all]$			&.000&.000&.000&.000&.000&.000&.000&.000 \\
	  $[情報伝達][all]$		&.432&.027&.405&.405&.422&.427&.438&.432 \\
	  $[肯定・受諾][all]$		&.100&.100&.100&.100&.100&.000&.100&.100 \\
	  $[否定・拒否][all]$		&.143&.000&.143&.143&.143&.143&.143&.143 \\
	  $[不明な応答][all]$		&.500&.000&.500&.500&.500&.500&.500&.500 \\
	  $[真偽情報要求][all]$		&.544&.494&.519&.557&.570&.165&.582&.570 \\
	  $[未知情報応答][all]$		&.500&.167&.500&.500&.500&.333&.500&.500 \\
	  $[未知情報要求][all]$		&.460&.500&.500&.500&.500&.060&.500&.500 \\
	  $[約束・申し出][all]$		&.000&.000&.000&.000&.000&.000&.000&.000 \\
	  $[その他の言明][all]$		&.000&.333&.000&.333&.333&.333&.000&.333 \\
	  $[その他の働き掛け][all]$	&.000&.000&.000&.000&.000&.000&.000&.000 \\
      \hline
    \end{tabular}
  \end{center}
\end{table}

表\ref{tbl:featureAnalysys_res}から，全ての素性を用いた組み合わせr0を用
いた場合のF値が3人対話で一番高いが，2人対話では，r6およびr7の素性の組み
合わせを用いたF値がr0よりも若干高く，一番高い．また，素性crr\_aおよび素
性lwが他の素性に比べて大きく関係同定に寄与していることがわかる．表
\ref{tbl:res-featureByType-2}からは，各素性がどの種類の応答関係同定に寄
与しているかを見ることができる．なお，3人対話の結果は，2人対話と傾向が似
ていたため割愛する．crr\_aは，確認アクトおよび情報伝達アクトを含むムーブ
との関係同定で特に効果がある．これは，対象ムーブのアクトを推定することで
表\ref{tbl:crp}で示した制約が利用できたためと考えられる．lwは真偽情報要
求アクトおよび未知情報要求アクトを含むムーブとの関係同定で特に効果がある．
これらのアクトを含むムーブの多くは末尾にクエスチョンマークを持つため，末
尾の表層表現がクエスチョンマークであるか否かという情報が関係同定に有用で
あったと考えられる．
\section{関連研究}

\subsection{チャット対話を対象とした対話構造解析研究との関係}
Khanらは，チャット対話から話題や参加者の興味等を抽出することを目的とし
て，本論文で言う応答関係の同定を試みた\cite{Khan:02}．具体的には，質問
とそれに対する応答のまとまりからなるスレッドという単位を定義し，スレッ
ドの始まりの発言を同定する実験を行なった．スレッドの始まりとそうではな
い発言の特徴を分析し，人手でルールを作成した．ルールは表層表現と発言内
の単語数の組合せである．実験対象は，チャットアプリケーションAOL
Instant Messenger(AIM)\footnote{http://www.jp.aol.com/aim/}を利用して
収集した約1500発言で，対話の参加人数の異なりは12名である．

小倉らは，本論文で言う応答関係の同定を目的とし，チャット対話特
有の表現等を手がかりとした同定実験を行なった\cite{Ogura:03}．具体的に
は，引用記号を使用した次話者の指定表現「＞Aさん」や，関連する発言を明
示する表現「ほんとに？＞りんごと蜂蜜」等の表層表現だけで判断できる5 種
類の同定要素を組合せたルールを用いて，関係同定のためのにどのような表
層表現が有効かを調査した．実験対象は，独自に作成したチャット対話データ
であり，参加者の異なりは16名，2人対話と3人対話合わせて870発言である．

これらの先行研究は，本論文では応答関係と定義した関係の同定に必要な手が
かりに焦点を当てたものであり，対話構造の解析及び継続関係の同定には踏み
込んでいない．ルールベースの関係同定手法は，チャット特有の言語表現が発
言中に存在するもののみを主な対象としたものであり，定量的な性能比較は難
しい．しかし，我々のアプローチには，こうした既知の知見を素性としてモデ
ルに組み込める柔軟性を持っているという利点がある．実際，小倉らの知見は，
4.3節で述べたムーブの末尾の表層表現などの素性としてモデルに反映させて
ある．

小林は，多人数が参加するチャット会議のログからの議事録自動生成を目的と
し，本論文で言う継続関係及び応答関係の同定を試みた
\cite{Kobayashi:03}．発話文という単位を処理の基本単位とし，それらの間
の関係を同定した．具体的には，基点となる発話文の前後の発話文を探索し関
係先候補を複数抽出する．その後，発話文内の表層情報と品詞情報を手がかり
として関係先を決定する．発話文を可能な限りつなげていくことで，ある話題
に対する継続した対話部分を抽出する．関係先の決定には，関係先の候補発話
文にヒューリスティックを用いてポイントを与える． ポイントの計算は指定
した表層表現や品詞の有無で加算される．実験対象は，会議の進行役のいる
チャット会議ログであり，関係先を同定するためのヒューリスティクスもこの
対話スタイルに特化したものになっている．

彼らは，ある発話文と二項関係にある発話文を特定する際に，その2 つの発話
文の素性のみを利用している．本手法では，発言間の二項関係同定のために，
関係を同定したい発言とそのまわりの発言の素性も利用した．継続関係につい
て触れられているが，その同定方法については説明されていない．このため，
本論文の解析手法と比較することはできなかった． 

\subsection{音声対話を対象とした対話構造解析研究との関係}
質問とそれに対する応答のような対話構造をある種の文法規則によって捉えよ
うとする考えとして談話分析がある．

Groszらは，談話中の発話の処理を記述するための枠組となる理論を提示して
いる\cite{Grosz:86}．この理論では，談話の構造は，相互に関係する3種の要
素，言語構造(linguistic structure)，意図構造(intentional structure)，
注視状況(attentional structure)から構成される．この理論に基づく談話単
位は，一貫したゴールを持つ部分を1つの単位としている．しかし，本研究で
求めようとしている対話構造の単位は，質問と応答のようなまとまりからなる
単位であり，より小さな単位となる．

Sinclairらは，より局所的な視点から対話構造の階層モデル提案している
\cite{Sinclair:92}．これは，Hallidayのランク尺度の考え方
\cite{Halliday:61}に基づいている．彼らは，談話に対して相互作用，交渉，
エクスチェンジ，ムーブ，アクトの5つのランクからなるランク尺度を定義し，
それに基づいた対話構造のモデルを提案している．

本研究で対象としたチャット対話は，質問とそれに対する応答のような意味的
につながりを持つ発言が必ずしも隣接しない．また，質問とそれに対する応答
を構成する発言自体も区切り送信される場合があり，対話構造を構成する基本
単位が異なる．このような特徴ため，既存の対話構造モデルをそのままチャッ
ト対話に適用することはできない．我々は，対話構造の基本単位をチャット対
話の基本単位に変更し，意味的につながりを持つ発言が隣接しない現象を表現
できるよう，交差を許すモデルに拡張した．

厳寺らは，Sinclairらのモデル\cite{Sinclair:92}を参考にして対話構造の形
成を試みた\cite{Iwadera:98}．彼らは，2人対話を対象とし，発言がなされる
毎に漸次的に対話構造を認識する手法を提案している．具体的には，文末表現
等から構成される表層表現パタンと対話特有の現象である話者交替に関する情
報を用い，現在処理している発言のアクトを同定する．アクト情報を基に，直
前の発言との関係を同定し，ムーブ，エクスチェンジまで発言をまとめあげて
対話構造を構築する．彼らは，音声対話の書き起こしテキストを実験対象とし，
対話構造の同定の際に現在処理している発言とその直前の発言との関係だけを
利用した．

高梨らは，独話を対象に話し言葉の処理の基本単位を節と定義し，節の同定を試
みた\cite{Takanashi:03}．節の同定には，発言に含まれる形態素といった局所
的な情報を利用している．局所的な情報だけでは節の同定が難しい倒置のような
表現は同定対象としていない．

本研究では，意味的につながりを持つ発言が必ずしも隣接しないという特徴を
持つチャット対話を対象としている． このため，現在処理している発言の直
前の発言だけでなく，それよりも前の発言との関連も調べる解析手法を提案し
た．また，倒置等の局所的な情報だけでは判断できない関係の同定も対象とし
た．
\section{おわりに}
本研究では，チャット対話を対象として対話構造解析を行なった．本研究の成
果は以下の通りである．

\paragraph{既存の対話構造モデルの拡張とコーパス構築における指針の提案：}

　

対話構造解析アルゴリズムの適用を可能とするため，Sinclairらの対話構造モ
デル\cite{Sinclair:92}をチャット対話に適用できるよう拡張したモデルを提
示した．このモデルは，継続関係と応答関係という発言間の二項関係から成る．

さらに，どのような発言(アクト)同士が継続関係をなしてムーブを構成するか，
あるいはどのようなムーブ 同士が応答関係をなしてエクスチェンジを構成する
かを新しく規定し，分析作業及び教師あり機械学習に利用できる大規模なコーパ
ス作成のための指針を提案した．この指針に基づく対話構造を付与したコーパス
を作成し，2 人の作業者同士のタグ付けの一致度を調査したところ，κ値0.762
という結果が得られた．この結果から，提案したタグ付けの指針が人間の判断の
ゆれに比較的強い基準になっていることが経験的に確かめられた．

\paragraph{チャット対話の対話構造解析：} 

　

対話構造全体の一致率は2人対話87.4\%，3人対話84.6\%であり，ベースラインの
手法を上回っている．この結果は，発言間の二項関係を同定する計算モデルが，
少なくとも教師データがあれば，教師あり機械学習によって構築可能であること
を経験的に示した． 本タスクは単純な方法で解けるほど簡単な問題ではないが，
アルゴリズムを工夫すれば自動化の実現性が十分にある問題であることが分かる．
こうした問題に取り組みその実現可能性を実証した例は過去にない．


\acknowledgment

本研究を進めるにあたって有意義なコメントを戴いた奈良先端大松本研究室の皆
様に深く感謝いたします．

\bibliographystyle{jnlpbbl}
\begin{thebibliography}{}

\bibitem[\protect\BCAY{荒木, 伊藤, 熊谷, 石崎}{荒木ら}{1999}]{Araki:99}
荒木 雅弘, 伊藤 敏彦, 熊谷 智子, 石崎 雅人. (1999). 
\newblock 発話行為タグ標準化案の作成. 
\newblock 人工知能学会誌, Vol.14, No.2, pp. 53--62.

\bibitem[\protect\BCAY{Grosz \BBA\ Sidner}{Grosz et~al.}{1986}]{Grosz:86}
Grosz, B.J. and Sidner, C.L. (1986). 
\newblock Attention, intention and the structure of discourse. 
\newblock In {\em Conputational Linguistics, Vol12, No.3}, pp. 175--204.

\bibitem[\protect\BCAY{Halliday}{Halliday}{1961}]{Halliday:61}
Halliday, M.A.K. (1961). 
\newblock Categories of the theory of grammar. 
\newblock In {\em Word, 17}, pp. 241--292. 

\bibitem[\protect\BCAY{細馬}{細馬}{2000}]{Hosoma:00}
細馬 宏通. (2000). 
\newblock チャットは何を前提としているか -チャットの時間構造と音声会話の時間構造-. 
\newblock 「身体性とコンピュータ」：bit別冊, 共立出版.

\bibitem[\protect\BCAY{石崎，加藤}{石崎ら}{1999}]{Ishizaki:99}
石崎 雅人，加藤 恒昭. (1999). 
\newblock 多人数対話の特徴分析. 
\newblock 人工知能学会 {\em SIG-SLUD-9901-3}.

\bibitem[\protect\BCAY{石崎, 伝}{石崎ら}{2001}]{Ishizaki:01}
石崎 雅人, 伝 康晴. (2001). 
\newblock 談話と対話 言語と計算-3, 6章. 
\newblock 東京大学出版会.

\bibitem[\protect\BCAY{巌寺, 石崎, 森元}{巌寺ら}{1998}]{Iwadera:98}
巌寺 俊哲, 石崎 雅人, 森元 逞. (1998). 
\newblock 表層表現パターンを用いた対話構造の認識. 
\newblock 情報処理学会論文誌, Vol.39, No.8, pp. 2452--2465.

\bibitem[\protect\BCAY{Khan, Fisher, Shuler, Wu \BBA\ Pottenger}{Khan et~al.}{2002}]{Khan:02}
Faisal M. Khan, Todd A. Fisher, Lori Shuler, Tianhao Wu, William M.Pottenger. (2002).
\newblock Mining Chat-room Conversations for Social and Semantic Interactions. 

\bibitem[\protect\BCAY{小林}{小林}{2003}]{Kobayashi:03}
小林 竜己. (2003). 
\newblock 談話の局所・中位構造を利用したチャット会議ログからの議事録自動生成. 
\newblock 人工知能学会 {\em SIG-SLUD-A203-05}, pp. 29--34.

\bibitem[\protect\BCAY{倉林, 山崎, 湯淺, 蓮池}{倉林ら}{2002}]{Kurabayashi:02}
倉林 則之, 山崎 達也, 湯淺 太一, 蓮池 和夫. (2002). 
\newblock ネットワークコミュニティにおける関心の類似性に基いた知識共有の促進. 
\newblock 情報処理学会論文誌, vol.43, No.12.

\bibitem[\protect\BCAY{松本, 北内, 山下, 平野, 松田, 高岡, 浅原}{松本ら}{2002}]{Matsumoto:02}
松本 裕治, 北内 啓, 山下 達雄, 平野 善隆, 松田 寛, 高岡 一馬, 浅原 正幸. 
\newblock 日本語形態素解析システム『茶筌』 version2.2.9 使用説明書. (2002). 


\bibitem[\protect\BCAY{小倉, 石崎}{小倉ら}{2003}]{Ogura:03}
小倉 加奈代, 石崎 雅人. (2003). 
\newblock チャット対話における関連発言同定のための表層情報の分析. 
\newblock 人工知能学会 {\em SIG-SLUD-A203-P05}.

\bibitem[\protect\BCAY{Pereira, Tishby \BBA\ Lee}{Pereira et~al.}{1993}]{pereira93distributional}
Fernando Pereira, Naftali Tishby, and Lillian Lee. (1993). 
\newblock Distributional clustering of {E}nglish words.
\newblock In {\em Proceedings of the 31st Annual Meeting of the Association for
  Computational Linguistics (ACL)}, pp. 183--190.


\bibitem[\protect\BCAY{Sinclair \BBA\ Coulthard}{Sinclair et~al.}{1992}]{Sinclair:92}
Sinclair, J.McH, Coulthard, R.M. (1992). 
\newblock Towards an analysis of discourse. 
\newblock In {\em Advances in spoken discourse analysis}, Routledge.



\bibitem[\protect\BCAY{高梨, 丸山, 内元, 井佐原}{高梨ら}{2003}]{Takanashi:03}
高梨 克也, 丸山 岳彦, 内元 清貴, 井佐原 均. (2003). 
\newblock 話し言葉の文境界 -CSJコーパスにおける文境界の定義と半自動認定-. 
\newblock 言語処理学会 第9回年次大会.

\bibitem[\protect\BCAY{Hofmann}{Hofmann}{1999}]{th:plsi}
Thomas Hofmann. (1999). 
\newblock Probabilistic latent semantic indexing.
\newblock In {\em Proceedings of the 22nd Annual International ACM SIGIR
  Conference on Research and Development in Information Retrieval (SIGIR)}, pp.
  50--57.

\bibitem[\protect\BCAY{Vapnik}{Vapnik}{1995}]{Vapnik1995a}
V.~N. Vapnik. (1995). 
\newblock {\em The Nature of Statistical Learning Theory}.
\newblock Springer.

\bibitem[\protect\BCAY{Werry}{Werry}{1996}]{Werry:96} 
Werry, C.C. (1996). 
\newblock Linguistic and interactional features of Internet Relay
Chat.
\newblock In {\em S. C. Herring(Ed.)  Computer-mediated communication:
Linguistic, social and cross-cultural perspectives}, pp. 47--63.




\end{thebibliography}


\appendix

\section{発言間の結束度}

本研究で言う結束度は，発言同士のムーブ単位へのまとまりやすさを表す．対象
発言(以下CRRu)と先行発言(以下PREu)間及びCRRuとCRRuの発言時刻から1分以内
に発言された最寄りのCRRuと同一話者の発言(以下NBNu\_s)間の結束度を計り，
どちらのペアの結束度が強いかの2値を素性とする．なお今回は，動詞を持たな
いCRRuに対象を制限した．

結束度の強さは，PREu及びNBNu\_sに出現する全ての動詞及びCRRuに出現する全
ての名詞と名詞に連接する助詞を組合せた3つ組$\langle n (名詞)，rel (助詞)，
v(動詞) \rangle$の共起確率$P(\langle n，rel，v \rangle)$を求め，3つ組の
数で正規化することで計る．

例(11)の発言(a)がPREuで(b)がCRRu，(c)がNBNu\_sである場合，$P(\langle 宛，
で，来る \rangle)$と$P(\langle 宛，で，直す \rangle)$を比較する．

\eenumsentence{
\item[a)] Aさん：メール\underline{来ちゃった}
\item[b)] Aさん：個人\underline{宛で}
\item[c)] Aさん：前の文章を\underline{直す}
} 

$P(\langle n，rel，v \rangle)$を推定する手法としては，単語の共起を潜在的
な意味からの同時発生とみなすProbabilistic Latent Semantic 
Indexing(PLSI)\cite{th:plsi}を使用し，共起確率モデルを作成した．発言間の
共起確率モデルは任意の入力$\langle n，rel，v \rangle$に対して，共起確率
を出力する． 

$\langle n，rel，v \rangle$を$\langle rel，v \rangle$と$n$の共起とみなす
と，PLSIにおける共起確率$P(\langle n，rel，v \rangle)$は次式で与えられる． 

\begin{eqnarray*}
  P(\langle n,rel,v \rangle) &= &\sum_{z\in Z}P(\langle rel,v
  \rangle|z)P(n|z)P(z).
\end{eqnarray*}

ここで，zは共起の潜在的な意味クラス(隠れクラス)を指す．式中の確率的パラ
メタ$P(\langle rel，v \rangle|z)$，$p(n|z)$，$p(z)$は，EMアルゴリズムに
よって推定できる\cite{th:plsi}． 

モデルの訓練の手順を以下に示す． 
\begin{enumerate}
\item 新聞記事19年分(毎日新聞9年分，日経新聞10年分)のべ25,061,504文を
CaboCha\footnote{http://chasen.org/\~{}taku/software/cabocha/} 
で係り受け解析し，動詞とそれに係かる名詞と助詞の3つ組$\langle n，rel，v
\rangle$を抽出した．モデルの訓練事例として，チャット対話コーパスではな
く新聞記事コーパスを利用した．これは，新聞記事コーパスから獲得できる
共起用例は大規模であることと，チャット対話コーパスは，関連する発言が必
ずしも隣接しないという特徴のため正しい共起用例を自動的に抽出することが
難しいことがその理由である．
\item 今回は，のべ2回以上出現した名詞，動詞を採用した．助詞は，格助詞
 は``が''，``を''，``に''，``で''，``へ''，``から''，``より'' の7つに
 ``は''，``も'' を加えた9つとした． 
\item 2.で得た3つ組をPLSI学習パッケージ
\footnote{http://chasen.org/\~{}taku/software/plsi/} に入力
し，確率的パラメタを推定した．隠れ変数の個数$|Z|$は1000とした． 
\end{enumerate}

\begin{biography}
\biotitle{略歴}

\bioauthor{徳永 泰浩}{1979年生．2002年九州工業大学情報工学部卒業．2004年
奈良先端科学技術大学院大学情報科学研究科博士前期過程修了．同年任天堂（株）
入社，現在に至る．}

\bioauthor{乾 健太郎}{1967年生．1995年東京工業大学大学院情報理工学研究科
博士課程終了．同年同研究科助手．1998年九州工業大学情報工学部助教授．1998
年〜2001年科学技術振興事業団さきがけ研究21研究員を兼任．2001年より奈良先
端科学技術大学院大学情報科学研究科助教授，現在に至る．博士（工学）．自然
言語処理の研究に従事．情報処理学会，人工知能学会，ACL各会員．}

\bioauthor{松本 裕治（正会員）}{1955年生．1977年京都大学工学部情報工学科
卒業．1979年同大学大学院工学研究科修士課程情報工学専攻修了．同年電子技術
総合研究所入所．1984〜85年英国インペリアルカレッジ客員研究員．1985〜87年
（財）新世代コンピュータ技術開発機構に出向．京都大学助教授を経て，1993年
より奈良先端科学技術大学院大学教授，現在に至る．工学博士．専門は自然言語
処理．情報処理学会，人工知能学会，日本ソフトウェア科学会，認知科学会，
AAAI，ACL，ACM各会員．}

\bioreceived{受付}
\biorevised{再受付}
\bioaccepted{採録}
\end{biography}

\end{document}
