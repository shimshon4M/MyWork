\documentstyle[epsf,jnlpbbl]{jnlp_j}

\setcounter{page}{3}
\setcounter{巻数}{12}
\setcounter{号数}{1}
\setcounter{年}{2005}
\setcounter{月}{1}
\受付{1995}{5}{6}
\再受付{1995}{7}{8}
\採録{1995}{9}{10}

\setcounter{secnumdepth}{2}

\title{大規模日本語文法の開発}
\author{野呂 智哉\affiref{TITECH} \and 橋本 泰一\affiref{TITECH}
  \and 徳永 健伸\affiref{TITECH} \and 田中 穂積\affiref{TITECH}}

\headauthor{野呂 智哉・橋本 泰一・徳永 健伸・田中 穂積}
\headtitle{大規模日本語文法の開発}

\affilabel{TITECH}{東京工業大学 大学院情報理工学研究科}
{Graduate School of Information Science and Engineering,
  Tokyo Institute of Technology}

\jabstract{
  構文解析において，多様な言語現象を扱うためには大規模な文法が必要となる
  が，一般に人手で文法を開発することは困難である．一方，大規模な構文構造
  付きコーパスから様々な統計情報を取り出し，自然言語処理に利用する研究が
  多くの成果をあげてきており，構文構造付きコーパスの整備が進んでいる．こ
  のコーパスから大規模な文脈自由文法(CFG，以下，文法と略す)を抽出するこ
  とが考えられる．ところが，コーパスから抽出した文法をそのまま用いた構文
  解析では多数の解析結果(曖昧性)を作り出すことが避けられないことが問題で
  あり，それが解析精度の悪化や解析時間，使用メモリ量の増大の要因ともなる．
  効率的な構文解析を行うためには，曖昧性を増大させる要因を分析
  し，構文解析の段階では曖昧性を極力抑えるよう文法やコーパスを変更する必
  要がある．本論文では，構文解析で出力される曖昧性を極力抑えた文法を開発
  するための具体的な方針を提案し，その有効性を実験により明らかにしている．
}

\jkeywords{大規模日本語文法，構文構造付きコーパス，構文解析}

\etitle{Building a Large-Scale Japanese Grammar}
\eauthor{Tomoya Noro \affiref{TITECH} \and Taiichi Hashimoto
  \affiref{TITECH} \and Takenobu Tokunaga \affiref{TITECH} \and Hozumi
  Tanaka \affiref{TITECH}}

\eabstract{
  Although large-scale grammars are prerequisite
  for parsing a great variety of sentences,
  it is difficult to build such grammars by hand.
  Yet, it is possible to derive a context-free grammar (CFG)
  automatically from an existing large-scale,
  syntactically annotated corpus.
  While seemingly a simple task,
  CFGs derived in such fashion have seldom been applied
  to existing systems.
  This is probably due to a great number of possible
  parse results (i.e. high ambiguity).
  In this paper, we analyze some causes of high ambiguity,
  and we propose a policy for building a large-scale Japanese CFG
  for syntactic parsing, capable of decreasing ambiguity.
  We also provide an experimental evaluation of the obtained CFG
  showing reduction in the number of parse results (reduced ambiguity)
  created by the CFG and the improved parsing accuracy.
}

\ekeywords{Large-Scale Japanese CFG, Syntactically Annotated Corpus,
  Syntactic Analysis}

\begin{document}
\maketitle

\section{はじめに}
\label{sec:Introduction}

近年，情報化が進むにつれて，
大量の電子テキストが流通するようになった．
これを有効活用するために，情報検索や情報抽出，機械翻訳など，
計算機で自然言語を処理する技術の重要性が増している．
この自然言語処理技術は様々な知識を必要とするが，
その中で構文解析の際に最もよく用いられるものは文脈自由文法
(CFG，以下，文法と略す)である．
ところが，人手で作成した大規模な文法は，作成者の想定する言語現象に
どうしても``もれ''があるため，網羅性に欠けるという問題がある．
一方，最近では，コーパスから抽出した統計情報を用いて自然言語を解析する
コーパスベースの研究が成果をあげており，
それに伴い，(電子)コーパスの整備が進んでいる．
このコーパスから文法を自動的に抽出する研究もあり
\cite{charniak:96,shirai:97}，
文法作成者に大きな負担をかけることなく，
コーパス内に出現する多様な言語現象を扱える大規模な文法を
作成することが可能である．
しかし，コーパスから抽出した文法には問題がある．
それは，コーパスから抽出した文法で構文解析を行うと，
一般に，膨大な量の構文解析結果(曖昧性)
\footnote{以降，特に断わらない限り，構文解析結果の曖昧性を
単に曖昧性と呼ぶ．}が出力されることである．
その要因については
後述するが，
これが，解析精度の低下や解析時間，使用メモリ量の増大の要因となる．
コーパスから抽出した大規模文法がこれまで実用に供されなかった
最大の理由はここにある．

コーパスには意味を考慮した構文構造が付与されていることが普通であり，
そのコーパスから抽出した文法で構文解析を行うと，
意味解釈に応じた異なる構文解析結果が多数生成される．
しかし，意味情報を用いない構文解析の段階では，
意味的に妥当な少数の構文構造に絞り込めず，
可能な構文構造を全て列挙せざるを得ない．
我々は，構文解析結果(構文木)に沿って
意味解析を進める構文主導意味解析(Syntax Directed Semantic Analysis, SDSA)
\cite{jurafsky:2000}を想定し，
構文解析の段階で生じる曖昧性を極力抑え，
次の意味解析の段階で意味的に妥当な意味構造を抽出するという
2段階の解析手法を採用する(図\ref{fig:analysis_flow})．

\begin{figure}[tp]
  \centering
  \epsfxsize=.9\textwidth
  \epsfbox{Introduction/figure/flow.eps}
  \caption{自然言語解析の流れ}
  \label{fig:analysis_flow}
\end{figure}

\if0
\begin{figure}[tp]
  \centering
  \epsfxsize=.6\textwidth
  \epsfbox{Introduction/figure/procedure.eps}
  \caption{大規模日本語文法作成手順}
  \label{fig:procedure}
\end{figure}
\fi

本論文では，構文解析の段階の曖昧性を極力抑え，
その後の意味解析の段階にも有効な構文構造を生成する
大規模日本語文法について検討する．
\if0
そこで，我々は，既存の構文構造付きコーパス
を出発点とし，
以下の手順で文法を作成することを試みている
(図\ref{fig:procedure})．
\begin{enumerate}
\item 既存の構文構造付きコーパスから文法を抽出する
\item 構文解析結果の曖昧性を増大させる要因を分析する
\item 分析結果をもとに構文構造付きコーパスの変更方針を作成する
\item 変更方針に従ってコーパスを変更し，そこから新しい文法を再抽出する
\item (2)〜(4)を繰り返す
\end{enumerate}
ただし，文法の抽出は，Charniakによる``tree-bank grammar''の
抽出方法\cite{charniak:96}と同様の方法をとる．

上述の文法作成手順では，構文構造付きコーパスの変更に重点が置かれ，
文法の作成，変更というより，むしろコーパスの作成，変更のように
思われるかもしれない．
しかし，実際の変更過程では，抽出した文法を変更し，
それをコーパス中の構文構造に反映させる方法をとっている．
文法の変更をコーパスにまで反映させるのは，
PCFGモデル等の確率モデルによる学習の際に訓練データとして
必要であるからであり，文法の作成，変更とコーパスの作成，変更は
同時に扱うべき問題である．
つまり，「曖昧性を抑えた構文構造を出力するように文法を変更する」ことと，
「コーパスに付与されている構文構造を曖昧性を抑えたものに変更する」こと
は，結局のところ，同じことであると考えている．
\fi
その結果，検討前の文法と比較して，
出力される解析木の数を$10^{12}$オーダから$10^5$オーダまで
大幅に減少させることが可能になった．
さらに，この文法から得た解析結果に対して，
意味情報をまったく用いず，確率一般化LRモデル(PGLRモデル)
\cite{inui:98}によるスコア付け1位の解析木の文の正解率
は約60\%であった．
一方，スコア付け1位の解析木に対し，機械的な方法で
文節の係り受けの精度を測定したところ，意味情報を用いなくても，
89.6\%という高い係り受け精度が得られた．
意味情報を本格的に利用することで，
さらなる精度向上が図れるという見通しを得ている．

以下に本論文の構成を述べる．
第\ref{sec:Related}節では，コーパスから文法を抽出する主な研究を
二つ紹介する．
第\ref{sec:Procedure}節では，我々が大規模日本語文法を作成する際の
手順について述べる．
第\ref{sec:Problem}節では，コーパスから抽出した文法が，
構文解析において膨大な量の曖昧性を出力する要因を考察する．
第\ref{sec:Modification}節では，構文解析結果の曖昧性の削減を考慮した
具体的な文法とコーパスの変更方針を述べ，
第\ref{sec:Evaluation}節，第\ref{sec:SDDA}節では，
変更したコーパスから抽出した文法の有効性を実験により明らかにする．
最後に，第\ref{sec:Conclusion}節で本研究を総括し
今後の課題を述べる．

\section{関連研究とその問題点}
\label{sec:Related}

本節では，文法をコーパスから抽出する主な類似研究を紹介する．

\begin{figure}[tp]
  \centering
  \epsfxsize=.6\textwidth
  \epsfbox{Related/figure/grammar_extraction.eps}
  \caption{Penn Treebankコーパスからの文法抽出}
  \label{fig:grammar_extraction_from_penntree}
\end{figure}

英語の大規模な構文構造付きコーパスとしてPenn Treebankコーパスがある
\cite{marcus:93}．
Charniakはこのコーパスから``tree-bank grammar''と呼ばれるCFGを抽出し，
人手で作成した文法との比較を行っている\cite{charniak:96}．
tree-bank grammarは，各中間ノードについて，そのラベルを左辺に，
子ノードのラベルを右辺に持つCFG規則を獲得することで抽出できる
(図\ref{fig:grammar_extraction_from_penntree})．
これまで，コーパスから抽出した文法では，
構文解析はうまくいかないと言われていたが，
人手で作成した文法との比較実験の結果，
特に単語数の多い長い文では，コーパスから
自動抽出した文法の解析精度が良くなることを示し，
それまでの一般的な見識が誤りであることを明らかにしている．

一方，日本語では，Penn Treebankコーパスのような大規模な
構文構造付きコーパスが存在しない．
大規模なコーパスとしてEDRコーパス\cite{edr:2001}と
京大コーパス\cite{kurohashi:97}がある．
しかし，EDRコーパスは括弧付きコーパスであり，
付与されている構文木の内部ノードにラベルが付いていない．
京大コーパスは，二つの文節間の依存関係が付与されているだけで，
文節内の構造は付与されていないので，tree-bank grammarのような
CFGは抽出できない．
白井らはEDRコーパスからのCFGの自動抽出を試みている\cite{shirai:97}．
構文木の内部ノードにラベルが付与されていないので，
各内部ノードに対して適当なラベル(非終端記号)を付与する方法を
提案している．

しかし，
日本語，英語いずれの場合にも，
構文構造付きコーパスから抽出した大規模なCFGで
構文解析を行うと，膨大な数の構文解析結果が出力される．
この問題に対し，
Charniakは，コーパス中の出現頻度の低い文法規則を削除し，
確率文脈自由文法(PCFG)で得られる生成確率に基づく最良優先解析
(best-first parsing)を行い，解析途中で曖昧性を抑えている．
これは，出現頻度の低い文法規則は構文解析における曖昧性を
増大させるだけで，解析精度にほとんど影響を与えないという
仮定に基づいている．
しかし，
詳細は後述するが，出現頻度の低い文法規則だけが
構文解析結果の曖昧性を増大させるわけではない．
労力は要するが，構文解析における曖昧性を増大させる要因を人手で分析する
必要があると我々は考えている．

白井らは，構文解析結果の曖昧性を増大させる要因を分析し，
多数の曖昧性を作り出す文法規則を機械的に変更することで，
曖昧性の削減を図っている．
しかし，機械的な変更だけで曖昧性を削減することには限界があり，
人手による変更も必要になる．
人手による変更が必要となる例を以下に挙げる．

\if0
\begin{description}
\item[人間の直観に反する規則: ] 白井らは，
  括弧付きコーパスであるEDRコーパスからCFGを抽出するために，
  内部ノードに付与するラベルを機械的に推定している．
  しかし，抽出される文法規則が人間の直観に合わない場合がある．
  例えば，「変化/し/まし/た/か」という単語列をカバーするノードのラベルを
  考えると(スラッシュは単語区切りを示す)，
  白井らのアルゴリズムでは，右端の「か」が助詞であるため，
  ``後置詞句''となり，次のCFG規則が得られる．
  しかし，直観的には，後置詞句ではなく動詞句の方が適切である．
\end{description}
\fi

\begin{description}
\item[機能による助詞の細分化: ] 白井らは，助詞を
  形態素ごとに細分化することで曖昧性を抑えている．
  しかし，格助詞，終助詞，並列助詞など機能による細分化も
  曖昧性の削減には必要である．
  EDRコーパス中の助詞に付与されている品詞はすべて``助詞''であり，
  機能による細分化は人手を要する．
\item[意図しない非終端記号の割り当て: ] 白井らは，
  括弧付きコーパスであるEDRコーパスからCFGを抽出するために，
  内部ノードに付与するラベルを機械的に推定している．
  しかし，機械的な推定では，アルゴリズムで想定していない
  文法規則を生成することがある．
  例えば，「変化/し/まし/た/か」という単語列をカバーするノードのラベルを
  考えると(スラッシュは単語区切りを示す)，
  白井らのアルゴリズムでは，右端の「か」が助詞であるため，
  ``後置詞句''となり，次のCFG規則が得られる．
  \[\mbox{後置詞句 → 動詞 語尾 助動詞 助動詞 助詞}\]
  直観的には，後置詞句ではなく動詞句の方が適切であるが，
  機械的な推定では，意図しない非終端記号の割り当てを
  細かく除外していくことは困難である．
\end{description}

\if0
例えば，白井らは助詞を形態素ごとに細分化することで
曖昧性を抑えている．
しかし，格助詞，終助詞，並列助詞など機能による細分化も
曖昧性の削減には必要である．
EDRコーパス中の助詞に付与されている品詞はすべて``助詞''であり，
機能による細分化は人手を要する．
さらに，括弧付きコーパスであるEDRコーパスからCFGを抽出するために，
内部ノードに付与するラベルを機械的に推定している．
しかし，抽出される文法規則が人間の直観に合わない場合がある．
例えば，「変化/し/まし/た/か」という単語列をカバーするノードのラベルを
考えると(スラッシュは単語区切りを示す)，
白井らのアルゴリズムでは，右端の「か」が助詞であるため，
``後置詞句''となり，次のCFG規則が得られる．
\[\mbox{後置詞句} \to \mbox{動詞}~~\mbox{語尾}~~\mbox{助動詞}~~\mbox{助動詞}
~~\mbox{助詞}\]
しかし，直観的には，後置詞句ではなく動詞句の方が適切である．
\fi

後者は曖昧性の増減と直接は関係のないことである．
しかし，人間が見て妥当なCFGを作成するためには，
機械的に内部ノードのラベルを推定するのではなく，
(Penn Treebankコーパスのような)構文構造付きコーパスを用意し，
そこから文法を抽出すべきであると考えている．


\section{大規模日本語文法の作成手順}
\label{sec:Procedure}

\begin{figure}[tp]
  \centering
  \epsfxsize=.6\textwidth
  \epsfbox{Procedure/figure/procedure.eps}
  \caption{大規模日本語文法作成手順}
  \label{fig:procedure}
\end{figure}

我々は，既存の構文構造付きコーパス
を出発点とし，
以下の手順で文法を作成することを試みている
(図\ref{fig:procedure})．
\begin{enumerate}
\item 既存の構文構造付きコーパスから文法を抽出する
\item 構文解析結果の曖昧性を増大させる要因を分析する
\item 分析結果をもとに構文構造付きコーパスの変更方針を作成する
\item 変更方針に従ってコーパスを変更し，そこから新しい文法を再抽出する
\item (2)〜(4)を繰り返す
\end{enumerate}
文法の抽出は，Charniakによるtree-bank grammarの
抽出方法\cite{charniak:96}と同様の方法をとる．
出発点として使用した構文構造付きコーパスの概要については，
付録\ref{sec:Corpus}節で述べる．

上述の文法作成手順では，変更対象が構文構造付きコーパスであり，
文法はコーパスから抽出されるだけであるため，
「文法の作成」という表現に違和感を感じるかもしれない．
しかし，既存のコーパスから抽出した文法は，
コーパス作成者の意図に反し，きわめて多数の構文解析結果を出力する．
そのため，コーパスの作成は，そこから抽出した文法による構文解析結果を
考慮しながら行うことが望ましい．
換言すれば，文法の作成，変更とコーパスの作成，変更は
並行して進める必要があると考えている．
このようにして作成したコーパスは，
PCFGモデル等の確率モデルによる学習の際に，
訓練データとして
も利用できる．


\section{構文解析結果の曖昧性を増大させる要因}
\label{sec:Problem}

繰り返し述べたように，
大規模な構文構造付きコーパスから抽出したCFGを
そのまま利用して構文解析を行うと，
多数の曖昧性を生じる．
曖昧性が増大すると，解析に必要な時間，メモリ量が増大するだけでなく，
その中から構文的に正しいものを選択することが困難になる．
この問題を解決するためには，曖昧性を増大させる要因を
分析しなければならない．

\begin{figure}[tp]
  \centering
  \epsfxsize=.9\textwidth
  \epsfbox{Problem/figure/lack_of_syn.eps}
  \caption{CFG抽出時における構文情報の欠落}
  \label{fig:lack_of_syn}
\end{figure}

曖昧性を増大させる要因は，以下の4種類に大別できる．
\begin{description}
\item[ラベル付けの誤り(要因1): ] 構文構造は人手で付与するため，
  誤りは避けられない．誤った構造が付与されたコーパスから
  抽出した文法は，誤った構造を生成し，
  それが無意味な曖昧性の増大につながる．
\item[構文構造の不一致(要因2): ] 大規模なコーパスを作成する際，
  作業は一人ではなく複数で行うことが一般的である．
  この時，作業者による構造の付け方の``ゆれ''が問題となる．
  一貫性のない構文構造付きコーパスから抽出した文法は
  冗長な文法規則を持ち，
  それが無意味な曖昧性の増大につながる．
\item[構文情報の欠落(要因3): ] 構文構造を付与する際，コーパス作成者は
  文全体の構造を考慮しながら，部分的な構造を決定することが多い．
  ところが，CFGの各規則は
  ノードの親子関係に関する情報しか持たず，
  それ以外の周辺文脈情報(各子ノードを根とする部分木の情報や，
  親ノードを根とする部分木の外側の構文情報)を持たない．
  構文構造の曖昧性を解消する上で有用な構文情報が欠落することで，
  構文解析において，構文的に誤った解析木を余分に生成することがある．
  例えば，図\ref{fig:lack_of_syn}に示す2つの構文木が存在した場合，
  構文木(a)からは``$<$連体句$>\to <$動詞句$>$''という規則が，
  構文木(b)からは``$<$連用句$>\to <$動詞句$>$''という規則が抽出される．
  しかし，これらの規則には動詞の活用形に関する情報が欠落しているため，
  活用形に関係なく，すべての動詞句が連体句にも連用句にもなれてしまう．
  その結果，連用形の動詞句が連体句として体言を修飾したり，
  終止・連体形の動詞句が連用句として用言を修飾したりする解析木が
  生成でき，これが曖昧性を不必要に増大させる要因となる．
\item[意味情報の必要性(要因4): ] 曖昧性の中には，その解消において，
  構文情報だけではなく意味情報も必要とするものがある．
  例えば，「彼の目の色」の「彼の」が「目」と
  「色」のどちらを修飾するかの曖昧性の解消には，
  各語の意味を考慮する必要があり，構文情報だけでは解消できない．
  詳細は後述するが，我々が想定する自然言語解析では，
  構文解析時は構文情報のみを利用し，
  意味情報を必要とする曖昧性の解消は，
  構文解析後の意味解析で行うこととしている．
  構文解析時に解消できない曖昧性を列挙することは，
  構文解析結果を組み合わせ的に増大させることになる
  \footnote{英語においても，PP attachment問題を構文情報だけで
  解決することはできない．この曖昧性は，前置詞句の数に対するCatalan数
  のオーダで増大し\cite{martin:87,church:82}，文全体の構文解析結果の
  曖昧性の増大の最大の要因の1つとなる．}．
\end{description}



要因1と2は，コーパスの誤りであるため，訂正すべきもとのして，
以下の考察から除外する．
一方，要因3と4はコーパスの誤りではない．
要因3の解決には，どの構文情報が必要であるかを考察し，
その情報を非終端記号に追加し，細分化する．
要因4の解決には，意味情報を利用しない限り解決が困難な曖昧性を
包含した単一の構文構造をコーパスに付与し，
CFGを再抽出する．
すなわち，再抽出したCFGによる構文解析結果では，
要因4による曖昧性を区別しない．
こうすることで，構文解析結果の曖昧性を抑えられるだけでなく，
意味解析で解消すべき曖昧性の所在が明らかになる．
次節では，我々の具体的な変更方針について述べる．

\section{文法，コーパスの変更方針}
\label{sec:Modification}




\label{sec:Policy}

要因3の曖昧性はすべて除外することが理想である．
EisnerやKomagataは，Categorial Combinatory Grammar(CCG)について，
解析器側を変更することによってこの曖昧性を完全に除外し，
一つの意味解釈に対して一つの解析木を出力する
(exactly one syntactic structure per semantic reading)手法を
提案している\cite{eisner:1996,komagata:97b}．
本研究ではCFGを使用し，解析器に変更を加えるのではなく，
文法とコーパスそのものを変更しながら，この曖昧性を抑える．

さらに，我々は，要因4の曖昧性を包含した単一の構造を生成する
(意味的情報は利用しないことを前提とした)，構文解析のための
大規模日本語文法の構築を目的としている．
しかし，
この方針によって，
出力される構文解析木の数を抑えることは，
その後の意味解析を困難にすることもあり得る．
そのため，
構文解析時には包含された曖昧性を意味解析で解消することを
念頭に置きながら，
要因4の曖昧性のうち，どれを単一の構文構造で表現し，
構文解析結果の曖昧性を抑えるかを詳細に検討する必要がある．

我々が使用しているコーパスには，以下のような不備や欠点があった．
\begin{enumerate}
\item 用言の活用形に関する情報の欠落(要因3)
\item 複合名詞内の構造の曖昧性(要因4)
\item 連用修飾句，連体修飾句の係り先の曖昧性(要因4)
\item 並列構造の曖昧性(要因4)
\end{enumerate}
これらについて，具体的に変更方針を述べる
\footnote{我々は，第\ref{sec:Introduction}節で述べた
文法開発の手順のサイクルを複数回に分けてこれらの検討を行った
\cite{noro:2003}．}．

\subsection{用言の活用形に関する情報の欠落}

\begin{figure}[tp]
  \centering
  \epsfxsize=.7\textwidth
  \epsfbox{Modification/figure/conjugation.eps}
  \caption{活用形に関する情報の付与}
  \label{fig:conjugation}
\end{figure}

用言の活用形の情報が欠落しているために
それが連体修飾句になるか連用修飾句になるかで曖昧になることを，
第\ref{sec:Problem}節で，要因3の曖昧性の例として挙げた．
実際，我々が使用しているコーパスで，この問題があった．
これを解決するために，用言等の語尾や助動詞の活用形に関する情報を
構文構造に引き継ぐように変更する(図\ref{fig:conjugation})．
ただし，未然形，連用形等すべての活用形を付与するのではなく，
その語が末尾に現れることで連用修飾句，または連体修飾句になり得る
場合にのみ，それぞれ「連用」，「連体」というラベルを追加する．
これは，活用形の情報を付与する目的が，
その用言が連用修飾句になり得るものか，連体修飾句になり得るものかを
区別するためであり，それ以外の情報は必要ないからである．

\subsection{複合名詞内の構造の曖昧性}

\begin{figure}[tp]
  \centering
  \epsfxsize=.7\textwidth
  \epsfbox{Modification/figure/convert_compound_noun.eps}
  \caption{複合名詞の構造の変更}
  \label{fig:convert_compound_noun}
\end{figure}

複合名詞内の構造の曖昧性を構文解析で解消することは困難であり，
この曖昧性を構文解析結果の違いとして出力すべきではないと考えている．
白井らも，この曖昧性を構文解析結果の違いとして出力しないよう
文法を変更している\cite{shirai:97}
\footnote{白井らは，複合名詞という言葉ではなく，
「同一品詞列を支配するノード」という表現を使用している．
我々は，名詞，接頭語，接尾語などで構成され，名詞として働く構成素を
対象とし，複合名詞と呼んでいる．}．
我々もその方針に倣い，複合名詞については，
語構成に関係なく右下がりの構造に統一する
(図\ref{fig:convert_compound_noun})
\footnote{構造を右下がりにする際，複合名詞の根ノードと
内部のノードのラベルを図\ref{fig:convert_compound_noun}のように
区別している．もし，これらを同一のラベルにすると，
「金谷さん夫妻」の例において，「さん夫妻」という接尾語が先頭に出現する
複合名詞を認める文法規則になってしまう．}．



\subsection{連用修飾句，連体修飾句の係り先の曖昧性}



次に，連用修飾句，連体修飾句の係り先の曖昧性の扱いを検討する．
我々は，連用修飾関係の曖昧性は
従来通り別の構造として区別し(すなわち，構造は変更しない)
\footnote{元のコーパスでは用言のとる表層格の情報を利用していたが，
格の区別は意味情報を必要とし，構文解析時の曖昧性解消が困難な曖昧性を
増大させる要因となる．
そこで，図\ref{fig:convert_adv_phrase}に示すように，
用言のとる表層格の情報は無視する\cite{noro:2003}．}，
連体修飾関係を表す構造を，複合名詞の場合と同様，意味に関係なく
同一の構造にする(図\ref{fig:convert_adn_phrase})
\footnote{構造を変更する際，図\ref{fig:convert_adn_phrase}に示すよう
  に，右側の名詞句と左側の連体句の下の名詞句を区別している．
もし，これらを同一のラベルにすると，抽出した文法規則は
変更前後の両方の構造を生成することが可能になり，
構造を制限することができなくなる．}．
つまり，連用修飾関係の曖昧性は構文解析結果の曖昧性として残し，
連体修飾関係の曖昧性は構文解析の段階では出さず，
後の意味解析でこの曖昧性を解消することになる．

\begin{figure}[tp]
  \centering
  \epsfxsize=.7\textwidth
  \epsfbox{Modification/figure/convert_adv_phrase.eps}
  \caption{連用修飾句の係り先に関する変更}
  \label{fig:convert_adv_phrase}
\end{figure}

\begin{figure}[tp]
  \centering
  \epsfxsize=\textwidth
  \epsfbox{Modification/figure/convert_adn_phrase.eps}
  \caption{連体修飾句の係り先に関する変更}
  \label{fig:convert_adn_phrase}
\end{figure}

\begin{figure}[tp]
  \centering
  \epsfxsize=.7\textwidth
  \epsfbox{Modification/figure/structure.eps}
  \caption{単文「欧米諸国は日本の流通制度の改善を求めている」の構造}
  \label{fig:structure}
\end{figure}

上述の方針に決定した理由は二つある．
一つは，連用修飾関係を表す構造を意味に関係なく同一の構造にすることは，
構文解析後の意味解析を困難にすることになるからである．
例えば，「欧米/諸国/は/日本/の/流通/制度/の/改善/を/求めている」
という単文を考える．ただし，スラッシュは単語区切りを表す
(「求めている」は動詞語幹，助動詞語幹，語尾に分割されるが，
簡単のため，ここでは1語として表記する)．
この文に対してボトムアップに(意味的に正しい)構文構造を付与すると，
次の手順になる．
\begin{enumerate}
\item 「欧米諸国」，「流通制度」のそれぞれを一つの複合名詞にまとめる
  (図\ref{fig:structure}の破線で囲まれた部分)．
\item 「日本の」と「流通制度」，そして「(日本の)流通制度の」と「改善」の
  それぞれを一つの連体修飾関係にまとめる
  (図\ref{fig:structure}の細い実線で囲まれた部分)．
\item 「(日本の流通制度の)改善を」と「求めている」，
  「欧米諸国は」と「(日本の流通制度の改善を)求めている」の
  二つの連用修飾関係をまとめる(図\ref{fig:structure}の太い実線で
  囲まれた部分)．
\end{enumerate}
このように考えると，単文では，連用修飾関係を表すレベルが
連体修飾を表すレベルより上にある．
複文や重文は，この単文を組み合わせることで構成される．
上位レベルである連用修飾関係を表す構造を
意味に関係なく同一構造にすることは，
複文や重文を構成する単文のまとまりを破壊することになり，
文全体の構造がとらえにくくなる．
その結果，構文解析後の意味解析が困難になる．
下位レベルである連体修飾関係を表す構造を，
意味に関係なく同一構造にし，
連用修飾関係を表す構造は従来通り別の構造として区別することで，
その後の意味解析を困難にせずに，
構文解析の段階の曖昧性を抑えられると考えている．





もう一つの理由は，連用修飾句の係り先の曖昧性の解消は，
連体修飾句の係り先の曖昧性の解消に比べて，
構文解析での解決が容易であるからである．
連用修飾句の係り先は，
助詞と動詞の関係，副詞と助動詞の関係等を利用することで，
決定できる可能性があるのに対し，
連体修飾句の係り先は，連用修飾句の場合に比べて，
品詞レベルでの解決が難しい．
そこで，品詞レベルでの解決が比較的容易な連用修飾関係を表す構造は
従来通りとし，連体修飾関係を表す構造は，
意味に関係なく同一構造にすべきであると，我々は考えている．

\begin{figure}[tp]
  \centering
  \epsfxsize=.6\textwidth
  \epsfbox{Modification/figure/rentai_amb.eps}
  \caption{連体修飾句の係り先に関する2種類の曖昧性}
  \label{fig:adnominal_phrase}
\end{figure}

ただし，連体修飾句の係り先の曖昧性が，大別して2種類あることに
注意したい．
\begin{enumerate}
\item 連用修飾句の範囲を変えないもの
\item 連用修飾句の範囲を変えるもの
\end{enumerate}
図\ref{fig:adnominal_phrase}にそれぞれの例を示す．
太い実線で囲まれた句は連用修飾句を，細い実線で囲まれた句は連体修飾句を，
破線で囲まれた句は動詞を，網掛けの長方形で囲まれた句は連体修飾を受ける
名詞を，矢印の始点は修飾関係の係り元を，終点は係り先を表す．

「新しい環境への適応能力を調べる」の場合，
連体修飾句「新しい」が「環境」に係る場合でも
「適応能力」に係る場合でも，
動詞「調べる」に係る連用修飾句は「新しい環境への適応能力を」である
ことには変わりはない(図\ref{fig:adnominal_phrase}(a)，(b))．
ところが，「百年の歴史を持つ祭り」では，
連体修飾句「百年の」が「歴史」に係る場合の動詞「持つ」に係る
連用修飾句は「百年の歴史を」であるのに対し，
「百年の」が「祭り」に係る場合も考えられないこともない．
後者の場合は，
「歴史を」のみが「持つ」に係る連用修飾句となる
(図\ref{fig:adnominal_phrase}(c)，(d))．

我々は，連用修飾句の範囲と係り先
は従来のまま変更せず，そこから抽出した文法は，その曖昧性を
構文解析の段階に出力することにしている．
その方針に合わせ，連用修飾句の範囲を変えない場合に限り，
連体修飾関係を表す構造を同一の構造に統一する
(すなわち，「新しい環境への適応能力を調べる」の場合は
図\ref{fig:adnominal_phrase}(b)の構造に変更し，
「百年の歴史を持つ祭り」の場合は図\ref{fig:adnominal_phrase}(c)の
構造のままにしておく)．


\subsection{並列構造の曖昧性}

並列構造の曖昧性の解消には意味的情報が必要であり，
係り受け解析において並列構造を含む文の正解率は，
含まない文に比べて低くなる．
予備実験によると，並列構造を含む文の正解率は，
含まない文の正解率の半分程度しかない\cite{noro:2003}
\footnote{「文の正解率」の定義は第\ref{sec:Evaluation}節で述べる．}．
文の正解率を全体的に上げるためには，
並列構造の曖昧性について検討する必要がある．
KNP\cite{kurohashi:1998}では，先に並列関係にある部分を決定し，
次にその内部の構造を分析するアプローチを採用している
\cite{kurohashi:1992}．
しかし，我々は，並列関係にあるかどうかの判定は構文解析に先立って
行わず，その後の意味解析の段階で行うこととする．
言い換えると，注目している二つの部分が並列関係にあるかどうかの曖昧性は，
構文解析の段階では区別しない．

\begin{figure}[tp]
  \centering
  \epsfxsize=.9\textwidth
  \epsfbox{Modification/figure/convert_para_noun.eps}
  \caption{並列名詞句の構造に関する変更}
  \label{fig:convert_para_noun}
\end{figure}

\begin{figure}[tp]
  \centering
  \epsfxsize=.8\textwidth
  \epsfbox{Modification/figure/convert_para_verb.eps}
  \caption{並列述語句の構造に関する変更}
  \label{fig:convert_para_verb}
\end{figure}



日本語には，並列名詞句，並列述語句，並列助詞句の3種類の並列構造がある
\footnote{黒橋らは，それぞれを名詞並列，述語並列，部分並列と呼んでいる
\cite{kurohashi:1998}．}．
我々は，これらの構造を以下の方針で変更する．
\begin{description}
\item[並列名詞句: ] 名詞句「日本と中国の関係」において，
  「日本」と「中国」が並列関係にあるのか，それとも
  「日本」と「関係」が並列関係にあるのかという曖昧性の解消には，
  各語の意味的情報が必要となる．「ＡのＢのＣ」，「ＡとＢのＣ」の
  二つの名詞句を考えると，どちらの場合も名詞「Ａ」，「Ｂ」，「Ｃ」の
  間の関係を分析することになる．このことから，
  並列名詞句の分析は連体修飾句の係り受けの解析に似ている．
  構文解析の段階では「Ａと」を連体修飾句と同様に扱い，
  並列構造の曖昧性の解消は，次の意味解析の段階で，
  連体修飾関係の曖昧性の解消と同時に行うこととする
  (図\ref{fig:convert_para_noun})．
\item[並列述語句: ] 予備実験\cite{noro:2003}によると，
  並列述語句を含む文の正解率は，
  それ以外の並列構造を含む文の正解率と比べて大幅に低くなる．
  これは，二つの述語句が並列関係にあるか否かの判断が，
  構文解析の段階では難しいためである．
  例えば，「歌を歌い，踊りを踊る」という文が並列構造を持つか否かは，
  並列関係の定義を明確にしなければ，
  コーパス作成者によっても判断が分かれるところである．
  構文解析の段階では並列述語句は連用修飾関係と同様に扱い，
  二つの述語句が並列関係にあるか否かの判断は，
  後の意味解析の段階で行うこととする
  (図\ref{fig:convert_para_verb})．
\item[並列助詞句: ] 並列助詞句は，「国政段階\underline{でも}
  個別産業レベル\underline{でも}
  影響力は小さい」のように，並列関係にある二つの助詞句に含まれる
  助詞が同じであることが多いので，並列助詞句を含む文の正解率は
  それほど低くならないと思われるかもしれない．
  ところが，予備実験\cite{noro:2003}によると，
  並列助詞句を含む文の正解率は並列述語句を含む場合よりは高いが，
  並列名詞句を含む場合とほぼ同じであった．
  二つの助詞句が並列関係にあるか否かの判定には意味的情報が必要であり，
  構文解析の段階で解決することは困難である．
  構文解析の段階では，とりあえず並列関係にある助詞句は
  別個に動詞に係る構造を作ることとし，
  二つの助詞句が並列関係にあるか否かの判定は
  意味解析の段階で行うこととする
  (図\ref{fig:convert_para_pp})．
\end{description}

\begin{figure}[tp]
  \centering
  \epsfxsize=.8\textwidth
  \epsfbox{Modification/figure/convert_para_pp.eps}
  \caption{並列助詞句の構造に関する変更}
  \label{fig:convert_para_pp}
\end{figure}


以上をまとめると，我々の文法とコーパスの変更方針は以下のようになる．
\if0
\begin{enumerate}
\item 複合名詞内の構造の曖昧性，連用修飾句の範囲を変えない
  連体修飾句の係り先の曖昧性は
  タイプ3の曖昧性とし，構文解析の段階では
  一つの構文構造を出力する．
\item 連用修飾句の係り先の曖昧性，連用修飾句の範囲を変える
  連体修飾句の係り先の曖昧性はタイプ1の曖昧性とし，
  構文解析の段階で係り受け構造を反映した異なる構造を出力する．
\item 並列構造の曖昧性はタイプ3の曖昧性とし，
  二つの句が並列関係にあるか否かの曖昧性は，
  構文解析の段階では一つの構文構造を出力する．
\end{enumerate}
\fi
\begin{enumerate}
\item 複合名詞内の構造，連用修飾句の範囲を変えない
  連体修飾句の係り受け関係の構造は，
  語構成や意味に関係なく同一の構造にする．
\item 連用修飾句の係り受け関係の構造，連用修飾句の範囲を変える
  連体修飾句の係り受け関係の構造は，
  従来通りの構造にする．
  ただし，用言のとる表層格の情報は無視する．
\item 二つの句が並列関係にあるか否かの判定は
  構文解析の段階では行わず，並列関係にあるか否かで構造の区別はしない．
\end{enumerate}

\begin{figure}[tp]
  \centering
  \epsfxsize=.7\textwidth
  \epsfbox{Modification/figure/basicPolicy.eps}
  \caption{構文解析で生成される構造}
  \label{fig:example_of_policy}
\end{figure}

以上の方針に従って構築した文法を使用し，
「道路の両側には水を流すための溝が掘ってあります」という文を
構文解析すると，図\ref{fig:example_of_policy}に示す
4個の構文構造が生成される．
ただし，実線で囲まれた句は連用修飾句を，
破線で囲まれた句は動詞を，矢印の始点は連用修飾関係の係り元を，
終点は係り先を表す．
これら4個の構文構造は，連用修飾句の範囲とその係り先の違いを表し，
この中から一つの構文構造を選択することは，
連用修飾句の範囲とその係り先を決定することを意味する．
一方，連体修飾句の係り先は，
各構文構造が持つ意味的曖昧性の中から
一つの意味解釈を生成することによって決定する．
例えば，構文構造(b)では連体修飾句「道路の両側には水を流す」が
「ため」に係るか「溝」に係るかを決定し，
構文構造(c)では連体修飾句「道路の」と「両側には水を流す」が，
それぞれ「ため」に係るか「溝」に係るかを決定する．
一方，構文構造(b)では，「道路の」が「ため」や「溝」に係る可能性は，
動詞「流す」を連用修飾する「道路の両側には」という句の範囲を
変えることになるので考慮する必要はない．

\section{評価実験}
\label{sec:Evaluation}

前節で述べた方針によるコーパスへの構文構造の付与の
有用性を確認するため，コーパスから抽出した文法を用いて，
以下の2点について評価実験を行った．
\begin{enumerate}
\item 構文解析結果の曖昧性がどの程度抑えられているか
\item どの程度の構文解析精度が得られるか
\end{enumerate}
(1)の評価実験は本研究の目的そのものであるが，
曖昧性が抑えられていても，解析精度が低ければ問題であるので，
(2)の評価実験も必要である．

\subsection{文法，コーパスの構文構造の変更}

まず，付録\ref{sec:Corpus}節で述べたコーパス8911文(平均20形態素)に対し，
我々の方針に従って
構文構造付きコーパス作成支援ツール\cite{okazaki:2001}で
構文構造を変更した
\footnote{変更前のコーパスは約2万文あるが，
8911文しか変更していないので，それに対応する文だけを
変更前のコーパスから抜き出し，実験に使用する．}．
具体的には，以下の手順で変更を行っている．
\begin{enumerate}
\item 我々の変更方針に従って文法を人手で変更．
\item MSLRパーザ\cite{shirai:00}でコーパス中の文を構文解析し，
  構文解析結果の集合(統語圧縮共有森，
  packed-shared forest\cite{tomita:86})を獲得．
\item コーパス作成支援ツールで，構文解析結果の集合を絞り込み，
  最終的に1つの正しい構文構造を選択．
\end{enumerate}
手順(3)で使用するコーパス支援ツールは，
解析結果を1つずつ表示させながら正しい構文構造を選択するためのものではなく，
非終端記号名や特定の句の係り先を，
正しい構文構造が満たすべき制約として，作業者が順々に与え，
それを満たさない候補を排除しながら正しい構文構造を残すためのものである．
制約は，構文構造が曖昧な箇所(制約の教示を必要とする非終端記号や
係り受け)をマウスで選択し，表示される選択肢から正しい候補を
選択することで与える．
作業は，100文をラベル付けするのに約3時間かかり，
4人でこの約9000文をラベル付けするのに約1ヶ月かかった
\footnote{4人のうち3人は変更方針の検討に直接は関わっておらず，
ラベル付け前に我々(方針作成者)がその説明を行ったが，
作業者が方針を理解し，本格的にラベル付けを開始できるまでに
(作業期間の1ヶ月の他に)1，2週間かかった．}．

\subsection{構文解析結果の曖昧性の変化}

変更前，変更後のコーパス全8911文からそれぞれ文法を抽出し
\footnote{\cite{charniak:96}のようにコーパス出現頻度の
低い文法規則を削除することはせず，全文法規則を利用する．}
(以降，変更前，変更後のコーパスから抽出した文法を，
それぞれ「変更前の文法」，「変更後の文法」と呼ぶ)，
MSLRパーザで構文解析を行った
\footnote{MSLRパーザは形態素解析と構文解析を同時に行うものであるが，
品詞列を入力とすることで構文解析のみを行うことができる．
今回は，品詞列を入力とし，形態素解析は終了しているものとしている．}．
変更前，変更後の文法による構文解析結果の数を
表\ref{tab:result_ambiguity}に示す．
我々のコーパスの変更方針により，文法規則数は約250個増加しているが，
構文解析結果の数は$10^{12}$オーダから$10^5$オーダに減少した
\footnote{今回の我々の方針では品詞レベルの変更は考慮しておらず，
非終端記号の数の変化はない．}．

\begin{table}[tp]
  \centering
  \caption{変更前，変更後の文法による構文解析結果の数}
  \label{tab:result_ambiguity}
  \begin{tabular}{|c|r|r|r|r|}\hline
    & \multicolumn{1}{|c|}{文法規則数}
    & \multicolumn{1}{|c|}{非終端記号数}
    & \multicolumn{1}{|c|}{終端記号数}
    & \multicolumn{1}{|c|}{構文解析結果数} \\\hline
    変更前 & 1,694 & 249 & 600 & $1.868 \times 10^{12}$ \\\hline
    変更後 & 1,949 & 279 & 600 & $9.355 \times 10^5$ \\\hline
  \end{tabular}
\end{table}

白井らの手法では，EDRコーパス約188,000文から抽出した文法で
1文あたり$10^9$オーダの解析木が出力される\cite{shirai:97}．
文法抽出に使用した文の数に大きな差があるため公平な比較にはならないが，
白井らの文法に比べて曖昧性が減少している主な要因として，
以下の3つが考えられる．
\begin{description}
\item[連体修飾句と連用修飾句の区別: ]
  白井らの文法では，連体修飾句か連用修飾句かを区別するための
  ラベルが付与されていない．これは，第\ref{sec:Problem}節で
  挙げた曖昧性を増大させる要因の3番目にあたる．
  この問題は第\ref{sec:Problem}節で挙げた用言の活用形の問題だけでなく，
  後置詞句でも同様に起こり得る．
  EDRコーパスでは，「が」，「を」等と「の」を区別せず，
  すべて「助詞」としているので，白井らの文法では
  これらの助詞が末尾に現れる句はすべて「後置詞句」となり，
  連体修飾句か連用修飾句かの区別が付かなくなる．
  我々の文法では，「\underline{東京へ}行く」のように
  連用修飾句になる場合は「助詞句」，
  「\underline{東京の}人口」のように連体修飾句になる場合は
  「連体句」となるので，このような曖昧性は出ない
  \footnote{「\underline{鼻の}長い象」のように，
    「の」が末尾に出現する句が
    連用修飾句になる場合もあるので，曖昧性は残る．
    しかし，逆に，現代語において，
    他の助詞が末尾に出現する句が連体修飾句になることはほとんどない．
    「\underline{駅を}中心に発展する」のような例外もあるが，
    これは「中心に」の後に動詞「して」が省略されていると
    考えることができる．現段階では省略をCFGで扱うことを考えていないので，
    このような文は対象外とし，曖昧性を除外している．}．
\item[品詞の細分化: ]
  我々が使っているコーパスの品詞体系はEDR日本語単語辞書に基づいて
  細分化されている．例えば，白井らは名詞を細分化していないが，
  「今日，東京へ行く」の「今日」のように助詞を伴わずに
  連用修飾可能な名詞を他の名詞と区別しておかなければ，
  すべての名詞が助詞を伴わずに連用修飾することを認める
  文法規則となり，曖昧性を増大させる要因となる
  \footnote{日本語では助詞が頻繁に省略され，
    一般的な名詞であっても助詞を伴わずに連用修飾する例もあるが，
    助詞が省略されていると判断できるものは対象外としている．}．
\item[連体修飾関係と並列関係: ] 
  我々の文法では，連体修飾句の係り先の曖昧性と
  2つの句が並列関係にあるか否かの曖昧性を出さないようにしている．
  1文に含まれる連体修飾句や並列句の数はそれほど多くなく，
  先に挙げた2つの要因ほど，大きく曖昧性の削減に貢献していないが，
  構文解析での解決が困難な曖昧性を抑えることは，
  その後の意味解析においても重要なことである．
\end{description}

\subsection{構文解析精度の変化}

\begin{figure}[p]
  \centering
  \epsfxsize=.9\textwidth
  \epsfbox{Evaluation/figure/resultPGLR-close.eps}
  \caption{変更前と変更後の文法$G_{\mbox{all}}$による構文解析結果の文の正解率}
  \label{fig:result_accuracy_close}
\end{figure}

\begin{figure}[p]
  \centering
  \epsfxsize=.9\textwidth
  \epsfbox{Evaluation/figure/resultPGLR-open.eps}
  \caption{変更前と変更後の文法$G_{\mbox{train}}$による構文解析結果の文の正解率}
  \label{fig:result_accuracy_open}
\end{figure}




構文解析結果を確率一般化LR(PGLR)モデル\cite{inui:98}で
ランク付けし，解析精度を調べた
\footnote{\cite{charniak:96,shirai:97}はPCFGを用いているが，
我々はPGLRモデルを使用する．我々が行った予備実験によると，
PGLRモデルの方がPCFGよりも解析精度が高くなる．}．
ただし，8911文を10分割し，一つを評価用，残りをPGLRモデルの学習用とし，
10分割交差検定で評価を行った．
文法は全8911文から抽出したもの($G_{\mbox{all}}$)と，
学習用データのみから抽出したもの($G_{\mbox{train}}$)の
2通りを用意した．
図\ref{fig:result_accuracy_close}，図\ref{fig:result_accuracy_open}に，
上位1位から100位以内の解析結果に
ついての文の正解率を示す．ただし，文の正解率は以下のように定義される．
\[\mbox{文の正解率} = \frac{\mbox{出力した解析木の集合の中に
    正しい木が含まれる文の数}}{\mbox{解析した文の総数}} \]
ここで，「正しい木」とは，コーパスの構文構造と
完全に一致する解析木を指す．
また，文法$G_{\mbox{train}}$の被覆率，再現率を
表\ref{tab:coverage_recall}に示す．
ただし，被覆率，再現率は以下のように定義する．
\[\mbox{被覆率} = \frac{\mbox{解析した文の総数}-\mbox{解析に失敗した文
    の総数}}{\mbox{解析した文の総数}}\]
\[\mbox{再現率} = \frac{\mbox{出力されたすべての解析木の中に正しい木が存在する文数}}
{\mbox{解析した文の総数}}\]

\begin{table}[tp]
  \centering
  \caption{文法$G_{\mbox{train}}$の被覆率と再現率}
  \label{tab:coverage_recall}
  \begin{tabular}{|c|r|r|}\hline
    & \multicolumn{1}{|c|}{変更前} & \multicolumn{1}{|c|}{変更後} \\\hline
    被覆率 & 98.51\% & 97.32\% \\\hline
    再現率 & 96.63\% & 95.88\% \\\hline
  \end{tabular}
\end{table}


従来の研究では，評価尺度として括弧付けの再現率や適合率など
部分的な構造の正しさを示すものを使用することが多い．
しかし，我々は，構文解析結果の集合から
尤もらしい解析結果をいくつか選択し，
それらに対して意味解析を行うことを前提としているので，
構文解析の段階では，意図した構文構造と完全に一致している
ことが望ましい．
構文構造の部分的な正しさを示す括弧付けの再現率や適合率よりも，
上述の文の正解率の方が条件が厳しいが，
重要な尺度であると考えている．

PGLRモデルによる生成確率の上位100位以内の解析結果について見てみると，
変更前，変更後の文法による文の正解率は，
文法$G_{\mbox{all}}$ではそれぞれ88.45\%，98.62\%となり，
文法$G_{\mbox{train}}$ではそれぞれ86.23\%，94.66\%となり，
変更後の文法の方が8〜10\%高くなっている．
また$G_{\mbox{all}}$，$G_{\mbox{train}}$どちらの場合でも，
変更後の文法で，
変更前の文法による上位100位以内の文の正解率に達するには，
上位10位以内の解析結果を考慮するだけで十分であり，
我々のコーパスの変更方針が有効であることが分かる．

表\ref{tab:coverage_recall}より，
我々の文法$G_{\mbox{train}}$の被覆率は97\%以上であり，
広範囲の文の解析が可能であることが分かる．
一方，被覆率，再現率ともに，我々の方針による変更によって
1\%程度低くなり，解析不能なものが
変更前に比べて1\%程度多く生じる．
これは，構文解析結果の曖昧性を抑えるために
非終端記号を細分化したことによるものである．
文法$G_{\mbox{train}}$による上位100位の文の正解率の差が
文法$G_{\mbox{all}}$によるものの差より小さくなる要因は，
この再現率の差にある．
しかし，
文の正解率が我々の変更によって10\%近く上がることから，
被覆率や再現率がこの程度低下することは許容できると考えている
\footnote{コーパスをさらに増やせば，被覆率，再現率の差は小さくなる．}．

\if0
さらに，予備実験として，無作為に選んだ100文について，
変更後の文法による1位の解析結果を調査したところ
\footnote{100文を評価用データとし，残りを学習用データとしている．}，
文節区切りが完全に一致するものは96文あり，
それらの文節の係り受け正解率は89.23\%であった
\footnote{連体修飾句の係り先は，係り先となり得る名詞のうち
最も近くにあるものであると仮定している}．
これは，Support Vector Machineや最大エントロピー法を用いた
文節係り受け解析の手法の正解率と同程度であり
\cite{uchimoto:99,kudo:2002}
\footnote{使用しているコーパスや実験の条件が異なるため，
公平な比較ではない．}，
意味情報を用いることでさらに正解率が向上すると考えている
\footnote{変更前の文法でも，文節の係り受け正解率は，
変更後の文法の場合とほぼ同じである．
しかし，係り受け構造は完全に同じであっても
非終端記号が異なるものが多く，
それらは意味解析の段階で誤った解釈をすることになる可能性が高い．}．
\fi


\section{PGLRモデルによる解析結果を利用した係り受け解析}
\label{sec:SDDA}

前節で，我々の方針により作成したコーパスから
抽出した大規模日本語文法が，構文解析結果の曖昧性を抑え，
文の正解率が約10\%向上することを示した．
しかし，構文解析結果の曖昧性を抑えるために，
一部の曖昧性を
同一の構造で表現することとし，
その内部構造を厳密に決定していないため，
文の正解率が高くなるのは当然であるという疑問が残る．
そこで，
PGLRモデルによる解析結果を利用した文節係り受け解析を行い，
係り受け精度を調べた．



\subsection{構文木からの文節係り受け関係の抽出}
\label{sec:DepExtraction}

文節の係り受け関係は，構文木から取り出す．
その手順を以下に示す．
\begin{enumerate}
\item 文節区切りを決定する
\item 構文構造をもとに，各文節について，係り先となる文節を決定する
\end{enumerate}
例えば，図\ref{fig:example_tree}の構文木の場合，
文節区切りと各文節の係り先となる文節は
表\ref{tab:extracted_dep}のようになる．
我々が使用しているコーパスに付与されている構造は句構造であり，
文節中のどの語に係るかをさらに厳密に決定することも可能である．
しかし，今回の実験では，どの文節に係るかのみを決定する．

\begin{figure}[t]
  \centering
  \epsfxsize=.8\textwidth
  \epsfbox{SDDA/figure/example_tree.eps}
  \caption{構文構造の例}
  \label{fig:example_tree}
\end{figure}

\begin{table}[tp]
  \centering
  \caption{図\protect\ref{fig:example_tree}の木構造から抽出される文節の係り受け関係}
  \begin{tabular}{|c|l|c|}\hline
    文節番号 & \multicolumn{1}{|c|}{文字列} & 係り先文節番号 \\\hline
    1 & １．８ヘクタールの & 2 \\\hline
    2 & 広さが & 3 \\\hline
    3 & あり， & 6 \\\hline
    4 & 日本庭園の & 5 \\\hline
    5 & 眺めが & 6 \\\hline
    6 & すばらしい & ---(文末) \\\hline
  \end{tabular}
  \label{tab:extracted_dep}
\end{table}

変更後の文法では，連体修飾句の係り受け関係の構造は
連用修飾句の範囲を変えない場合に限り，
同一の構造(右下がりの構造)に制限している．
そのため，連体修飾句の係り受け解析を行う際は，
連体修飾関係の曖昧性をすべて考慮しなければならない．
しかし，今回は，PGLRモデルによる生成確率1位の構文木中の連体修飾句は
(意味的情報を用いず)
係り得る名詞の中で最も近いものを含む文節に係ることとする
\footnote{係り得る名詞の中で最も近いものに係るとすると，
連体修飾句の係り先の正解率は70\%弱であった．}．

\begin{figure}[t]
  \centering
  \epsfxsize=.6\textwidth
  \epsfbox{SDDA/figure/adnominal.eps}
  \caption{連体句の係り受け関係}
  \label{fig:sdda_adn}
\end{figure}

例えば，「青い目のアメリカから来た男性に会う」という文の
「青い目のアメリカから来た男性に」という助詞句を考える．
変更後の文法でこの文を構文解析すると，
この助詞句について，
図\ref{fig:sdda_adn}(a)，(c)，(e)の3通りの解析木が出力される
(中間ノードのラベルは省略する)
\footnote{実際には助詞句「青い目のアメリカから」が
「会う」に係る解析木も出力されるが，ここの議論では省略する．}．
図\ref{fig:sdda_adn}(a)のような構文木が生成された場合，
その係り受けは，図\ref{fig:sdda_adn}(b)に示すように，
文節「青い」が文節「目の」に，文節「目の」が文節「男性に」に
直接係るとして係り受け精度を計算する
(文節「アメリカから」は文節「来た」に，
文節「来た」は文節「男性に」に係る)．
図\ref{fig:sdda_adn}(c)，(e)の場合は，それぞれ
図\ref{fig:sdda_adn}(d)，(f)に示すような係り受け構造となる．

連用修飾句の係り先の曖昧性は
構文解析結果の曖昧性として残しているので，
構文解析結果として出力された構造をそのまま利用する．

複合名詞の内部の構造
は語構成に関係なく同一の構造としているが，
今回の実験では文節の係り受け
構造を抽出するだけであるので，
複合名詞の内部の構造までは考慮されない．

2つの文節が並列関係にあるか否かの曖昧性は，
今回の評価実験では無視し，
並列名詞句は連体修飾関係として，
並列述語句と並列助詞句は連用修飾関係として扱う．

\subsection{評価実験}

評価は，変更後のコーパス8912文で行った
\footnote{第\ref{sec:Evaluation}節の評価実験では8911文を利用していた．
実際のコーパスは8912文であるが，1文は変更前のコーパスから
抽出した文法で構文解析を行うと，構文解析結果の数が膨大になり過ぎ，
メモリ不足で解析できなかったため，この1文を除いて実験を行った．
今回の実験は変更後のコーパスから抽出した文法のみを利用するので，
8912文全てを利用している．}．
このうち，評価用として100文をランダムに選択し，
残りをPGLRモデルの学習用とした．
この評価用データの100文は，1文あたり平均19.84形態素，7.16文節であり，
並列構造を持つ文は17文含まれている．
PGLRモデルにより評価用データ100文を構文解析し，
生成確率が1位の構文木から，
第\ref{sec:DepExtraction}節で述べた方法により，
半自動的に係り受け構造を抽出し
\footnote{構文解析結果から文節の係り受け構造を機械的に抽出することは，
一見すると簡単に見える．しかし，コーパスに付与されている構造が
複雑であるため，完全に自動化することはできなかった．
機械的に正しい係り受け構造を抽出できない部分は人手で修正している．
今後，文節係り受け構造の抽出を容易にするために，
構造の変更を検討していく予定である．}，
その精度を以下の3つの尺度で評価した．
\[\mbox{係り受けA型}=\frac{\mbox{正しい係り受け関係の数}}
{\mbox{総文節数}-(\mbox{テスト文の総数}\times 1)}\]
\[\mbox{係り受けB型}=\frac{\mbox{正しい係り受け関係の数
    (文末2文節の関係以外)}}{\mbox{総文節数}-(\mbox{テスト文の総数}
    \times 2)}\]
\[\mbox{文正解率}=\frac{\mbox{正しい係り受け関係をすべて決定できた文数}}
{\mbox{テスト文の総数}}\]
「係り受けA型」とは，全ての係り受け関係の正解率であり，
「係り受けB型」とは，文末2文節の係り受け関係以外の係り受け正解率である．
「文正解率」とは，文全体の文節の係り受け関係の正解率である．
テスト文の正しい係り受け関係は，
変更前のコーパスに付与されている構文木から，
先に述べた方法で取り出した．
その結果を表\ref{tab:result_sdda}に示す．
ただし，「文節不一致」は文節区切りが正解と一致しなかった文の数を表す．

\begin{table}[tp]
  \centering
  \caption{係り受け解析の実験結果}
  \label{tab:result_sdda}
  \begin{tabular}{|r|r|r|r|}\hline
    \multicolumn{1}{|c|}{係り受けA型}
    & \multicolumn{1}{|c|}{係り受けB型}
    & \multicolumn{1}{|c|}{文正解率}
    & \multicolumn{1}{|c|}{文節不一致}\\\hline
    91.32\% & 89.61\% & 61.54\% & 9\\\hline
  \end{tabular}
\end{table}

表\ref{tab:result_sdda}より，意味情報を全く利用しなくとも，
PGLRモデルのみによる係り受け正解率が90\%前後と非常に高いことが分かる．
これは，Support Vector Machineや最大エントロピー法を用いた
文節係り受け解析の手法の正解率と同程度である
\cite{uchimoto:99,kudo:2002}
\footnote{使用しているコーパスや実験の条件が異なるため，
公平な比較ではない．}．我々は，
構文解析結果に対して意味解析を行うことを想定している．
現在，本格的な意味解析の代わりに，
SDSAの枠組みのみを利用して，単語の共起に関する統計データを用いた
小規模な係り受け解析の実験を行っているが，
非常に単純なスコア付けであるにも関わらず，
93.0\%の係り受け正解率(係り受けB型)，68.8\%の文正解率が
得られることを確認している\cite{yagi:2003}．
今回は評価用データを100文として実験を行ったが，
この規模は非常に小規模であるため，SDSAの有効性を示すには至っていない．
しかし，我々は，実験結果からSDSAによるアプローチが
有効である可能性があると考えている．
今後，
コーパスサイズを大きくし，
SDSAベースの本格的な意味解析への移行を検討する予定である．

\section{まとめ}
\label{sec:Conclusion}

多様な言語現象を扱える大規模な文法は，
構文構造付きコーパスから抽出することで構築可能であるが，
そのようにして抽出した文法を用いた構文解析は，
構文解析結果の曖昧性を極端に増大させることが多く，
実用に供されていないのが現状である．
本論文では，困難ではあっても曖昧性を増大させる要因を十分分析し，
文法やコーパスの変更を繰り返すことによって，
構文解析のための実用的な大規模文法を構築できることを示した．
これらの文法，コーパスの変更点は，
我々が本論文で扱ったコーパス特有の問題ではなく，
一般性を持つものである．
また，本論文では既存のコーパスに付与されている構文構造を変更しながら，
抽出した文法による構文解析結果の曖昧性の削減を図っているが，
新たに構文構造付きコーパスを作成する際には，
この方針がコーパス作成基準となる．
従来の構文構造付きコーパス作成基準は
抽出したCFGによる構文解析結果の曖昧性を十分に考慮していないが，
本論文で述べた方針に留意してコーパスを作成することで，
CFG抽出に適したコーパスを新たに作成可能であると我々は考えている．

本論文で述べた変更を施したコーパスから抽出したCFGで構文解析を行うと，
変更前のCFGを使用した場合に比べて，構文解析における曖昧性を
大幅に抑えることが可能であることを実験的に示した．
また，PGLRモデルによるスコア付けにより，
上位100位以内の構文解析結果に対する文の正解率が
10\%向上することを確認した．
さらに，生成確率が1位となる構文解析結果の文節の係り受けの精度は
90\%前後であり，既存の係り受け解析の手法と比較しても
同程度の精度を有していることを確認した．我々は，
SDSAの枠組みを利用し，共起情報を用いて係り受け解析を行うことにより，
小規模実験の段階ではあるが，93\%の係り受け精度が得られている
\cite{yagi:2003}．

今後の課題を以下に示す．
\begin{itemize}
\item 本論文で述べた変更方針で構文解析結果の曖昧性を大幅に抑制できたが，
  まだ十分ではない．例えば，日本語では助詞落ちが頻繁に出現するが，
  これを扱うことは曖昧性の増大につながる．省略されている助詞を
  前処理で補うべきか，意味解析で補うべきかを現在検討中である．
\item 我々の文法は，構文解析における曖昧性を抑えるために
  一部の構文構造を制限している．後処理として想定されている
  本格的な意味解析の手法の検討が必要である．
\item 本論文で述べたコーパスの変更方針では，
  形態素レベル(品詞レベル)の曖昧性を考慮していない．
  しかし，構文解析結果の曖昧性をさらに抑えるためには，
  形態素区切りの基準や品詞体系の見直しが必要である．
  現在，茶筌\cite{matsumoto:2003}の品詞体系を基に
  検討しているところである．
\item コーパスの作成や，変更方針の検討には複数の作業者が必要であり，
  さらに，その作業は長期間に及ぶため，バージョン管理が重要となる．
  そのために，コーパスをデータベース化し，検索システムや
  コーパス作成ツールを組み込むことで，
  コーパス作成のための大規模な支援システムを構築することが必要である．
\end{itemize}

\acknowledgment

この研究は，21世紀COEプログラム
「大規模知識資源の体系化と活用基盤構築」で行っているものである．
コーパス作成，修正において協力を頂いた
小林正博氏，大久保佳子氏をはじめとする
(株)日本システムアプリケーションの皆様に感謝致します．

\bibliographystyle{jnlpbbl}
\begin{thebibliography}{}

\bibitem[\protect\BCAY{Charniak}{Charniak}{1996}]{charniak:96}
Charniak, E. \BBOP 1996\BBCP.
\newblock \BBOQ Tree-bank Grammars\BBCQ\
\newblock In {\Bem the 13th National Conference on Artificial Intelligence},
  \BPGS\ 1031--1036.

\bibitem[\protect\BCAY{Church \BBA\ Patil}{Church \BBA\
  Patil}{1982}]{church:82}
Church, K.\BBACOMMA\  \BBA\ Patil, R. \BBOP 1982\BBCP.
\newblock \BBOQ Coping with Syntactic Ambiguity or How to Put the Block in the
  Box on the Table\BBCQ\
\newblock {\Bem American Journal of Computational Linguistics}, {\Bbf 8}
  (3--4), 139--149.

\bibitem[\protect\BCAY{Eisner}{Eisner}{1996}]{eisner:1996}
Eisner, J. \BBOP 1996\BBCP.
\newblock \BBOQ Efficient normal-form parsing for combinatory categorial
  grammar\BBCQ\
\newblock In {\Bem the 34th Annual Meeting of the ACL}, \BPGS\ 79--86.

\bibitem[\protect\BCAY{Inui, Sornlertlamvanich, Tanaka, \BBA\ Tokunaga}{Inui
  et~al.}{1998}]{inui:98}
Inui, K., Sornlertlamvanich, V., Tanaka, H., \BBA\ Tokunaga, T. \BBOP
  1998\BBCP.
\newblock \BBOQ Probabilistic {GLR} parsing: {A} new formalization and its
  impact on parsing performance\BBCQ\
\newblock \Jem{自然言語処理}, {\Bbf 5}  (3), 33--52.

\bibitem[\protect\BCAY{Jurafsky \BBA\ Martin}{Jurafsky \BBA\
  Martin}{2000}]{jurafsky:2000}
Jurafsky, D.\BBACOMMA\  \BBA\ Martin, J.~H. \BBOP 2000\BBCP.
\newblock {\Bem Speech and Language Processing}.
\newblock Prentice-Hall.

\bibitem[\protect\BCAY{Komagata}{Komagata}{1997}]{komagata:97b}
Komagata, N. \BBOP 1997\BBCP.
\newblock \BBOQ Efficient Parsing for {CCGs} with Generalized Type-Raised
  Categories\BBCQ\
\newblock In {\Bem IWPT 97}, \BPGS\ 135--146.

\bibitem[\protect\BCAY{工藤 松本}{工藤\JBA 松本}{2002}]{kudo:2002}
工藤拓\BBACOMMA\  松本裕治 \BBOP 2002\BBCP.
\newblock \JBOQ チャンキングの段階適用による日本語係り受け解析\JBCQ\
\newblock \Jem{情報処理学会論文誌}, {\Bbf 43}  (6), 1834--1842.

\bibitem[\protect\BCAY{黒橋 長尾}{黒橋\JBA 長尾}{1992}]{kurohashi:1992}
黒橋禎夫\BBACOMMA\  長尾眞 \BBOP 1992\BBCP.
\newblock \JBOQ 長い日本語文における並列構造の推定\JBCQ\
\newblock \Jem{情報処理学会論文誌}, {\Bbf 33}  (8), 1022--1031.

\bibitem[\protect\BCAY{黒橋 長尾}{黒橋\JBA 長尾}{1997}]{kurohashi:97}
黒橋禎夫\BBACOMMA\  長尾眞 \BBOP 1997\BBCP.
\newblock \JBOQ 京都大学テキストコーパス・プロジェクト\JBCQ\
\newblock \Jem{言語処理学会 第3回年次大会}, \BPGS\ 115--118.

\bibitem[\protect\BCAY{黒橋}{黒橋}{1998}]{kurohashi:1998}
黒橋禎夫 \BBOP 1998\BBCP.
\newblock \Jem{日本語構文解析システム {KNP} version 2.0 b6}.

\bibitem[\protect\BCAY{Marcus, Santorini, \BBA\ Marcinkiewicz}{Marcus
  et~al.}{1993}]{marcus:93}
Marcus, M.~P., Santorini, B., \BBA\ Marcinkiewicz, M.~A. \BBOP 1993\BBCP.
\newblock \BBOQ Building a Large Annotated Corpus of {English}: The {Penn
  Treebank}\BBCQ\
\newblock {\Bem Computational Linguistics}, {\Bbf 19}  (2), 313--330.

\bibitem[\protect\BCAY{Martin, Church, \BBA\ Patil}{Martin
  et~al.}{1987}]{martin:87}
Martin, W.~A., Church, K.~W., \BBA\ Patil, R.~S. \BBOP 1987\BBCP.
\newblock \BBOQ Preliminary analysis of a breadth-first parsing algorithm:
  Theoretical and experimental results\BBCQ\
\newblock In Bolc, L.\BED, {\Bem Natural Language Parsing Systems}, \BPGS\
  267--328. Springer-Verlag.

\bibitem[\protect\BCAY{松本, 北内, 山下, 平野, 松田, 高岡, 浅原}{松本\Jetal
  }{2003}]{matsumoto:2003}
松本裕治, 北内啓, 山下達雄, 平野善隆, 松田寛, 高岡一馬, 浅原正幸 \BBOP
  2003\BBCP.
\newblock \Jem{形態素解析システム『茶筌』 version 2.3.0}.

\bibitem[\protect\BCAY{日本電子化辞書研究所}{日本電子化辞書研究所}{2001}]{edr:
2001}
日本電子化辞書研究所 \BBOP 2001\BBCP.
\newblock \Jem{{EDR}電子化辞書2.0版仕様説明書}.

\bibitem[\protect\BCAY{野呂, 橋本, 徳永, 田中}{野呂\Jetal }{2003}]{noro:2003}
野呂智哉, 橋本泰一, 徳永健伸, 田中穂積 \BBOP 2003\BBCP.
\newblock \JBOQ 大規模日本語文法の開発\JBCQ\
\newblock \JTR\ TR03-0006, 東京工業大学大学院情報理工学研究科計算工学専攻.

\bibitem[\protect\BCAY{岡崎, 白井, 徳永, 田中}{岡崎\Jetal
  }{2001}]{okazaki:2001}
岡崎篤, 白井清昭, 徳永健伸, 田中穂積 \BBOP 2001\BBCP.
\newblock \JBOQ 正しい構文木の選択を支援する構文木付きコーパス作成ツール\JBCQ\
\newblock \Jem{人工知能学会 第15回全国大会}.

\bibitem[\protect\BCAY{白井, 徳永, 田中}{白井\Jetal }{1997}]{shirai:97}
白井清昭, 徳永健伸, 田中穂積 \BBOP 1997\BBCP.
\newblock \JBOQ 括弧付きコーパスからの日本語確率文脈自由文法の自動抽出\JBCQ\
\newblock \Jem{自然言語処理}, {\Bbf 4}  (1), 125--146.

\bibitem[\protect\BCAY{白井, 植木, 橋本, 徳永, 田中}{白井\Jetal
  }{2000}]{shirai:00}
白井清昭, 植木正裕, 橋本泰一, 徳永健伸, 田中穂積 \BBOP 2000\BBCP.
\newblock \JBOQ 自然言語解析のための{MSLR}パーザ・ツールキット\JBCQ\
\newblock \Jem{自然言語処理}, {\Bbf 7}  (5), 93--112.

\bibitem[\protect\BCAY{Tomita}{Tomita}{1986}]{tomita:86}
Tomita, M. \BBOP 1986\BBCP.
\newblock {\Bem Efficient Parsing for Natural Language}.
\newblock Kluwer Academic Publishers.

\bibitem[\protect\BCAY{内元, 関根, 井佐原}{内元\Jetal }{1999}]{uchimoto:99}
内元清貴, 関根聡, 井佐原均 \BBOP 1999\BBCP.
\newblock \JBOQ
  最大エントロピー法に基づくモデルを用いた日本語係り受け解析\JBCQ\
\newblock \Jem{情報処理学会論文誌}, {\Bbf 40}  (9), 3397--3407.

\bibitem[\protect\BCAY{八木, 野呂, 橋本, 徳永, 田中}{八木\Jetal
  }{2003}]{yagi:2003}
八木豊, 野呂智哉, 橋本泰一, 徳永健伸, 田中穂積 \BBOP 2003\BBCP.
\newblock \JBOQ 単語の共起情報を利用した文法主導の係り受け解析\JBCQ\
\newblock \Jem{情報処理学会自然言語処理研究会 2003-NL-157}, \BPGS\ 17--24.

\end{thebibliography}

\appendix

\section{文法作成の出発点として使用したコーパス}
\label{sec:Corpus}

本節では，我々が文法作成の出発点として使用した
構文構造付きコーパスについて述べる．

我々が使用したコーパスは，EDRコーパス中の文(約2万文)に対し，
人手で構文構造を付与したものである．
基本的な構造はEDRコーパスに付与されている括弧付き構造に準拠しているが，
単語区切り，品詞体系，構文構造それぞれについて，
元となるEDRコーパスと異なる点がある．

\subsection{基本構造}

\begin{figure}[tp]
  \centering
  \epsfxsize=\textwidth
  \epsfbox{Corpus/figure/edrtree_pos.eps}
  \caption{構文木を構成する3つの層}
  \label{fig:edrtree_pos}
\end{figure}

我々が使用したコーパスに付与されている構造は，
以下の3つの層に分かれている(図\ref{fig:edrtree_pos})．
\begin{description}
\item[第1層: ] 形態素と終端記号(品詞)を対応付ける層．
\item[第2層: ] 終端記号(品詞)をやや粗い品詞分類に変換する層．
\item[第3層: ] 実際の構文構造を示す層．
\end{description}

\subsection{単語区切りと品詞体系}

EDRコーパスで使用されている品詞は15種類しかなく，
比較的粗い品詞体系となっている．
しかし，これは構文解析を行うのに十分であるとは言えない．
白井らは，助詞と記号を，表層情報(形態素)を利用して細分化しているが
\cite{shirai:97}，それでも，まだ十分ではないと考えている．
そこで，EDR日本語単語辞書に記載されている品詞名，
左右連接属性(連接属性対)，用言のとる表層格情報を組み合わせることにより，
さらに細分化したものを第1層の品詞として使用している
(表\ref{tab:pos_example})．
ただし，「開講」等「する」を伴って動詞を形成するものは，
EDR日本語単語辞書では``JN1;JVE''という品詞が割り当てられているが，
我々が使用したコーパスでは``JSH''で置き換えている．
また，「(のぼり)はじめる」のように動詞に続く動詞や形容詞は，
補助動詞(JAX)としている．

\begin{table}[tp]
  \centering
  \caption{品詞の細分化の例(1)}
  \begin{tabular}{|c|c|c|}\hline
    単語 & EDRコーパス & 使用したコーパス \\\hline\hline
    れんが & 名詞 & JN1\_JLN1\_JRN1\_＊ \\\hline
    埋め込(む) & 動詞 & JVE\_JLV1\_JRVM\_cが-に-を \\\hline
    (埋め込)む & 語尾 & JEV\_JSVM\_JEE1\_＊ \\\hline
    と(格助詞) & 助詞 & JJO\_JL30C\_JR30C\_＊ \\\hline
    と(接続助詞) & 助詞 & JJO\_JL30S\_JR30S\_＊ \\\hline
    と(並列助詞) & 助詞 & JJO\_JL30H\_JR30H\_＊ \\\hline
    開講 & 動詞 & JSH\_JLN3\_JRN4\_cが-を \\\hline
    (開講)する & 語尾 & JEV\_JSV2\_JEE1\_＊ \\\hline
    (のぼり)はじめ(る) & 動詞 & JAX\_JLV9\_JRV1\_＊ \\\hline
  \end{tabular}
  \label{tab:pos_example}
\end{table}

\begin{table}[tp]
  \centering
  \caption{品詞の細分化の例(2)}
  \begin{tabular}{|c|c|c|}\hline
    単語 & EDRコーパス & 使用したコーパス \\\hline\hline
    (強め)てい(る) & 助詞/動詞 & JJP\_JL26S\_JRV1\_＊ \\\hline
    によって & 助詞/動詞/語尾/助詞 & JJ1\_JL48C\_JR26S\_hによって
    \\\hline
    において & 助詞/動詞/語尾/助詞 & JJ1\_JL48C\_JR26S\_hにおいて
    \\\hline
  \end{tabular}
  \label{tab:pos_example2}
\end{table}

EDRコーパスでは，「不安感を強めている」の「てい(る)」は
「て(助詞)」，「い(動詞)」の2単語に分かれているが，
我々が使用したコーパスでは，助動詞相当句として1単語としている
(表\ref{tab:pos_example2})．「によって」等の助詞相当句も同様である
\footnote{助詞相当句の左右連接属性は，左端の語の左連接属性と
右端の語の右連接属性で決まるので，格助詞「に」ではじまり
接続助詞「て」で終わる助詞相当句(「によって」，「にとって」等)は
すべて同じ品詞になってしまう．
そこで，これらを区別するために，形態素ごとに分類している．}．

EDR日本語単語辞書をもとにした品詞体系は非常に細かく，
実際にコーパスに出現した品詞だけでも600種類を数える
(存在し得る品詞を含めると優に1000種類を超える)．
この品詞の上に直接構文構造を付けると，
そのコーパスから抽出した文法規則が複雑になる．
そこで，品詞分類を粗くする層として第2層を設けている．
これにより，品詞分類が100種類程度に減少する．
本論文では，構文構造を図示する際，必要でない限り，
第1層の品詞を省略し，第2層の粗い品詞を終端記号とする．

\if0
粗い品詞分類は，以下のようになっている．
\begin{description}
\item[名詞: ] 「する」が直後に結合できるもの，助詞を伴なわずに連用修飾
  可能なもの等，機能ごとに分類するが，固有名詞等を分類しない．
  \begin{description}
  \item[(分類)] 普通名詞，数名詞，サ変名詞，連用名詞，形容名詞，
    連体名詞，形式名詞，形式連用名詞，形式連体名詞
  \end{description}
\item[動詞，形容詞: ] 語幹と語尾に分割されるが，動詞語尾と形容詞語尾の
  区別はしない．
  \begin{description}
  \item[(分類)] 動詞語幹，形容詞語幹，語尾
  \end{description}
\item[副詞: ] 基本的に用言を修飾するものであるが，
  「ほぼ全域」のように名詞を修飾するものもあり，これらを区別している．
  \begin{description}
  \item[(分類)] 副詞，陳述副詞，連体副詞
  \end{description}
\item[連体詞: ] 名詞を修飾するものであるが，「この」，「その」等は
  指示連体詞として区別している．
  \begin{description}
  \item[(分類)] 連体詞，指示連体詞
  \end{description}
\item[助動詞: ] 語幹と語尾に分けられるものは分け，それ以外のものは
  それぞれ別のカテゴリを与える．
  ただし，語尾は動詞，形容詞語尾と区別しない．
  受身助動詞，使役助動詞は格の交代現象を引き起こすため，区別する．
  \begin{description}
  \item[(分類)] 助動詞語幹，語尾，受身助動詞語幹，使役助動詞語幹，
    助動詞-た，助動詞-ます(その他多数)
  \end{description}
\item[判定詞: ] 名詞の後に結合して判断を表す助動詞「だ」，「です」，
  「である」は判定詞として助動詞と区別する．
  「だ」，「です」は語幹と語尾に分けられないが，語幹となっている．
  語尾は，動詞語尾，形容詞語尾，助動詞語尾と区別しない．
  \begin{description}
  \item[(分類)] 判定詞語幹，語尾
  \end{description}
\item[補助動詞: ] 「(のぼり)はじめる」のように，
  動詞の後に続く動詞や形容詞を補助動詞とする．
  \begin{description}
  \item[(分類)] 補助動詞語幹，語尾
  \end{description}
\item[助詞: ] 機能により分類する．格助詞のうち，
  動詞や形容詞の結合価成分を作るものに対しては，
  形態素ごとに分割したカテゴリを与える．
  \begin{description}
  \item[(分類)] 副助詞，連体助詞，接続助詞，準体助詞，終助詞，格助詞，
    格助詞$\backslash$が，格助詞$\backslash$を，格助詞$\backslash$に
    (その他多数)
  \end{description}
\item[接辞: ] 接尾語は，それが結合することによって形成される複合語の
  種類(品詞)によって分類される．
  \begin{description}
  \item[(分類)] 接頭語，接尾語/普通名詞，接尾語/連用名詞，
    接尾語/動詞(その他多数)
  \end{description}
\end{description}
\fi

\subsection{構文構造}

第3層の構造は基本的にEDRコーパスの括弧付けに従い，
各中間ノードに非終端記号を付与する．
ただし，
我々が使用したコーパスでは1つの中間ノードに複数の非終端記号を
縦に続けて割り当てることもあり，これにより，
コーパスから抽出した文法が非終端記号の置き換え規則を含むようになる．
例えば，「文法が」と「日本語文法が」という2つの句に対して，
\cite{shirai:97}の場合は図\ref{fig:labelling}(a)のような構造になり，
我々が使用したコーパスでは図\ref{fig:labelling}(b)のような構造になる．
(a)から抽出される後置詞句に関する文法規則は，
名詞句に助詞が結合する規則と名詞に助詞が結合する規則の2つになるが，
(b)から抽出される助詞句に関する文法規則は，
名詞句に助詞が結合する規則のみである
\footnote{白井らが「後置詞句」と呼んでいる句は，
我々が使用したコーパスでは「助詞句」と呼んでいる．}．
その代わり，名詞句を構成するまでの部分が深くなるが，
名詞や複合名詞から名詞句への置き換え規則を設け，
類似の規則をまとめることで，
句より上のレベルと下のレベルを明確に分けることができ，
構造や抽出した文法規則が分かりやすくなる．

\begin{figure}[tp]
  \centering
  \epsfxsize=\textwidth
  \epsfbox{Corpus/figure/labelling.eps}
  \caption{\protect\cite{shirai:97}との構文構造の違い}
  \label{fig:labelling}
\end{figure}

構造は基本的にEDRコーパスの括弧付けに従うが，
次の場合には括弧付けとは異なる構造を付与する．
\begin{description}
\item[法，様相を表す助動詞: ] 「そうだ」など法や様相を表す助動詞は，
  EDRコーパスでは文全体に付加する構造になっている．
  しかし，白井らは，曖昧性を抑えるため，
  文末の最後の要素に結合する構造にしている．
  我々が使用したコーパスも，同様の構造になっている．
\item[フラットな構造: ] 白井らも指摘しているように，
  EDRコーパスの括弧付けの中には，細かい括弧付けがなく，
  多くの要素を1つの括弧でまとめてしまうものがある．
  その場合には，さらに細かい構造を付与する．
\item[用言に結合する語尾，助動詞: ] 用言に複数の語尾や助動詞が
  結合する場合，
  EDRコーパスでは1つの括弧でまとめられているが，
  この部分は，左下がりの構造にしている(図\ref{fig:verb_struct})．
  この部分をEDRコーパスに従ってフラットな構造にすると，
  結合する助詞や助動詞の列のパターンだけ文法規則が必要となるが，
  こうすることで，少ない文法規則でより多くのパターンを
  カバーできるようになる．
\end{description}

\begin{figure}[tp]
  \centering
  \epsfxsize=.5\textwidth
  \epsfbox{Corpus/figure/verb_struct.eps}
  \caption{動詞に複数の助動詞が結合する場合の構造}
  \label{fig:verb_struct}
\end{figure}

\begin{figure}[tp]
  \centering
  \epsfxsize=.5\textwidth
  \epsfbox{Corpus/figure/case.eps}
  \caption{用言のとる表層格を考慮した構造}
  \label{fig:case}
\end{figure}

我々が使用したコーパス中の用言を表す品詞には，
それらがとる表層格の情報が付与されている．
その表層格の情報は，第3層の構文構造にも引き継がれ，
該当する助詞句によって打ち消される(図\ref{fig:case})．
これにより，二重ヲ格等の制約を取り入れることが可能になる
\footnote{本論文では，簡略化のため，説明において必要でない場合には，
表層格の情報を省略して図示することがある．}．


\begin{biography}
\biotitle{略歴}
\bioauthor{野呂 智哉}{
  1977年生．
  2000年東京工業大学工学部情報工学科卒業．
  2002年同大学院情報理工学研究科計算工学専攻修士課程修了．
  同年同大学院情報理工学研究科計算工学専攻博士後期課程進学，在学中．
  日本語構文構造付きコーパスと日本語文法の構築に関する研究に従事．
}
\bioauthor{橋本 泰一}{
  1999年東京工業大学大学院情報理工学研究科修士課程修了．
  2001年同大学院情報理工学研究科博士課程修了．
  現在，同大学大学院情報理工学研究科助手．博士(工学)．
  情報処理学会，言語処理学会，各会員．
}
\bioauthor{徳永 健伸}{
  1961年生．
  1983年東京工業大学工学部情報工学科卒業．
  1985年同大学院理工学研究科修士課程修了．
  同年(株)三菱総合研究所入社．
  1986年東京工業大学大学院博士課程入学．
  現在，同大学大学院情報理工学研究科助教授．
  博士(工学)．
  自然言語処理，計算言語学，情報検索などの研究に従事．
  情報処理学会，認知科学会，人工知能学会，計量国語学会，Association
  for Computational Linguistics，ACM SIGIR，各会員．
}
\bioauthor{田中 穂積}{
  1941年生．
  1964年東京工業大学工学部情報工学科卒業．
  1966年同大学院理工学研究科修士課程修了．
  同年電気試験所(現産業技術総合研究所)入所．
  1980年東京工業大学助教授．
  1983年東京工業大学教授．
  現在，同大学大学院情報理工学研究科計算工学専攻教授．
  博士(工学)．
  人工知能，自然言語処理に関する研究に従事．
  情報処理学会，電子情報通信学会，認知科学会，人工知能学会，計量国語学
  会，Association for Computational Linguistics，各会員．
}

\bioreceived{受付}
\biorevised{再受付}
\bioaccepted{採録}

\end{biography}

\end{document}

