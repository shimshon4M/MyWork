<?xml version="1.0" ?>
<root>
  <jtitle>候補間の表層的差異に着目した地名の所属国推定</jtitle>
  <jauthor>佐野智久延澤志保岡本紘幸鈴木宏哉	松原正樹斎藤博昭</jauthor>
  <jabstract>地名等の固有名詞は自然言語処理における未知語処理問題の要因の一つであり，これを自動的に認識する手法が盛んに研究されている．本稿では，地名の所属国を自動的に推定することで，未知語としてノイズの原因となる可能性のある地名語句に情報を与えることを目的とする．固有名詞である地名の認識では地名辞書が用いられることが多いが，辞書ベースの手法では，辞書未登録語の問題が避けられない．不特定多数の外国の地名も含めた所属国の推定の実現のため，本稿では，地名辞書や文脈情報を全く使用せず，地名の表層情報のみを利用して，地名の所属国を自動的に判別する手法を提案する．地名については，言語的な類似性や地理的要因によって所属国の判別が困難な場合がある．本稿ではこの点に着目し，所属可能性の低い国の除去による候補の絞込み処理と，所属可能性の高い候補の選択処理との組合せによって，再現率を高く保ったまま適合率の向上を実現した．</jabstract>
  <jkeywords>エリア推定，所属国推定，言語識別，固有名詞認識，多言語処理</jkeywords>
  <section title="はじめに">現在では，ウェブ上の文書をはじめとして，多種多様な文書に簡単にアクセスすることができる．ニュースやブログの記事にはさまざまな出来事が記述され，その中には数多くの地名が含まれている．地名等の固有名詞は辞書未登録語であることが多く，文書の自動処理における未知語処理の問題の主因の一つとなっている．地名は，人名や組織名等の他の固有名詞と比べてその要素に変動が少なく，詳細な辞書の作成が可能という特徴がある．地名については，地図作成や郵便業務等のため，どの国でも詳細な辞書が存在するため，これを利用することでその地名に付随する国や場所等の属性を得ることが可能である．しかし，文書中に出現する地名はその文書の記述言語を母語とする国の地名であるとは限らず，ニュース文書等にあっては理論上全世界のどの地名でも現れ得る．そのため，地名の特定にはすべての国の詳細な地名辞書を確認する必要があることとなり，これは，効率の面からも，辞書の記述方式や記述粒度の不統一の面からも，現実的であるとはいえない．外国も含めたエリア推定を行うには，(1)地名文字列の認識，(2)地名文字列の国推定，(3)地名文字列と場所との対応付け，の三段階の処理が必要である．例を挙げれば，(1)で``Sparta''という語を地名と認識し，(2)で所属国がギリシャかアメリカである可能性が高いと推定し，(3)でその文書中での``Sparta''がアメリカのウィスコンシン州の地名を指していることを示すとの手順である．このうち(1)の地名文字列の認識については固有名詞認識処理の研究が盛んに行われており，また(3)の地名文字列と場所との対応付けについては，前述の例のように複数の国に出現する可能性のある曖昧な地名を対象として，地名の辞書引きを行い文脈情報と照らし合わせて地名を特定する手法が主に研究されている．それに対して，(2)の地名文字列の国推定処理についてはほとんど研究されておらず，国がわからないため辞書引き対象とする辞書が特定できない場合には対応できていない．そこで本稿では，(3)の処理の前処理として，地名に対してその所属する国を十分に絞り込む手法を提案する．ここでの十分な絞込みとは，可能性のある国を三個以下に抑えることを意味する．``Sparta''という地名がギリシャとアメリカの両方にあるように，複数の国に同一の地名が存在する可能性があるなど，すべての地名について国を一意に絞り込むことは必ずしも正しいとはいえない．所属国候補の数を三個以下まで絞り込むことができれば，最終的な地名の判別は辞書ベースで行う等，他の手法との組合せによる精度の向上の実現が期待できる．本稿では，辞書を利用できない状況を想定しているため，地名の持つ表層情報のみを処理に用いる．これは，言語識別タスクの一つと位置づけることが可能であるが，地名は一般に二単語程度の短い単語列であり，利用できる情報が極端に少ないことが，通常の文章を対象とした言語識別と大きく異なる点である．</section>
  <section title="地名の持つ表層情報を活用した所属国推定">これまでの地名に対するエリア推定における場所との対応付け処理は，(i)地名辞書，(ii)文脈情報，(iii)地理的社会的情報，の三つの要素を組み合わせることによって問題解決を試みるアプローチが主流であった．このアプローチの問題点は，場所の特定を行うために必要な言語リソースをあらかじめ大量に準備しなければならないことにある．事前に用意した辞書から得ることができる情報を参照しながら，文書中で地名が出現する前後の文脈を考慮して地名と場所の対応付けが行われるが，複数の場所が候補としてあがる場合が多く，そのときには曖昧性の解消を行うことになる．機械翻訳等と同様に，このような地名の曖昧性の解消のために必要な詳細な情報を事前に用意しておく必要がある．また，地理的情報や社会的情報は付加的なものであり，この曖昧性解消に有効な情報を十分に収集することが困難な場合もある．このようなアプローチにおいては，文脈情報や付加的な情報を使うことが難しい場合には，地名辞書の中にその地名が載っているかどうかが，地名と場所の対応付けの精度を大きく決定づけることになる．これら三つの要素をなるべく使わずに地名と場所の対応づけを行うことができれば，少ない事前準備で，比較的簡単にエリア推定を実現することが可能となる．前述のような地名辞書や文脈情報，地理的社会的情報等を使わずに，地名の表層情報のみを用いて所属国を推定するために，Sanoらはn-gram情報等の地名の表層に現れる特徴に着目した分類器を用いた推定手法を提案している~．Sanoらは，SVMを二値分類器として使用し，ある地名が対象国の地名であるかどうかを判定することで，所属国候補を選び出している．Sanoらの手法は文字単位の統計情報のみを素性とするシンプルな手法であるにもかかわらず，実験の結果として最高で0.93，最低で0.69のF値を得ていることから，表層的な情報は地名の所属国推定に有用な特徴を有しているものと考えられる．しかし，地名文字列が所属国を特定するのに十分な情報を有していない場合には，ほとんどの国が候補として残ってしまう場合があった．これは，正しい所属国が候補から削除されてしまうことを避けるために適合率よりも再現率をより重視していることに起因している．その結果として，国によっては適合率が55.09%と低くなる場合があり，どんな国に対しても高い精度の推定が可能な手法の提案が課題となっていた．この問題を解決するためには，所属国推定の結果として候補の数が多くならないように，可能性の低い候補を見つけ出して除去する処理が必要となる．候補に正解を残したまま，候補の数を削減することが可能となれば，適合率を向上させることができる．そこで，本稿では，Sanoらの手法と同様に地名が持つ表層的な情報のみを利用して，所属する可能性の高い候補の推定処理に加え，所属する可能性の低い候補の除去による絞込み処理を行うことで，再現率と適合率の双方の向上を実現する手法を提案する．</section>
  <section title="所属国推定のための表層情報">本節では本稿で対象とする国の地名が持つ表層情報の特徴について述べる．ここでは，対象となる国の地名が含まれるコーパスから得られる情報を明らかにし，そこから読みとることのできる特徴を示し，表層情報を用いた所属国の推定を実現するために必要な手がかりを挙げていく．地名は一般的に，数単語から成るたかだか十数文字程度の文字列であるため，そこから得られる情報は決して多いとはいえない．しかし，人間には地名の所属国の推測が可能であることから，地名文字列から得られる表層的な特徴は所属国の推定を可能にする情報を有していると考えることができる．地名は，人名や組織名と比較して，その所属国に対する帰属性が高い．これは，地名そのものがその土地や言語，文化に密接に関連するものであるためである．つまり，ある特定の国に属する地名はある特定の特徴を共有し，それが文字列としての表層にも現れていると考えることができる．また，地名は文字列であるだけでなく，単語列であると捉えることも可能である．単語レベルの情報は，文字レベルの情報と比較して，より確度の高い情報をもたらすが，個々の単語の出現頻度が低いという点を考慮する必要がある．Sanoらは，ブロックとよばれる単位の頻度情報を用いてこの点に対処し，単語レベルで起こりやすいデータのスパースネスの問題を解決することで，所属国の推定の精度を向上させることができたと報告している．ブロックとは，一種の語頭や語尾であり，言語的特徴が地名の先頭や末尾に現れやすいという特徴を利用したものである．本稿では，地名の集合が持つ表層的な特徴を国ごとに抽出し，これを用いて所属国の推定を行う．表層的な情報のみを用いて所属国を推定する場合に必要な言語リソースは地名コーパスのみである．地名コーパスとは，国ごとに作成した地名リストを指し，その国に属する地名の集合である．本稿では，外国語文書中に埋め込まれた地名の所属国推定も想定しているため，字種情報が所属国の推定に影響しないよう，国に依らずラテン文字による記述とする．文字レベルの特徴は，約30種類の文字rttemberg''という地名は``LANDBADENWURTTEMBERG''として扱い，3単語22文字から成るものとする（空白も一文字と数える）．の並び方によって決定され，統計的な言語モデルを適用することで，特徴を定量的に扱うことができる．さらに，地名に含まれる文字数も一つの特徴といえる．本稿の手法は，地名コーパスを単に辞書引きの対象とするのではなく，地名コーパスから国ごとの特徴を抽出して処理を行うことで，地名コーパスに含まれていない地名に対しても所属国の推定を行うことを可能にするものである．これは，未知語処理の頑健性，柔軟性の向上に貢献するものと考える．また本稿ではラテン文字を処理対象として実験を行うが，本稿のアプローチは表層的な情報のみを用いているため字種に依存せず適用可能であり，その点で高い汎用性を持っているといえる．さらに，本稿のアプローチは地名コーパス以外の情報を一切必要としないことから，リソース準備にかかる人的労力や作業期間を大幅に軽減するものである．</section>
  <subsection title="地名コーパス">本稿では，ウェブ上で多く使用される言語とそれと類似性の高い言語の地名を中心に10ヶ国（中国，台湾，日本，タイ，ギリシャ，フィンランド，ドイツ，フランス，スペイン，アメリカ）を選択し，所属国推定の対象としている（表~）-0.5zw．本稿の実験では10の国それぞれに対して，10,000件ずつの地名データを無作為に抽出したものを地名コーパスとして用いている．コーパス全体に含まれる計100,000個の地名は，それぞれの国のなかではすべて異なるが，国の間での地名には重複するものがあり（表~），全体での異なり数は99,794である．地名の重複は，言語的に近いと考えられる，中国と台湾，フランスとスペインの間で他の組合せよりも大きな数値であるが，全体としては0.2%程度である．アメリカ以外のコーパスにも英語の単語が若干含まれており，例えば``富士山''はコーパス中では``FujiMountain''と記載されている．このような英語語句の利用は徹底されたものではなく，例えば``浅間山''は``Asamayama''と記載される等，現地の語句のラテン文字表記と英語を用いた表記とが混在している．</subsection>
  <subsection title="地名の長さ情報">地名を構成する単語数や文字数は国によって違いがある．さらに，各単語に含まれる文字数の分布にも違いがある．図~は各地名コーパスに含まれる地名の文字数と単語数の国ごとの差異を表すものである．一つの地名に含まれる平均単語数は，最も少ない国で1.1単語（フィンランド），最も多い国で2.9単語（タイ）であり，すべての国での平均単語数は1.9単語である．また，一つの地名に含まれる平均文字数は，最も少ない国で9.7文字（フィンランド），最も多い国で16.5単語（アメリカ）であり，すべての国での平均文字数は11.9文字である．このように，各国の地名は，地名を構成する単語数，文字数に差異が認められるが，その差異はこれだけで所属国の推定を行うには十分とはいえない．図~に国ごとの地名を構成する文字数の分布を示す．図~に示されるように，例えば，タイの地名のうち約68%の単語は3文字もしくは4文字で構成されている．また，フランスやスペインの地名は，2文字で構成される単語の割合が他の国と比べて高い．それに対して，フィンランドやドイツの地名のように，9文字や10文字で構成される単語が最も高い割合を示し，これらの国の地名は文字数の多い単語で構成されていることがわかる．このように，地名を構成する文字数にも，国ごとに特徴がある．しかし，文字数は同じ国のなかであっても地名間のばらつきがあり，この情報のみで所属国の推定を行うことは困難である．</subsection>
  <subsection title="文字出現頻度の情報">地名の所属国の推定は，言語識別の一種である．言語識別処理では，文字の出現頻度の情報が有効であることが知られている~．ここでは，文字の出現頻度情報の地名の所属国の推定での有効性を検証するため，国ごとのn-gram情報の比較を行う．表~は地名コーパス中に含まれる地名の文字単位のn-gramを取得した結果である．表中の`_'は空白文字を表し，ここでは一つの文字として扱っている．表~では，unigram，bigram，trigramの上位5つを示すとともに，各国について，10%以上の頻度を持つunigramの個数，3%以上の頻度を持つbigramの個数，1%以上の頻度を持つtrigramの個数を示している．表~から，中国と台湾の地名から得られるunigramの類似性が非常に高いことがわかる．この二つの国はunigramと同様にbigramの出現傾向も類似している．特に，`AN'と`NG'は両国で5%以上の出現頻度を示しており，両国の他のbigramの出現頻度と比べても高い値である．これは`ANG_'という文字列が両国に多く出現するためで，trigramについても`ANG'や`NG_'の値が両方の国で高くなっている．しかし，両国のn-gramの出現状況には差異も見られる．このことから，各国の特徴的なn-gram情報を活用することで，同じ言語グループに属する地名であっても，それらの所属国を区別することは可能と考えられる．スペインのbigram情報の上位は`A'`D'`E'`L'`_'の5種類の文字の組合せのみである（表~）．これは，スペインのコーパスに`MontesdeLeon'や`JerezdelaFrontera'等`DE'や`LA'，`DEL'といった冠詞や前置詞が多く含まれるためである．この傾向は，フランスの地名にも同様に現れている．このような冠詞や前置詞は一般に文字数が少なく，2文字や3文字の場合が多い．この特徴は，図~のフランスとスペインの地名を構成する単語数の分布にも現れている．また，表~から，unigramの比較では日本とギリシャの出現傾向が近いことがわかる．しかし，bigramで比較すると両国の類似性は高いとはいえない．これにより，unigramのみによる所属国の推定は難しいことが推測できる．中国と台湾のようにbigramを用いても区別が困難な場合もある．したがって，特定の統計情報を利用するだけでは所属国の推定には限界があり，これらを適切に組み合わせることが重要であると考えられる．地名コーパスは一般に言語資源としては小さく，trigramより大きなnでのn-gramはデータスパースネスの問題が顕著化する．例えば，ギリシャの場合上位5種類のtrigramを合計しても全体の出現頻度の4.57%しかカバーしておらず，最も高い出現頻度を持つ`OS_'でもカバー率は1.23%である．上位5種類のtrigramがカバーする割合が最も高い中国や台湾のコーパスの場合でも，上位5種類のtrigramの合計でそれぞれ10.27%，10.49%をカバーしているにすぎない．なお，中国や台湾は特定のn-gramが特に高い頻度で出現する傾向が見られ，1%以上の割合を占めるtrigramは中国コーパスには12個，台湾コーパスには11個含まれている．n-gramモデルの性能を評価する一つの指標として，各国のn-gramモデルのそれぞれの地名コーパスに対してのパープレキシティを表~に示す．各国のn-gramモデルは，対応する国のコーパスに対して高い性能を示しており，このn-gramモデルが所属国を推定するための情報を有していることが分かる．このパープレキシティの値は，対応する国に対してだけでなく，中国と台湾やフランスとスペイン等の間でも比較的小さな値となった．これは，これらの国を区別することが困難であることを示し，n-gramのみで所属国を判断することは，所属国の推定の精度向上に限界があることが分かる．</subsection>
  <section title="候補絞込みと候補選択の二段階処理から成る地名の所属国の推定手法">地名の所属国の推定では，(i)同一の地名が複数の国に存在する場合，(ii)地名文字列に類似した特徴を持つ国が複数ある場合に，地名の所属国候補を一意に絞ることができないことがある．前者は地名の曖昧性，後者は国の類似性と考えることができる．どちらの場合でも，該当する複数の国で高い所属確率を持つ地名が存在し，これらの地名に対しては該当する複数の国を候補として出力するのが妥当であり，複数の国を候補として出力することはシステムの精度を落とすものではない．それに対して，明らかに所属国である可能性が低い国は，出力に含まれるべきではない．単に複数の候補を出力するだけでは，再現率は得られても適合率は下がり，結果的にシステムの信頼性は落ちる．本稿では，再現率と適合率の双方の向上を実現するため，二段階の処理で所属国の推定を行う手法を提案する．本手法の処理の流れを図~に示す．本手法は，所属国の候補の絞込みの第一フェーズと，所属国の候補の選択の第二フェーズの，二段階で構成されている．本システムの入力は地名文字列である．まず，各地名文字列について，所属国の候補の絞込みフェーズで全10ヶ国から3ヶ国まで候補を絞り込む．この段階で，明らかに所属する可能性の低い国が候補から外される．このフェーズでは，文字単位のn-gram情報をベースとした生成確率を用いて処理を行う．次に，所属国の候補の選択フェーズでこの3ヶ国それぞれに対して所属の可能性を推定し，可能性があると推定されたものを所属国の推定結果として出力する．このフェーズでは，n-gramの他，長さ情報等も用いる．本システムの出力は，入力地名文字列が所属する可能性のある国であり，推定結果に応じて0〜3個の国名を出力する．</section>
  <subsection title="地名の生成確率を用いた所属国の候補絞込みフェーズ">人間による直感的な地名の所属国の推定が地名を構成する文字の並びを基にしているとすれば，~節で示したような地名に関する統計的な特徴を用いて所属国の推定をすることが可能である．本節では，地名の表層情報としてn-gramのみを用いて所属国の候補の絞込みを行うフェーズについて述べる．ここでは，地名を構成する文字の並びが与えられたときに，その文字列が生成される確率が最も高くなるような統計情報を持つ国を選択することで所属国の候補の絞込みを行う．n個の文字で構成される地名T_1^n=c_1c_nの国Aにおける生成確率P_A(T_1^n)をn-gram情報を用いて定義する（式~）．ここで，P_A(c_n|c_n-2c_n-1)は国Aにおいてc_n-2c_n-1の後にc_nが出現する確率を表している．文字単位のn-gram情報は，ModifiedKneser-Neyディスカウンティングを用いて，低次のn-gram情報を補間しながら平滑化を行っている．このとき，ある地名Tに対して，その生成確率P_A(T)が最大となるような国をその地名が属する国と推測し，それをA=_AP_A(T)とする．この定義によりn-gram情報のみを用いてAを推定した結果を表~に示す．所属国の絞込みフェーズの出力の上位1位の正解率と正解が一致した割合を表す．は平均で85.96%であった．表~に示されるように，単純なn-gramでの推定でも，約86%と高い正解率を得ることは可能である．この手法で正解率が最も高い国はタイで95.37%，正解率が最も低い国は中国で72.70%であった．中国と台湾の正解率が低いのは，~節で述べた両国のn-gramの類似性によるものと考えられる．地名の所属国の推定は，もともと同一の地名が複数の国に存在する可能性がある等，所属国名を唯一出力する形式は馴染まない．唯一の正解を判定するのではなく，所属国の候補を絞り込むことを目的とした場合，上位n個を候補として残すことで正解を所属国の候補から不適切に除去されるのを防ぎ，再現率を高めることができる．図~は，上位三個までを候補として残した場合の正解のカバー率（正解が出力された所属国の候補に含まれた割合）を表している．図~のTop1は上位一個のみ出力した場合のカバー率，Top2は上位二個まで出力した場合のカバー率，Top3は上位三個まで出力した場合のカバー率を示す．全体の平均で，上位二個までを候補とした場合，95.22%をカバーし，上位三個までを候補とした場合には，97.46%をカバーしている．上位三個までを選択した場合では，個々の国についても，最低でも96.03%，最高で98.38%の再現率を達成している．これにより，このフェーズで所属国の候補を上位三位までに絞り込むことで，98%程度の再現率を得ることができることがわかる．出力される所属国の候補の数を増やすことは，適合率を下げるだけでなく，可能性の低い国も候補に残るリスクがあるため，各地名に対して適切な所属国の候補を必要十分な個数だけ出力する必要がある．上位一つの国名のみを出力した場合でも，平均86%程度の正解率を得ることができるが，各地名に対する出力候補数の妥当性の判断が困難なため，98%程度の再現率を得るために，本フェーズではすべての地名に対して三つの所属国の候補を出力する．本手法では，このフェーズを二段階処理の第一フェーズとし，ここで3候補に絞り込んだ上で，第二フェーズである候補選択フェーズで所属国の候補それぞれに対して妥当性の検証を行う（~節）．ここで，本フェーズによる候補の絞込みの結果が妥当かつ有効であることを示す．10ヶ国の組合せは_10C_3=120通りであるが，図~で示したとおり，正解が絞込み後の3候補（120通り）に含まれる可能性はおよそ98%である．たとえば，中国と台湾が3候補に同時に残る場合に着目すると，この組合わせは8種類あるが，そのすべての組合せが120個中上位8位までに出力しており，この二つの国が同時に候補に残る可能性が高い．同じ東アジア地域である日本が3候補のなかに残る場合では，中国，台湾，日本の3ヶ国が候補として出力された割合は，正解が中国の場合で10.67%（3位），台湾の場合で11.17%（3位），日本の場合で13.71%（1位）であった．それに対して，中国，台湾，タイの組合せでは，正解が中国の場合では25.87%（1位），台湾の場合で30.68%（1位），タイの場合で12.76%（1位）の割合であり，中国，台湾，日本の組合せの場合よりも高い．これは，中国語圏の地名が中国，台湾，タイの3ヶ国に絞られる割合が高いことを示している．また，西ヨーロッパの国であるドイツ，フランス，スペインにアメリカを加えた4ヶ国が互いに候補として残る確率が高くなっている．この4ヶ国は同じ言語圏に属するものではないが，歴史的，文化的背景から，他の国と比べて類似した地名が多いものと推測できる．ここで，同時に候補に残りやすい中国，台湾，タイの3ヶ国をグループA，ドイツ，フランス，スペイン，アメリカの4ヶ国をグループB，どちらにも含まれていないギリシャ，フィンランド，日本の3ヶ国をグループCとして，3候補に残る国の組合わせに何らかの傾向がないかどうかを調べたものが図~である．図~では，絞込み候補の組合せを，グループAの国が二個以上出力された場合（カテゴリA），グループBの国が二個以上出力された場合（カテゴリB），グループCの国が二個以上出力された場合（カテゴリC），すべてのグループから1ヶ国ずつ出力された場合（カテゴリD）の4つに分けて示している．「AAB」は，グループAに属する国が二つとグループBに属する国が一つから成る所属国の候補が絞込み結果として出力された地名の割合を示し，グループAに属する国が二つ以上であることから，グループAに偏った出力としてカテゴリAに入れている．この実験では各国の地名コーパスに含まれる地名数は同じなので，絞込みが完全に成功した場合には，カテゴリAには30%，カテゴリBには40%，カテゴリCには30%が配分されるはずである．実際には，カテゴリAに26.77%，カテゴリBに46.98%，カテゴリCに18.74%が配分された．また，3グループからそれぞれ1ヶ国ずつ候補に残るような場合（カテゴリD）は全体の7.51%だけであり，それ以外は90%以上の割合でどれかのグループに偏った候補が出力されていることになる．このことから，比較的同時に候補に残りやすい組合せの存在がわかり，本フェーズが所属国の候補の絞込み処理として妥当かつ有効であることがいえる．</subsection>
  <subsection title="地名の所属国選択分類器を用いた所属国の候補選択フェーズ">~節の所属国の候補絞込みフェーズでは，文字の出現頻度情報のみを用いて，所属国の候補を3個まで絞り込んだ．本フェーズでは，絞込み処理後の候補を対象に，文字の出現頻度情報と長さ情報を素性として定義し，各国に所属する地名を学習することで，分類器を用いた所属国の選択を行う．分類器として用いるSVMは二値分類器であり，テストする対象となる地名がその国に属するか属さないかを判定する．このフェーズは，分類された結果からその地名が属する国の候補を選び出していくアプローチである．学習に用いる素性は，地名コーパスから得られる表層データ情報（~節）である．表層データは，大別すると，地名を構成する文字の並びの長さの情報と，文字の並びが出現する確率をベースとしたn-gram情報の二種類がある．地名を構成する文字の並びは，所属国によって特徴が存在する．素性として用いる長さ情報は，以下の4種類である．地名を構成する単語数地名を構成する文字数n番目の単語に含まれる文字数(1n16)地名に含まれるm文字の単語の数(1m32)節で述べたように，地名に含まれる文字数や単語数は国によってばらつきがあり，このばらつきが所属国を推定する手がかりとなり得る(FL1，FL2)．単に文字数や単語数の情報だけでなく，国ごとに単語そのものの特徴や単語の分布具合の情報も利用することができる．例えば，フランスの地名では``la''という単語が頻繁に出現するが，そのうち約半数が最初の単語として登場する．このように，単語によっては，その単語が出現する地名内での位置に特徴がある(FL3)．また，図~に示したように，タイの地名は他の国の地名と比較して3文字および4文字で構成される単語の割合が圧倒的に高い等，地名に含まれる単語の文字数も国の特徴となり得る(FL4)．また，素性として用いるn-gramの情報は，以下の3種類である．文字単位のunigram情報文字単位のbigram情報文字単位のtrigram情報n-gram情報は文字単位であり，空白等の記号も一つの文字としている．各素性の値Vは国Aのコーパスのn-gramの出現確率をベースに計算し，次のように定義する（式~）．cを長さn(1n3)の文字の並びとした場合，P_A(c)は国Aにおける文字列cが出現する確率，N(t,c)は地名tの中で文字列cが出現した回数を示す．素性の値は，n-gram情報と対象とする地名に依存しており，ある文字列のその国での出現しやすさと，その地名の中での出現しやすさを示している．ここでは，地名が所属する国を正例，それ以外の国を負例として，地名コーパスから各国の地名の特徴を学習したSVMを二値分類器として利用し，入力となる地名を対象国として分類するべきかどうかを判断する．対象となるp個の国の中から異なるq個の国を選び出し（_pC_q通り），選ばれたq個の国に対して所属国であるかどうかをそれぞれの分類器によって判定する．本フェーズでは，選ばれたq個の組合せごとに学習対象が異なるため，一つの組合せごとにq種類の分類器を用意する．本稿では，全体として10ヶ国を対象とし，絞込み処理によって3候補の組合せが選び出されるため，全体では360種類(_pC_qq=_10C_33)の分類器を用いている．表~に，グループAの3ヶ国（中国，台湾，タイ）について，この3ヶ国を対象に本分類器を用いて所属国の推定を行った結果を示す．ここでは，この3ヶ国の地名コーパスを5分割し，クロスバリデーションによる評価を行うことで，地名コーパスに存在しない地名を対象としたオープンテストとして所属国の推定の正解率を測った．グループAに属する3ヶ国のみを対象として学習した場合，表~に示したとおり，F値は最低で0.73，最大で0.95となった．正解が台湾の場合の適合率が59.87%と低いが，この場合でも再現率は93.71%であり，正解が候補として出力される確率は十分に高い．表~はグループBに属する4ヶ国を対象として，その中から3ヶ国ごとに対して分類器による所属国の選択を行った結果である．このグループでも，F値は最低0.75，再現率は最低で95.55%で，正解が候補として出力される可能性は十分高い．同様に，表~はグループCに属する3ヶ国を対象として分類器による所属国の選択を行った結果である．これらの結果から，同じグループに属する国の間での分類であっても，十分な正解率が得られることが示された．同じグループに属する国は他の国に比べて類似性が高いものであり，これらの間での分類が最も難しい部分となる．10ヶ国全体を対象とした学習では，類似性の低いもの同士の間の差異の特徴が強調され，類似性の高いもの同士の間の差異の学習は進み辛いが，本フェーズでは絞込み後の3ヶ国間の分類の学習を行うことで，類似性の高い国の間での所属国の選択の精度の向上を実現した．ここで，対象国の数による影響を調べるために，10ヶ国全てを対象として選択分類器を用いた場合の所属国推定の結果を示し，本フェーズの所属国の選択分類器の特徴を述べる．表~は，クロスバリデーションで10ヶ国すべてを対象として所属国の推定を行った結果である．全ての国の地名に対して90%以上の正解率を示し，全体でも93.54%の正解率を示した．表~は，この実験の結果について，地名に対する所属国の候補の中に正解が含まれているか否かとの観点で集計したものである．すべての国についてF値は最低でも0.7前後であり，F値が最大となるタイの地名に関しては0.93に達している．また，全体的に適合率よりも再現率の方が高い値を示している．低い適合率は不正解を誤って所属国の候補として分類するケースがあることを表している．所属国の推定タスクを考える場合，最も大きな問題は同じ言語を使用する複数の国の間での判別である．たとえば，中国や台湾では中国語を使用している．使用している言語が同一であったり類似性の高いものであったりする場合，異なる国であっても，地名を構成する文字の並びが持つ特徴は類似したものとなる．また，言語が異なる場合でも，地理的に近い国では，文化的，歴史的背景から，似た地名が複数現れる場合がある．地名コーパスから得られる特徴が類似している場合，所属国の推定は困難となるが，国によっては複数の公用語や先住民の言語が使われることによって所属国の推定するための特徴を見出せる可能性がある．図~と図~は，各国について選択分類器を用いて所属国の推定を行った結果として，中国または台湾が候補となった割合を示す．図~と図~に示されるように，中国と台湾の地名の所属国の推定では，どちらの地名も，互いを同時に候補に残す場合が多く見られ，逆に，中国と台湾以外の国が候補に残る可能性は低い．節で述べたように，中国の地名と台湾の地名ではn-gram情報で類似した特徴を持っている（表~）が，長さの情報に違いが見られる（図~）等，差異は存在する．10ヶ国での実験結果（表~）と比較して，中国と台湾のみの地名を用いて学習を行った選択分類器を用いた場合には，再現率を高く保ったままで適合率をあげることができている（表~，表~）．表~と表~の比較から，生成確率を用いた所属国の候補の絞込みと，選択分類器による精度の向上の組合せによって，再現率と適合率の両方を向上させることがわかる．10ヶ国で学習する場合と2ヶ国に絞って学習する場合では学習内容が異なり，10ヶ国での学習の場合では本稿の第一フェーズのような絞込みの意味合いが強いのに対して，類似の2ヶ国に絞って学習する場合ではその2ヶ国間での差異が強調される．本稿は，第一フェーズで候補の絞込みを行った上で，第二フェーズとして絞込み後の3候補のみを対象として学習した選択分類器を用いて候補選択を行うことで，地名の所属国の推定の精度を向上させるものである．</subsection>
  <subsection title="生成確率情報と選択分類器を組み合わせた地名の所属国の推定">本稿の提案手法は，~節の生成確率を用いた候補絞込み手法を第一フェーズ，~節の選択分類器を用いた所属国の候補選択手法を第二フェーズとした二段階の処理で所属国の推定を行うものである（図~）．表~に，~節の生成確率のみを用いた手法，~節の選択分類器のみを用いた手法，その両方を組み合わせた本提案手法のそれぞれについて，所属国の推定を行った結果を示す．生成確率のみを用いた手法ではF値は0.49と低いが，その主因は適合率の低さにある．生成確率のみを用いた手法は再現率が高く，このことから，本手法でこの手法を処理の第一段階の絞込みフェーズとして用いたことは妥当であるといえる．生成確率と選択分類器の両方を組み合わせた本手法のF値は0.83であり，選択分類器のみを用いた手法のF値0.74と比べて，向上を示した．両者の再現率にほとんど違いがないにもかかわらず，適合率は，生成確率と選択分類器を組み合わせることで，61.58%から74.08%へ向上しており，これがF値の改善に繋がった．選択分類器のみを用いた場合には，生成確率のみの場合と比べ，再現率は若干劣る．生成確率を用いた手法を絞込みフェーズとして用いた後に選択分類器を選択フェーズとして実行する本手法でも，再現率は選択分類器のみの場合とほぼ同じであり，絞込みフェーズの段階で再現率が98%程度に落ちることを考え合わせると，本手法の所属国の選択フェーズでの正解の脱落は十分少ないことがわかる．図~は，各国の所属国の推定結果を表している．生成確率と選択分類器を組み合わせた本提案手法（図中の黒丸）では，再現率が95.03%，適合率が74.08%であり，F値が0.83であった．生成確率のみの情報を用いた手法（図中の黒三角）では適合率が32.49%と低いが，再現率は97.46%と高くなっている．選択分類器のみを用いた手法（図中の黒四角）では，n-gramと長さの情報を用いることで適合率を61.58%に向上させている．図~では，国ごとに比較した場合でも同様の傾向が見られ，どの国に対しても効果を発揮する手法であることが期待できる．この結果は，正しい国を候補として残しつつも，正しくない国を候補から除去する能力を向上させたことを示している．これらのことから，複数の所属国の候補をまず可能性の高い所属国の候補のみに絞り込む第一フェーズと，絞込み後の候補のみに対象を絞って選択分類器に掛ける第二フェーズから成る本提案手法は，第一フェーズによる可能性の低い候補の除去と，第二フェーズによる類似している国の間の差異を用いた候補選択とがそれぞれ有効に働き，高い再現率を保ったまま適合率を向上させることができると結論付ける．</subsection>
  <section title="関連研究">言語の多様化にともなって，自動的に言語の識別を行うことの重要性が増してきている．その一つの背景には，ウェブの急速な成長にともなう英語以外の文書の増加がある．InternetWorldStatsによる近年のウェブユーザ数の言語別集計の結果によると，2008年現在では，依然として英語を利用するユーザが最も多く，それに続いて，中国語，スペイン語，日本語，フランス語を利用するユーザが多い．2000年からの言語別ユーザ数の増加の割合は，アラビア語，ポルトガル語，中国語，フランス語，スペイン語が大きな伸びをみせている．この調査結果は，用いられる言語の多様性が増していることを示しているといえる．また，ウェブ上の文書の内の半数以上は英語以外の言語で書かれているものであると同時に，一つの文書の中で複数の言語が使われていることもある．多種多様な情報元からの情報検索や質問応答，機械翻訳等，ウェブ上の膨大なデータを対象とした自動処理の実現においては，文書の使用言語の自動推定だけでなく，文書中に出現する固有名詞等の外国語の語句の的確な解析も，自然言語処理の応用分野における精度向上に大きな影響を与える要因となりうる．</section>
  <subsection title="統計情報を用いた言語識別に関する研究">言語識別の研究は，文書を対象としたものに限らず，音声認識や，文書イメージを対象にしたものもある．Sibunらは，文書イメージから抽出された文字の形状の統計的な分布を利用して言語識別を行った．彼らは，アルファベットの文字の形状を，ベースライン，ボトム，トップ，Xハイトの情報を使って分類し，文書中の文字をLinearDiscriminateAnalysis(LDA)を用いて分類した．2,000から3,000文字を含む23の言語の文書イメージを用いて文書を構成する言語を識別する実験を行った結果，90%以上の精度を達成している．Dunningは，ドイツ語の`&quot;u'やフランス語の`^e'等のアクセント記号を用いずに，5,000バイトのトレーニングコーパスと500バイトのテスト用テキストを用いた言語識別の実験で97%の精度を実現している．Dunningらは20バイトのテスト用テキストでも92%の精度での言語識別を実現し，短い文書や数単語で構成される句であっても，言語識別が可能であることを示した．Linsらは，文書中に含まれる複数の単語に対して各言語の辞書中での出現の有無を調べる手法で言語識別を行った~．Linsらは言語内で比較的種類が少ないとされている副詞，冠詞，接続詞，感嘆詞，数詞，前置詞，代名詞のみを辞書引きの対象とすることで，高速かつ汎用性の高い手法を提案している．Linsらはこの手法を用いて，ポルトガル語，スペイン語，フランス語，英語の文書（約1,000単語で構成される600の文書）を対象とした評価実験を行い，ウェブの文書でも80%以上，通常の文書では90%以上の精度を達成している．Martinsらは，ウェブページに特化した言語識別手法を提案した．Martinsらの手法は，n-gram（1から5）情報のプロファイル間の距離と，ウェブページ固有のヒューリスティクスを用いるものである．12の言語で各500ウェブページを用いた実験では，全ての言語で84%以上の正解を出したが，スウェーデン語とデンマーク語等の北欧の言語の類似性が若干の精度の低下をもたらしたことを今後の課題として挙げている．また，地名以外の固有名詞として人名に着目し統計情報を用いた所属国の推定を行う研究もある．Nobesawaらは，言語識別の手法を人名に対して適用することで，人名用の言語識別のためのシンプルなシステムを提案し，人名を属する国で分類することが可能であることを示した．この手法は，人名文字列の長さや，人名の文字単位のn-gramの情報を活用したものであり，9種類の言語圏の12の国に対して90%以上の精度を実現することに成功している．また，Nobesawaらは，英語の人名に対してSVMの分類器を用いた手法も提案している．</subsection>
  <subsection title="エリア推定に関する関連研究">地名のエリア推定の最終的な目標は，その地名が地球上のどの場所を示しているのかを判断することである．文章中の地名のエリア推定タスクは，一般に，(1)地名文字列の認識，(2)地名文字列の国推定，(3)地名文字列と場所との対応付け，の三段階の処理からなる．(1)の地名文字列の認識は固有名詞の自動抽出タスクに相当する．(2)および(3)は，地名文字列と地球上の場所との対応付けを行う処理である．本稿ではこのうち，研究のあまり進んでいなかった(2)の所属国推定を目的とし，その実現手法を提案するものである．(3)の地名文字列と場所との対応付けの研究では，あらかじめ対象ドメインや対象言語を制限することで，(2)の所属国の推定のステップを省略することが多い．したがって，本稿が対象とする所属国の推定の研究は，この地名文字列と場所との対応付けの研究を助け，その精度の向上に寄与するものと考えている．本節では，関連する研究として(3)の地名文字列と場所との対応付けを行っているものについて述べる．これらは，対象の地名が辞書に登録されていることを前提として辞書引きによって場所の候補を探しだし，複数の場所が候補として挙がる等の曖昧性がある場合には文脈情報等を用いてその判別を行うアプローチが一般的である．HauptmannとOlligschlaegerは，音声データを対象とした場所の判別を行う手法を提案している~．基本的には地名辞書に含まれる地名のみを対象としているが，同じ地名であっても複数の異なる場所を示す曖昧性がある場合には，同一の会話内に現れる他の地名の情報を活用することによって，その場所の相違を判断している．Hauptmannらの手法では，200のニュース記事に出現した357の地名のうち269の地名を正しく判別することができ，75%の精度を達成している．Hauptmannらは，正しく判別することができなかったものは，地名辞書に載っていなかったもの，曖昧性によるエラー，音声認識誤り等が原因であると報告している．また，Smithらは地名の曖昧性の解消に焦点を当て，文書中の地名の出現頻度の重心を利用した手法を提案した．これは，地名の出現頻度によって重みが付けられた地図上での重心を計算し，ある閾値よりも離れているものを枝刈りした上で重心を再度計算しなおすことで候補の曖昧性を解消しようとするものである．大きな地名辞書を使うことによって，再現率を高く保てるようにした上で，F値が0.81から0.96という結果を出している．しかし，この手法はその重心の付近を示すだけであり，重心のみを使用しただけでは頑健性に欠ける場合があると結論づけている．地名の曖昧性を解消するための手法として，Liらは，地名表現のパターンマッチングと重み付き地名の類似度グラフの探索，サーチエンジンを用いた地名辞書の補間の三つのアプローチを組み合わせる方法を提案した．地名表現のパターンマッチングでは，`cityof'+``地名''（``cityofVancouver''等）や``地名1''+`,'+``地名2''+`,'+``地名3''（``Boston,Massachusetts,USA''等）といった地名の周辺の表現のパターンを利用している．Liらは大きな地名辞書と地名表現のパターンマッチングを用いることで，93.8%の精度を実現した．Pouliquenらは，ヨーロッパのエリアに限定したマルチリンガルテキストを対象として，場所の判別の精度の向上を目指す手法を提案した~．この手法では，``And'',``To'',``Be''等の瀕出する単語と同形異義語であるような地名をgeo-stoplistとして抽出し，このような地名を候補から排除することで，精度の向上を図っている．また，それ以外にも場所の重要度，人名との区別，地名同士の物理的な距離の情報等を用いて曖昧性の解消を行っている．geo-stoplistに登録されている地名を候補から排除することで再現率は低下するが，F値で0.77という結果を示している．Cloughは，複数の地名辞書を用いた場所の判別手法を提案している．複数の地名辞書を優先順位を付けて検索し，stop-listを使って，各候補に対してスコアを与えている．このスコアは，地名表現の周辺の出現パターン，オントロジにおける階層の深さ，地名辞書の優先順位，ユーザのプリファレンスによって計算される．Cloughはイギリス，フランス，ドイツ，スイスを対象とした実験で89%の精度を達成している．Zongらは，ウェブページに対してそのページが記述しているエリアを判別する実験を行った~．アメリカに関する文書のみを対象とし，地名の周辺の出現パターンと地名同士の物理的な距離を利用することで，地名が32個以上199個以下だけ含まれるウェブページを対象に760の地名について実験を行い88.9%の精度を達成している．これらの関連研究のほとんどは，文書中に出現する地名を対象としており，文脈の情報を用いて地名の場所の判別を行っている．これらは，その地名がどんな文脈で出現し，同時に出現するその他の地名とどんな関連があるのかといった情報を積極的に利用する方法である．これらの手法の大きな特徴として，地名の認識および場所の判別に地名辞書を利用していることが挙げられる．地名を表記するときによく用いられるパターンや会話における局所性等の自然言語処理でよく用いられるヒューリスティクスだけではなく，都市の人口数，実際の二地点間の距離等の地理的な情報を活用しているものもある．このような辞書ベースのアプローチは，特定のドメインを対象とした処理の場合には高い精度で場所の判別を行うことが可能である．このように一般的な自然言語処理のヒューリスティクスが適用可能な情報元を用い，かつ，そのドメインに出現しうる地名が変化するスピードが遅く，辞書や地理的なデータの整備を十分に行える場合には，これらの手法は十分に適用可能である．しかし，全世界のすべての地名を網羅した地名辞書を整備することは現実的でない上に，情報元の多様化のスピードがますます加速している現在では，より頑健性の高い柔軟な手法が必要と考えられる．Rauchらは，知らない地名であっても人間はその所属地域をある程度推測可能であるという事実を背景として，表層的な統計情報をベースとしたシステムが有効であると主張している~．本稿は，Rauchらと同じ主張を共有し，具体的な実現手法を提案するものである．</subsection>
  <section title="おわりに">文書中に現れる地名の所属エリア推定処理は，未知語処理の観点からも，今後さらに重要になるものと考えられる．地名を対象とした従来のエリア推定では，対象となる地名が辞書に登録されていることを前提とするものが多く，利用する辞書への依存度が高かった．有名無名に関わらずすべての地名を対象としたエリア推定処理の実現のため，本稿では，地名辞書や文脈情報を全く使用せず，地名の表層情報のみを活用して，地名が所属する国を自動的に推定する手法を提案した．本手法は，表層情報としては文字単位のn-gram情報や長さの情報を使い，これらの特徴を画一的に扱った表層情報の学習と文字の出現確率を組み合わせることで，所属国の推定を実現するものである．本稿では，10ヶ国を対象とした評価実験で平均95.03%の再現率，74.08%の適合率を得，本手法の有効性を確認した．地名はたかだか十数文字程度の文字列であるため，そこから得られる情報は決して多くはないが，本手法では，候補の絞込み処理と候補選択処理とを適切に組み合わせることで，再現率を高く保ったまま適合率をあげることに成功した．同名の地名が複数の国に存在し得る等，地名の所属国には曖昧性があるが，本手法ではこれを考慮し，所属する可能性の高い国を最大3個までに絞り込む．所属国の絞込みができれば，地名辞書等の情報源や文脈情報等を活用して曖昧性の除去を行う従来研究を活用することができるようになる．本稿の手法は地名辞書にも載っていないような小さな場所の地名にも対応できる能力を持ち，高い頑健性をもった手法である．document</section>
</root>
