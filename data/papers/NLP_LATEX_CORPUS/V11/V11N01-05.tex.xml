<?xml version="1.0" ?>
<root>
  <title>用例ベース翻訳のための日英アライメント確信度と日本語類似度を用いた訳語選択</title>
  <author>荒牧英治黒橋禎夫柏岡秀紀田中英輝</author>
  <section title="はじめに">用例ベース翻訳とは，入力文と類似した用例をデータベースから探しだし，その用例を組み合わせて翻訳を行う手法である．この方式で実用的なシステムを動かすためには，構造的情報を持った翻訳用例を大量に構築することが必要である．このためには，大規模な対訳コーパスや高精度な構文解析が必要である．近年，高精度な構文解析は徐々に利用可能となってきたが，質のよい対訳コーパス(パラレルコーパス)の量は期待していたほど増加していない．一方，新聞記事や放送原稿などの両言語が内容レベルで一致している対訳コーパスの量が増えているのが現実である．このような対訳コーパスをここではコンテントアラインコーパスとよぶ．本稿では，コンテントアラインコーパスを用いて用例ベース翻訳を実現する手法について述べる．本手法では，まず，対訳コーパスの文・句アライメントを自動的に行い，その中の確信度の高い部分だけを対訳用例データベースとする．次に，入力文に対して，入力文と用例の類似度，および用例のアライメントの確信度に基づき翻訳に使える用例を選択する．最後に，用例を組み合わせることによって翻訳文を生成する．提案手法は対象とする言語ペアを特定しないが，日英対訳コーパスを用いたため，本稿は日英翻訳を中心にして述べる．本稿の構成は以下のとおりである．2章において，対訳コーパスから対応関係の確信度の高い部分だけ抜き出して用例を構築する方法を述べる．3章で，構築した用例ベース翻訳システムについて，用例の選択手法を中心に述べる．4章では，訳語選択という観点から行なった評価実験について述べ，5章に関連研究，6章でまとめを述べる．</section>
  <section title="用例の作成">用例ベース翻訳では，非常に短い文や，ドメイン依存のパターンで説明されるような文を対象とする特殊な場合を除いて，入力文が一つの用例だけで翻訳されるということは考えにくい．そこで，複数の用例を利用し，それらを組み合わせて翻訳文を作り出さなければならない．そのためには，入力文の構文解析が必要となるのは当然として，用例の両言語側の文も十分に構造化され，用例の言語間が適切な単位で対応付けられている必要がある．本論文では，句を最小単位として適切に対応付けられた対訳文を翻訳用例(TranslationExample,TE)とよぶことにする(図)．本章では，対訳コーパスを構造化，対応付けすることにより，このようなTEのデータベースを構築する方法を述べる．本研究で用いる対訳コーパスは直訳的なものではなく，自動的な対応付けには誤りが含まれるため，コーパス全体の自動解析結果を用例として用いることには問題がある．そこで，解析精度が比較的高いものだけを収集し，TEデータベースとする．</section>
  <subsection title="NHK対訳記事コーパス">table*table*本研究では，対訳コーパスとしてNHK対訳記事コーパスを用いた．これは，日本語記事がまずあり，それをもとに英語記事が書かれたもので，日英4万記事ペア(5年間分)からなる．1記事の平均日本語文数は5.2，英語文数は7.4である．表,に対訳記事の例を示す．NHKの対訳記事は，内容全体としては対応しているものの，直訳されて作成されているわけではなく，相手側言語に対応する表現がない場合がある．このような情報の過不足を，表,中では，ボールド書体で示している．この情報の過不足は，主に次の4つの要因で発生している．外国人向けの情報追加土地の所在地や歴史的な知識など，日本では常識的であるが，外国人には説明を要することがある．例えば，表では，``皇居で/attheImperialPalaceinTokyo''のように，皇居が東京にあるという情報を追加している．外国人向けの情報削除比較的重要性が低い箇所は英語記事では削除されることがある．例えば，表では，日本語記事の来年の予定に関する記述が，英語記事では省略されている．視点の差異日本語原稿においては原則的に日本を中心とした原稿作成が行われるのに対して，英語原稿では日本を重要視しない場合がある．例えば，表では，日本語記事では，日本以外の国がオリンピック出場権を獲得したかどうかは明らかにされないが，英語記事では``Japan,theNetherlandsandUkrainehavequalifiedfor...''と，3カ国の中の1国として日本が表現されている．報道時間のずれ時差や他の報道内容の都合上，英語原稿が放送される日付は，日本語放送のそれと異なる場合がある．このため，英語報道ではしばしば日付情報が付加される．例えば，表では，英語側で``onSunday''と日付情報が追加されている．また，日本語原稿が報道されてから，事態が進展した場合などは，英語原稿に追加ニュースが加わることもある．表では，日本語記事は女子バレーボールの試合結果を伝えているのに対して，英語記事は男子バレーボールの試合結果が追加されている．</subsection>
  <subsection title="文アライメント">まず，DPマッチングにより対訳文の文対応を求める．文対応の基本単位としては，日本語文と英語文の文数が1:1，1:2，1:3，2:1，2:2の文対応を考える(後述する実験で用いた評価コーパスで，これらの文対応の割合が全体の84%を占めた)．文対応のスコアは，その中の内容語で翻訳関係にあるものの割合，内容語対応率(WCR)を用いた．ここで，W_jは日本語内容語数，W_eは英語内容語数，W_dは翻訳辞書によって翻訳関係にあると判断された(両言語の)内容語数とする．利用した翻訳辞書は，EDR日英対訳辞書,EDICT(一般的な日英対訳辞書),ENAMDICT(固有名詞の日英対訳辞書)，アンカー日英対訳辞書，英辞郎である．これらの辞書にはのべ約200万語(句)の対応が記載されている．評価コーパスを用いて記事対応付けの精度を評価したところ，次の式で計算される適合率の値は60.7%であった．これを文対応の種類ごとにみると，1:1対応として対応付けられたものの適合率が最も高く，1:1対応だけについては適合率は77.5%であった．以降の処理においても1:1対応が最も扱いやすいものであるため，1:1対応として求まった対訳文ペアだけを以降の処理対象とすることとした．</subsection>
  <subsection title="句アライメント">次に，前節で求まった1:1の対訳文に対して，に基づく手法によって句アライメントをとる．句アライメントは次の3つのステップからなる．以上の処理によって，図に示すような句アライメントを行うことができる．句アライメントの評価のため，前節で文アライメント行なった評価データのうち1:1文対応(145文ペア)に対して，適切な内容語対応を人手で付与した．評価は，本手法で得られた句アライメントが，1つ以上の人手による対応を過不足なく含んでいる場合を正解，それ以外を不正解とした．この評価では，句アライメントの適合率は50%であった．この適合率と，対訳文における内容語対応率(WCR)の関係を調べたところ，図に示すように，WCRと適合率の相関関係が明かとなった．これに加えて，WCRと文アライメントの適合率についても相関関係がある．そこで，両方の適合率がともにほぼ上限に達するWCR0.3以上の対訳文をTEとすることとした．</subsection>
  <subsection title="TEデータベースの構築">前節で述べたように，NHKの日英対訳記事コーパスについては，自動的に文アライメント，句アライメントを行ったもののうち，1:1の文対応で，WCR0.3以上のものをTEとして用いることとした．表にWCRごとのTE数を示す．これに加えて，科学技術白書，経済白書の日英対訳コーパス，およびSENSEVAL2の用例を利用する．これらは，はじめから文対応がとれたものであり，両言語で対応する度合いが高く，本手法による句アライメントの精度も全体として高い(70%以上)ので，全体をTEとして用いることとした(表)．</subsection>
  <section title="用例ベース翻訳システム">figure*本研究の翻訳システムは，日本語文を入力とし，その英語翻訳文を出力する．翻訳対象の入力文は，まず構文解析を行い，句単位の依存構造に変換する．次に，構築したTEデータベースを用いて，各句(およびその周辺)を翻訳するのに最も適切な用例を選択し，その英語部分を適切に結合・表層化することにより翻訳文を生成する(図)．本節では，適切な用例の選択方法を中心に翻訳システムについて述べる．</section>
  <subsection title="TE片選択の考え方">TEとは，句(またはそれ以上)の単位で対応付けされた対訳文全体をさす．TEの中の一部分で，入力文中の句(またはそれ以上の大きさの部分)の翻訳に直接利用できるものをTE片とよぶことにする．この時，このTE片によって翻訳される日本語部分をI，TE片の日本語部分をS，TE片の英語部分をTと表すことにする(図)．このようなI，S，Tの間には，翻訳に用いるための当然のこととして，次の条件がかせられる．以下，これをTE片制約とよぶ．I，S，Tは，それぞれ依存構造上で連続している．I，Sは，その一番外側の付属表現を除いて，完全に一致する．Sの句とTの句はすべて過不足なく対応している(句アライメントされている)．あるIに対して，TEデータベース中にこのような条件をみたすTE片(S-T)が複数存在することが考えられる．本研究では，できるだけよいS-Tを選ぶために，I-S-Tの総合的な関係を次のように考慮することとした．I(=S)の大きさと一致度(付属表現は一致していない場合もある)Iの周りと，Sの周りの類似度．SとTのアライメントの確信度．以下の節でそれぞれの具体的計算方法を示す．なお，説明の都合上，IとSの句対応の集合をEQ，IとSの周り(隣接する句)の類似句の対応の集合をCONTEXT，SとTの句対応の集合をALIGNと表すことにする．</subsection>
  <subsection title="日本語対応の類似度">IとSの一致度は，その中の句対応(EQ)それぞれについて次の式によって一致度を計算し，その総和をとった_iEQ_iとする．ここで，#_contは句対応に含まれる内容語数，#_funcは機能語数，S_contは内容語間の一致度，S_funcは機能語間の一致度である．S_contとS_funcの計算方法は表にまとめる．これによって計算される全体の一致度は，基本的にIの句数(EQの句対応数)となるが，活用語，付属語などによって若干変化する．一方，Iの周りとSの周りの類似度は，その部分の句対応(CONTEXT)それぞれについて次の式によって類似度を計算し，その総和をとった_iCONTEXT_iに定める．上式は，基本的にはEQUALITYと同じ計算を行うが，S_connectによって類似部分と一致部分の接続関係を考慮している．ここでいう接続関係とは，KNPの出力する格解析結果と句に含まれる機能語と考え，格解析結果または機能語が同一である場合には類似部分の寄与が大きいと考えS_connect=1.0とし，格解析結果と機能語の両方が異なる場合はS_connect=0.5とする．例えば，``選挙までの(道のり)/学校までの(道のり)''は，機能語``までの''が一致しているため，S_connect=1.0と考える．また，``日本の(努力を)/アメリカが(努力する)''は，機能語は異なるが格解析結果が両方ともガ格となるため，やはり，S_connect=1.0と考える．最終的に，日本語対応の類似度(SIM_I,S)は，上記の2つの尺度をたしあせたもので次のように定める．</subsection>
  <subsection title="日英対応の確信度">日英対応(S-T)の確信度は，次の3つの要素から計算される．まず，S-Tに含まれる日英対応が，どの程度翻訳辞書で対応しているかを調べる．この情報は，日英対応の内部の整合性ということから，本稿では内的整合性とよぶ．ALIGNを構成する日英対応iの内的整合性の値(内的整合性_i)は，表で示される値とする．S-T全体の内的整合性は，その平均をとった次の値とする．次に，日英対応の周辺に他の日英対応が存在している場合は，その対応はより確かだと考えられる．これは，対応の外部の情報という意味で，外的整合性とよび，次の式で計算する．S-T全体の外的整合性は，その平均をとった次の値とする．最後に，S-Tが含まれる，TE全体の確信度を考える．これは，対訳文全体の内容語対応率(WCR)の値を用いる．以上の3つの要素を考慮して，日英句アライメントの確信度を，次のように定義する．wは内的整合性と外的整合性のどちらを重視するかの重みである．実験を行なった結果,w=0.8とした場合が良好な精度を示した．以上の式(5)の日本語対応類似度と，式(9)の日英句アライメント確信度を総合して，最終的に，I-S-Tのよさを次の式で評価することとする．table*</subsection>
  <subsection title="TE片の探索アルゴリズム">入力文の各句に対して(その句をPとする)，最もスコアの高いTE片を選択する．この探索は，次のアルゴリズムを用いる．Pと一致し，さらにその先の日英句アライメントのとれている，(すなわち節のTE片制約を満たす)TE片をTEデータベースから取り出す．Pに対して，多くのTE片がデータベースから発見される場合(現在，6つ以上の場合としている)は，高速化のための枝狩りを行う．これは，PとTE片の前後3文節の語を比較し，次の枝狩り用スコアの最高値の0.7倍を閾値として行う．[枝狩り用スコア=(一致する内容語数)+(一致する機能語数)0.2]得られた各TE片について，Pの周りに一致する句があるか，それらが日英対応のとれたものであるかを順に調べ，TE片制約を満たす最大のIの範囲を得る．そして，このI-S-Tのスコアを計算し，スコア最大のTE片をPに対するTE片とする．Pに対してTE片が得られない場合には，その内容語列を翻訳辞書で辞書引きし，得られた語をTEと同様に扱う．句の中に内容語が複数ある場合，辞書引きは句の前方から最長一致法で行う．また，翻訳辞書に複数の訳語がある場合は，ニュースコーパスでの頻度の高い語／句を採用する．このように入力文の各句に対してTE片を選択した上で，次に入力文全体をカバーするTE片の集合を選択する．本来的には，S-Tの関係も含め全体の整合性を考えて最適解を探索する必要があるが，現時点では貪欲法を用いている．すなわち，スコアの高いTE片から順に採用する．後から採用されるTE片について，それに対応するIの一部がすでに別のTE片によってカバーされている場合には，その部分は翻訳には利用しない．図中央に，このようなアルゴリズムによって選択されたTEとTE片の例をあげる．</subsection>
  <subsection title="翻訳文の生成">選択されたTE片の英語句同士を結合して英語文の依存構造を作成する．このとき，TE片内の句の依存構造は保存し，TE片間は，対応先の入力文句の親子関係にもとづいて結合する．図左下にTE片を結合した依存構造の例を示す．依存構造を表層化する際には適切な語順とする必要がある．この処理は，TE片内の語順は保存し，TE片間の順序は抽象化された規則によって決定する．このモジュールは，現在の翻訳システムではまだ試験的なものである．活用，冠詞，単数-複数の制御などは，現在の翻訳システムではまだインプリメントされていない．</subsection>
  <section title="実験と考察">評価のために，30文ペアを試験文とし，TEデータベース構築の際には利用せず，その日本語側を入力文として翻訳を行い，英語翻訳文を参考にして人手で評価を行なった．評価は，入力文の句単位で，適切な訳語／句が得られているかどうかを判定した．この際，接続詞や日付・数字表現(``三日'',``150人が''など)は評価の対象外とした．この結果，本手法の精度は，82.7%であった．用例選択のそれぞれの要素がどの程度の効果をもっているか調べるため，次の4つの手法を比較した．Eq_Context_Align:提案手法Eq_Align:提案手法で類似部分を考慮しないスコアを用いた場合．TE片は，式(10)の代わりに次の式で評価する．Eq_Context:提案手法で日英アライメントの確信度を考慮しないスコアを用いた場合.すなわち，TE片は式(5)のSIM_I,Sだけで評価する．Dic_Only:翻訳辞書で得られた語／句のうち，コーパス中でもっとも頻度の高いものを選んだ場合この比較実験の結果を表に示す．提案手法であるEq_Context_Alignが他の手法よりも高い精度であることから，提案手法が有効であることが分かる．また，日英対応の確信度を考慮しない場合(Eq_Context)の精度は低く，翻訳辞書による手法(Dic_Only)と同程度であることから，NHKニュースコーパスのようなパラレリズムの低いコーパスを扱う際には，日英対応の確信度が重要な尺度となっていることが分かる．提案手法(Eq_Context_Align)と翻訳辞書による手法(Dic_Only)を比較した結果を図に示す．提案手法は，日本語対応の類似度と日英対応の確信度の両方を考慮しているため，自然な訳語選択が可能となっている．例えば，図の最上部の例では，日本語対応の類似度が高いため，``(...で)開かれる''⇔``tobeheld(in...)''など自然な訳語選択が行えている．提案手法の不正解を分析してみると，TE片がデータベース中に少量しか見つからない場合が多い．この場合，見つかったTE片のスコアが低くても，これらの中からTE片が採用されることになり，不正解の原因となる．この問題を解決するためには，日英対応の推定精度を向上させ，誤ったアライメントの数を減らすことが必要であり，今後の課題とする．また，誤った日英対応を含むTEが存在した場合も，それらのTE片スコアが低いことを考えれば，TEの量が増加すれば自然と精度は向上すると考えられる．本研究で扱ったようなコンテントアラインコーパスの量は年々増加しているため，今後，問題の解決は容易になると期待される．				andEq_Context_Align		figure*</section>
  <section title="関連研究">用例ベース翻訳が最初に提案されてからしばらくの間は，実験的な翻訳システムによって用例ベース翻訳の可能性を示すという研究が多数行われた．最近の研究では，用例ベース翻訳を実用化することに焦点があてられ，制限されたドメインでの翻訳システムの構築が行なわれている．例えば，は，マニュアルドメインでの翻訳を行い，は，旅行会話の翻訳を行なっている．これらの研究では，翻訳は入力文と用例の入力文側との間の類似度だけを考慮して，用例を選択している．本手法のように，日英対応の確信度を考慮せずに用例を選択できるのは，これらの研究で扱っている対訳コーパスが高いパラレリズムを持っているからだと考えられる．一方，本稿ではコンテントアラインコーパスを扱っている．コンテントアラインコーパスは，パラレルコーパスに比べて入手しやすい対訳コーパスであるが，比較的自由な翻訳がなされるため，低いパラレリズムしかもたない．このようなコーパスを扱う場合は，本稿の実験が示すように，日英翻訳の確信度を含めた総合的な尺度を考えることが重要である．</section>
  <section title="結論">本稿では，内容レベルで対応のとれている対訳記事コーパスを用いて，用例ベース翻訳を実現する手法を提案した．この過程で重要な問題のひとつは，適切な翻訳用例を選択することである．本稿では，入力文との類似度と，日英対応の確信度を用いた新しい翻訳用例の選択手法を提案した．</section>
</root>
