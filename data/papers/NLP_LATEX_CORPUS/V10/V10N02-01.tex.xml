<?xml version="1.0" ?>
<root>
  <title>日本語レシピ文における時間的関係構造の自動生成</title>
  <author>林絵梨吉岡卓東条敏</author>
  <jabstract>本稿の目的は日本語の料理レシピ文における各事象の時間構造を特定し，隣接する事象間の時間関係を明確化することである．レシピ文は時間に沿った作業のシーケンスを述べたものであり，事象間の時間関係を示す典型でありながら，常識を排除して機械的に文章を読むと時間関係の復元が困難である問題があげられる．本研究の試みはアスペクト，すなわち各事象の時間的側面に着目し，そこから文章全体の時間関係を再構築することである．本稿ではイベント構造の概念を用いたアスペクト理論を用いることにより，アスペクトクラスを達成相，完成相，完了相，進行相の4つの型に分類する．さらに事象の隣接関係を明確化するために完成相，完了相の細分化を試みる．この細分化により進行や完了の関係，並行動作関係，終了時や開始時の前後動作関係を解析することが可能となった．またアスペクトを補助する情報として副詞句，省略動作，並行関係に着目し，事象の時間的な隣接関係を簡潔に表現することによって，文章全体の時間的な意味を限定した．以上の結果に基づき，料理レシピ文における時間的関係構造の自動生成システムを設計した．</jabstract>
  <jkeywords>アスペクト，イベント構造，レファランス，料理分野，解析生成システム</jkeywords>
  <section title="はじめに">人間は言語表現から各事象間の時間関係を推定し全体的な時間関係を把握する．しかしながら言語表現上には事象間の関係を明示する情報は希薄である．このため事象間の時間構造を理解するには，各事象の時間的な局面を手がかりにする必要がある．動作が保持する時間的な情報に対し，それが動きであるのか状態であるのかなどをカテゴリー分けしたものを動詞の持つアスペクトクラスという．各事象のアスペクトクラスを決定するには，構文上の文法形態といった統語論的な情報を手がかりにすることが考えられる．しかし日本語の助詞「た」や「〜ている」などの情報だけからアスペクトクラスの決定をすることは困難であり，事象が持つ時間的な情報を考察する意味論的な手法に頼る必要がある．本稿では固有の言語に依存せず，すべての事象に共通に存在すると仮定される時間構造を考え，この時間構造のどの部位に着目したかによりアスペクトを決定する．一般にはアスペクトクラスから事象間の時間関係を特定するのは困難とされている．そこで本研究では解析するターゲットの文章を料理のレシピ文とし，レシピ文に特化したアスペクトクラスを定義することにより，事象の時間関係の特定を期待する．レシピ文は機械的に読んだだけでは効率的な調理手順を正しく理解することが困難であること，また料理分野特有の表現や料理動作特有の時間的な特徴を持つという性質があげられる．このような問題を解決するためには，各料理動作が保持している時間的な情報の特定や，複数の料理動作の関係を明確にする必要があると考える．型の分類により進行や完了の関係を見い出し，並行動作関係，終了時や開始時の前後関係，さらに背後に仮定される明に記述されていない事象の発見，導入をめざす．解析結果をタイムマップとして表示し，事象群の進行を二次元的に表示する自動生成システムの構築を目標とする．本稿は本章を含め5章で構成される．次章では，アスペクト理論と料理分野における先行研究を示す．3章では，料理レシピ文における言語表現の分析を行う．この分析より，従来研究によるアスペクトクラス分類の問題点を指摘し，日本語の料理レシピ文に特化したアスペクトクラスを定義する．また隣接する事象間に対して，アスペクトクラス間の関係を分析する．さらにレシピ文の言語省略表現について言及し，省略動作の導入処理を提案する．4章では我々が構築した自動生成システムとその考察を示す．最後に5章では，本研究のまとめと今後の課題について述べる．</section>
  <section title="アスペクト理論">アスペクトとはある一つの事象に対する時間的側面を述べたものである．アスペクトクラスとは，各々の事象内部の時間構造およびその意味を示すものである．アスペクトは事象の時間的側面を進行形や完了形等といった構文上の形態によって解析することができる．このような事象の統語論的な研究として，Vendlerは英語のアスペクト分類に`state'，`activity'，`achievement'，`accomplishment'といった4種類の特徴を与えた．ここで`state'は状態を表し，例えば「座る」「夢中になっている」などの動詞が分類される．`activity'は動的な活動でありながら始点・終点が明示されない事象を表し「歩く」「カートを押す」等があげられる．`achievement'は瞬時的な出来事を表し「見つける」「閃く」等があげられる．`accomplishment'は「円を描く」「100,m走る」といったようなある時間ののち，その作業の到達点が明確に定義されているような出来事を表す．また日本語においては，特に動詞句の特徴を四つに分類し表面的な文法形態(ル形，タ形，テイル形，テイタ形)によりアスペクトの分類をしている．は，動詞句の時間的な特徴を5つの素性に分類し，それらの組合せによって6種類のカテゴリーに分け，アスペクト的な意味を与えている．または，動詞のカテゴリーを決定するために，格成分，副詞，アスペクト形式の関係から動詞のカテゴリーを絞り込んでいる．中でも副詞は動きのある部分に焦点を当て，その部分をより詳細に述べる働きをするとし，副詞の分類について言及している．一方，事象を意味論的に解析することによりアスペクトを決定しようとする研究も行われている．このようなアスペクト理論研究では，すべての事象に共通に存在すると仮定する時間構造(イベント構造)を考える．イベント構造とはアスペクトなど特定の視点を導入する以前の原始的な事象である．このイベント構造のどの部位に着目したかという着目点(レファランス)を与えたものがアスペクトであるという立場をとる．はこの立場の研究として，イベント構造を1つの点と3種類の区間に分割している．このイベント構造の関係を図に示す．ただし横軸は時間，縦軸は状態変化の度合いを表す．さらに，アスペクトとイベント構造内のレファランスについては，表にまとめる．本稿は日本語における料理レシピ文を対象とする為，最終的には構文上の特徴を用いる．しかし料理動作がどのレファランスに重きを置くかの考察に対しては言語に依存しないイベント構造の概念を用いて行う．料理分野を扱う研究としては，Karlinや植松が料理レシピ文を入力とする調理画像システムについて言及している．Karlinは料理分野を扱ったコンピュータアニメーション生成の研究において，9冊の料理本から約110個のレシピ文の分析をし，Moensらのアスペクト分類に従い料理分野に特化したアスペクトクラスについて言及している．Moensらのアスペクトは`CulminatedProcess',`Culmination',`Point',`Process'の4つに分類される．Karlinによれば，`CulminatedProcess'は，同じテンポで状態が続き，状態変化が起きる達成点が存在するとしている．この達成点が状態を変える誘因となる．また料理動作においてはどんな料理タスクも有限のプロセスが存在する為，必ず達成点をもつという特徴がある．したがって大抵の料理動作が`CulminatedProcess'に分類されるとしている．また，`Culmination'とは，話し手が新しい状態変化に伴ったと見なすことのできるイベントである．つまり時間の拡張を考えないプロセスであり，達成点のプロセスである．例えば「ポットにふたをする」等が挙げられる．さらに終点を含まない動詞は`Process'に分類され，この場合多くは副詞句によって動作期間が具体化されると論じている．例えば「かき回す」という料理動作はかき回し終わる情報がないため`Process'に分類される．ただし「10分間」といった副詞句が伴えばプロセスの終点が明確になる．このため`Process'に分類される多くは副詞句を伴うとしている．そこで本稿では，Karlinのアスペクト分類に従い料理動作を分析した．日本語料理レシピ本6冊，53個のレシピ文を対象にアスペクト分類を試みた結果を表に示す．調査結果から大抵のアスペクトクラスはKarlinの仮説どおり`CulminatedProcess'に分類されることは明らかであるが，`Process'に分類される料理動作は多くが副詞句を伴うとは言い難い．また料理動作の特徴として，動詞自体は終点を含まなくてもすべての料理動作は必ず終点を持つ．したがって動詞が終点をもたないからといって`Process'に分類してしまうと，終点をもつ`Process'の意味と終点を含まない動作進行中の意味の2つを同一のアスペクトクラスとして扱うこととなる．これら2つの事象は時間的な内部構造が異なるため，同じアスペクトクラスとして分類するのは問題がある．さらに完了の意味をもつ料理動作は，4つのアスペクトクラスに含めることができない．そこで本稿ではアスペクトクラスに対して次章に示すようなアスペクトの分類を定義する．</section>
  <section title="日本語レシピ文における時間的関係構造の提案モデル"/>
  <subsection title="イベント構造を用いたアスペクトクラス">本稿ではイベント構造の概念を用いて料理分野に特化したアスペクトクラスを定義する．のアスペクトクラスの定義に基づき，料理動作におけるアスペクトを完成相，達成相，進行相，完了相の4つに分類する．表に示した通り，完成相のレファランスの位置は動作区間および達成点である．また料理動作は有限プロセスであるため必ず終点をもつことから，動詞が終点を含まなくてもすべて完成相に分類する．達成相は達成点にレファランスが置かれる事象をさす．すなわち調理者が達成したと見なす動作プロセスであり，時間の拡張がないプロセスを指す．達成相は動作によって状態が成立しすぐに完了する．達成相に分類される動作は完成相に比べ大変少ない．また副詞句を伴うことが少ない特徴もある．進行相のレファランスの位置は動作区間のみであり達成点は含まれない．本稿では動作進行の意味と動作プロセスの意味を別の相で扱うこととし，進行相に分類される事象は前者の意味の動作をさす．進行相の特徴は直後に位置する動作と並行動作関係が成立する．また終点が含まれないため，動作進行の終了点は動作完了の表現によって示される．最後に完了相は動作の結果区間を表す事象が分類される．既に料理動作が完了している事象が完了相となる．しかし，完了相は動作の完了を表す動詞と状態の完了を表す動詞に分類することができる．本稿では前者を動作完了相，後者を状態完了相とする．動作完了相としては「熱した，煮込んだ」などがあげられ，状態完了相としては「香りが立ったら，透き通るまで」などがあげられる．動作完了相と状態完了相は，直後に位置する動作と前後関係が成立する．また状態完了相は，副詞句として動詞を修飾し動作期間を具体化する働きがあるとしているが，本稿では期間を表す副詞句としては取り扱わず状態に関する1つの事象として動作完了相同様に扱う．本稿では前章で利用したものと同じレシピ文53個を用いて，料理動作をここで提案するアスペクトクラスに基づき分類した．これを表に示す．表においてはほとんどの事象が完成相に分類されることがわかる．したがって本稿では，各事象のアスペクトクラスに詳細な特徴を持たせることにより，事象の隣接関係が明確になることを期待し完成相の細分化を試みた．ここでは細分化に際し，動詞の素性と料理動作毎の調理者の注目度を用いる．</subsection>
  <subsection title="完成相の細分化を反映したアスペクトクラス">によれば完成相に分類される動詞の素性とそのカテゴリーの特徴をみると2種類の分類が可能となる．1つは動作性，持続性，終結性，進展性の素性を持つ変化＋結果持続動詞，もう1つは動作性，持続性，終結性のみの過程＋結果持続動詞である．変化＋結果持続動詞とは，変化によってある状態が成立し，その結果が持続されるという意味の動詞をさす．このクラスに分けられる動詞は過程性がないので動作の展開や変化の過程を取り上げてはいない．また過程＋結果持続動詞とは，過程によって主体あるいは客体に変化が生じ，その結果が持続されるという動詞である．また料理動作には，調理者が常に注意を払う必要のある動作，常に注意を払う必要はなく時折注目すれば他の動作を行っても構わない動作の2つが存在する．こうした分類は本来のアスペクトクラスとは無関係のものである．しかしながら本研究の目的は時間関係の導出であり，本来のアスペクト情報を補助する情報を定義できれば，それによってより良い分析結果を得られる可能性がある．したがって本稿では，主眼をおく動作，主眼をおかない動作を区別し，完成相の分類に加えることとする．主眼をおく動作としては「切る，加える，揚げる」などがあげられ，主眼をおかない動作としては「ゆでる，加熱する，冷やす」などがあげられる．動詞の素性と調理者の注目度を考慮することにより，完成相の細分化を試みた．完成相の分類結果を表に示す．完成相を細分化することにより，完成相Cは並行動作を示唆する可能性があるという結果が得られた．事象の時間的な情報を詳細に考察することによって，効果的なアスペクトクラスを定義することができた．アスペクトクラスと特徴，料理動作例を表にまとめる．本稿で提案するアスペクトクラスはイベント構造の概念により分類されている．すなわち構文上の形態を考慮する必要はないが，日本語を対象とした自動生成システムの作成も目的としているため，語尾形式に対しても同時に注目した．</subsection>
  <subsection title="アスペクトクラスの隣接関係">この節では前節で提案した事象のアスペクトクラス間にどのような隣接関係が導きうるかをの研究を参考に分析する．前後関係~~動作完了相に分類される事象および状態完了相に分類される事象で「タ」「タラ」を承接する場合，動作完了相，状態完了相の終了点と直後に位置する完成相および達成相の開始点が一致する前後関係が成立する．事象関係の例を図に示す．終点同一関係~~状態完了相に分類される事象で「マデ」を承接する場合，状態完了相の終了点と直後に位置する完成相および達成相の終了点は同一である関係が成立する．またある事象(状態)が起っている場合，必ずそれよりも広い時間帯である別の事象が起っており並行関係も成立する．事象関係の例を図に示す．並行動作関係~~進行相とその後ろに位置する事象には並行動作関係が成立する．ただし調理者の動作と材料の形状状態に並行関係が存在する場合と調理者が並行して動作をしているという場合がある．事象間の各関係には依存関係があり明確な境界が存在するわけではなく，複数の関係をもつ事象が存在する．事象関係の例を図に示す．</subsection>
  <subsection title="アスペクトを補助する情報の処理">本稿では事象の時間的な意味を詳細に考察することによりアスペクトクラスを定義し，それらの隣接関係を分析した．しかし料理分野における隣接関係をアスペクトクラスだけで決定するのは困難であり，アスペクトを補助する情報として副詞句，省略動作，並行動作について注目してみた．副詞句料理動作は，動詞を修飾する副詞句によって具体的に状態や期間が特定される．本節ではこれらの副詞句について特徴を分類し，アスペクトクラスとの関係を考察した．本稿では植松の研究にならい状態に関する副詞句と期間に関する副詞句に分けた．ただし本稿では，材料の形状を表す表現も1つの動きと見なし事象として取扱う．本稿で提案するアスペクトクラスと副詞句の共起関係についての調査結果を表に示す．用いた料理レシピ文は前章同様のものを対象としている．この調査結果を基に副詞句によるアスペクトクラスの変化について考察した．その結果，完成相Bと完成相Cに対してアスペクトクラスが変化する場合が一部で存在していた．具体的には「さっと，手早く，すばやく」といったような時間の短い期間を表す表現の副詞句を伴った場合である．このような場合，アスペクトクラスが完成相Cから完成相Bへと変化する．例えば「ゆでる」は完成相Cに分類されるが「さっとゆでる」は完成相Bに分類される．省略動作料理のレシピ文は動作全体を包括して指し示していることが多い．1つの表現の中に省略された複数の事象が存在する場合を本稿では動作のパッケージ化とよぶ．例えば「茹でる」という動作には「鍋に水を入れる」「火にかける」「材料を鍋に入れる」といった動作が省略されている．我々は予めパッケージ化される動作の知識をシステムに保持させることとした．また完成相もしくは達成相としての動作がレシピ文中に書かれること無く，それらの意味を含め動作完了相によって事象の存在を表している場合がある．例えば「刻んだ葱を入れる」という表現だけがある時「入れる」前に「刻む」処理が必要であることを明示する必要がある．すなわち動作完了相の事象が存在する時点で既に動作は完了しておく必要がある．そこで本稿では，この表現されていない動作を発見し料理動作として導入する．導入箇所については動作完了相の直前に導入することとした．並行動作レシピ文の中には並行的に調理を行うことを表す表現や，レシピ文中に並行動作が表現されていないけれども，実際には並行動作が可能である場合がある．並行動作を表す表現としては，語尾形式がテイル形である進行相が存在する場合，完成相Cに分類される動詞が存在する場合，電子レンジやオーブントースターといった一部の料理道具を利用する動作が存在する場合があげられる．</subsection>
  <section title="時間構造の自動生成システム">本稿で分析した料理レシピ文の言語表現の特徴に基づき，時間構造の自動生成システムを構築した．まず入力文である料理レシピ文からタイムマップ生成に必要な情報を抽出する．本稿ではこの抽出した情報を保持したものを中間表現とよぶ．次に中間表現に含まれている情報を基に各事象にふさわしいイベント構造を呼び出しタイムマップを生成する．そして最終出力画面としてタイムマップ表示の他にレシピ本文，材料分量表，完成写真，料理動作の説明等の付加情報を添付しブラウザ上に表示する．システムの処理過程を図に示す．*-10mm</section>
  <subsection title="料理レシピ文から中間表現の生成">中間表現の生成は最終出力画面の基盤となる．最終出力画面を生成するにあたり必要となる情報は「材料，料理道具，料理動作，副詞句，助詞，料理動作のアスペクトクラス，調理者の注目する箇所，省略されている動作」である．材料，料理道具，料理動作，料理動作，副詞句，助詞は，料理レシピ文から直接取り出すことが可能である．それに対し各料理動作のアスペクトクラス，調理者の注目する箇所，省略されている動作に関する情報は料理レシピ文内に言語表現されていない為，直接抽出することはできない．抽出可能な情報に対しては入力文である料理レシピ文に対して，日本語形態素解析システムJUMANと日本語構文解析システムKNPにより解析を行う．解析結果から，品詞(名詞，動詞，副詞，助詞)，見出し語，接尾辞の情報を取り出す．接尾辞は承接する語尾形式情報として利用する．抽出された各文節はシステム内に保持される品詞辞書と照合し「材料」「料理道具」「料理動作」「副詞句」を特定する．次に抽出不可能な情報に対しては，各事象に対し動詞と承接する語尾形式(アスペクト形式)の特徴からアスペクトクラスを特定する．その特定アルゴリズムを図に示す．図に示される処理1，2，3，4は予め料理動作の辞書として保持する．それに対し進行相や完了相を表す事象は辞書内に含まれていないため，処理5，6，7で示すとおり承接する語尾形式情報を基に各事象のアスペクトクラスを特定する．</subsection>
  <subsection title="中間表現からタイムマップ生成までの処理">タイムマップは中間表現の情報に基づいて生成される．中間表現から料理動作，形状変化を取り出しアスペクトクラスの型にあった構造をタイムマップに出力する．出力する二次元表示のタイムマップはx軸が「調理者の注目箇所」y軸が「時間」である．各事象は実線で表示され事象の進行を示す．出力する形態はアスペクトクラスの型によって出力表示が異なる．各々のアスペクトクラスの型による出力構造を図に示す．またタイムマップ上ではレシピ文に書かれる事象ばかりでなく，隣接する事象のアスペクト関係や省略されている動作に関しても表示する．事象の前後関係~~状態完了相「〜たら」は動作の始点を示す条件である．状態完了相を表すイベント構造の終点部分と状態完了相で修飾されている動作のイベント構造の始点部分点線で結び表示する．事象の終点同一関係~~状態完了相「〜まで」は動作の終点を示す条件である．状態完了相を表すイベント構造の終点部分と状態完了相で修飾されている動作のイベント構造の終点部分を点線で結び表示する．並行動作関係~~進行相は後ろに位置する事象と並行関係をもつ．並行動作を表す為には，複数の動作の出力構造の動作進行部分が重なる必要がある．省略動作の導入~~完了相のみの表現で動作を導入する場合，導入される動作は修飾されている動作の直前に位置している．しかし実際には動作完了相よりも前に位置していれば問題は無い．そこで導入された動作はイベント構造の色を変えて表示する．</subsection>
  <subsection title="最終出力画面について">ユーザーフレンドリーなタイムマップ生成を目標に，料理する上での基本情報，各料理動作における詳細な情報なども同時にブラウザ上に表示することとした．各料理動作における詳細な情報の項目はタイムマップと隣接する別のウィンドウによって表示する．タイムマップの任意のイベント構造にマウスカーソルを移動すると，隣接したウィンドウの表示が変化するようにする．以下のレシピ文に対する最終出力画面を図に示す．選定した料理レシピ文(1)スパゲティーはお湯でゆでる．(2)ゆでている間に，ニンニクは薄くスライスする．(3)熱したフライパンにオリーブオイルを入れ，ニンニクのスライスと唐辛子を入れる．*6mmニンニクがキツネ色になるまで炒める．(4)スパゲティーがゆであがったら，すばやくお湯をきる．(5)フライパンにスパゲティーを入れ，軽く炒めて，塩，こしょうで味を調えてできあがり．</subsection>
  <subsection title="提案アルゴリズムの妥当性">本稿で提案するアスペクトクラスに対する分析結果を表に示す．表によると全体の再現率，正解率は高い．これは料理レシピ文の承接するパターンが少なく，かつ動作の進行や完了の表現が限定された特徴を持つということに起因している．しかし本稿が提案したモデルにより取り出せないアスペクトクラスも存在する．この原因は料理特有の表現をもつ動詞と材料の状態を表すものに大別される．料理特有の表現をもつ動詞とは，例えば「炒め合わせる，溶き入れる，戻し入れる」などの動詞をさす．本来ならばこれは1つの動作であると考えられるが，形態素解析を行う上で2つの事象として取り上げられてしまう．したがって「回し炒める」ならば「回す」「炒める」と解析される．そこで，このような料理特有の表現をもつ動詞においては修正処理を行い2つの事象として取り出された動詞を1つの事象に修正し解決している．また材料の状態を表すものが動作完了相の再現率に影響している．例えば「ぬれたままの，丸く重ねた状態で」などの状態表現では「ぬれる」「重ねる」が動詞として取り上げられ，また「タ」形を含むため，動作完了相として誤認識してしまっている．これに関しても上記と同様，修正処理により解決をした．結果として本システムは料理レシピ本の著者による言語表現形態や形態素解析，構文解析システムの解析結果に大きく依存する性質が見られた．</subsection>
  <section title="おわりに">本稿では自然言語文から各事象の内部的な時間構造を解析し，各事象の時間的側面や事象間の時間的関係構造の分析を行った．自然言語文として料理のレシピ文を対象とし，事象間の時間的構造を可視化したタイムマップの自動生成システムを実装した．まず料理レシピ文を分析し，料理分野における事象の型を達成相，完成相，進行相，完了相の4つに分類し完成相，完了相をさらに細分化させた．この提案したアスペクトの型から隣接する事象のアスペクト関係を分析し，事象間の前後動作関係，終点同一関係，並行動作関係を導き出した．他の文章との時間関係は表面的な情報から容易に解析できないとされているが，1つの事象を特定し隣接する事象とのアスペクト関係を分析することによって，事象間の時間的な意味を限定させる可能性が見られる．またこれらの分析に基づいて言語情報から二次元のタイムマップを自動生成した．タイムマップの生成に必要となる情報を分析し材料，料理道具，料理動作，副詞句，アスペクトクラス，注目箇所，省略動作について明示した．材料，料理道具，料理動作，副詞句といったレシピ文から抽出できる情報はシステムが保持する辞書を参照し詳細な情報をシステムに認識させた．またアスペクトクラスは，承接する語尾形式と動作の辞書内のアスペクト情報を基に決定アルゴリズムを提案した．注目箇所に関しては材料もしくは道具と承接する助詞により調理者が注目しているところを特定させた．省略動作の発見導入に関しては，3つの場合に分けることができ各々の場合に分けた導入処理を行った．これらの情報を中間表現としてまとめタイムマップを生成した．さらにユーザーを考慮したインターフェース構築として，タイムマップの他に材料分量表や料理完成写真，料理特有動作説明等の詳細な情報を付加した最終出力画面を生成した．しかし本システムは料理レシピ本の著者による言語表現形態や形態素解析，構文解析システムの解析結果に大きく依存するものとなっている．今後の課題としては，各事象の複雑な時間関係の表示に対応できるようなシステム構築である．本稿が取り上げた関係は実世界における事象関係の一部分にしかすぎないため，隣接する事象関係の分析や文脈に依存する事象関係の分析をすることにより始点や終点の曖昧性を解消する必要がある．また本稿では，タイムマップ内に表示される事象の出力形態をアスペクトの型により決定しているため事象固有の時間構造の出力を考慮する必要がある．さらに汎用性のあるシステム構築を目指すために，多くのレシピ文を分析し出力画面にアニメーションを含めるなど効果的なインターフェース構築が課題としてあげられる．document</section>
</root>
