<?xml version="1.0" ?>
<root>
  <jtitle>shWiiFitReduceDependencyParsing</jtitle>
  <jauthor>浅原正幸</jauthor>
  <jabstract>本稿では係り受け構造情報のタグ付けの一貫性について考える．係り受け構造には，統語的制約により一意に決まる構造と選択選好性によるタグ付け作業者に委ねる構造がある．多くの場合，統語的制約を優先してタグ付けられるが，選択選好性に影響され誤ってタグ付ける例が多々ある．このような事例について誤り傾向の差分を評価するために，ゲームを用いた新しい心理言語実験手法を提案する．埋め込み構造によるガーデンパス文を用いて13</jabstract>
  <jkeywords>係り受け解析，コーパス，統語的制約，選択選好性</jkeywords>
  <subsection title="人間の係り受け解析判断 "/>
  <section title="はじめに">言語解析器の作成時，タグ付きコーパスを用いて構造推定のための機械学習器を訓練する．しかし，そのコーパスはどのくらい一貫性をもってタグ付けられるものだろうか．一貫性のないコーパスを用いて評価を行うとその評価は信頼できないものとなる．また，一貫性のないコーパスから訓練すると，頑健な学習モデルを利用していたとしても解析器の性能は悪くなる．本稿では，人間による日本語係り受け関係タグ付け作業に関して，どのくらい一貫性をもって正しくタグ付け可能かを評価する新しいゲームアプリケーション``shWiiFitReduceDependencyParsing''（図）を提案する．ゲームのプレーヤーはWiiバランスボードの上に立ち，係り受け解析対象の文を読み，画面中央の文節対に対して2種類の判断「係らない(SHIFT)」もしくは「係る(REDUCE)」の判断を選択し，体重を左右のどちらかに加重する．係り受け構造のタグ付けにおける非一貫性は次の3つに由来すると考える．1つ目は，係り受け構造が一意に決まるが，作業者が誤るもの．2つ目は，複数の可能な正しい構造に対して，基準により一意に決めているが，作業者が基準を踏襲できなかったもの．3つめは，複数の可能な正しい構造に対して，基準などが決められていないもの．ここでは，1つめの非一貫性つまりタグ付けの正確性について検討する．このゲームアプリケーションを用いて，埋め込み構造に基づくガーデンパス文（図）のタグ付け困難性を評価する心理言語実験を行う．対象となる文は統語的制約のみによりその係り受け構造が一意に決定できる．しかしながら，被験者は動詞の選択選好性によるバイアスにより係り受け構造付与を誤ってしまう傾向があり，本稿ではその傾向を定量的に調査する．また，同じガーデンパス文を，各種係り受け解析器で解析し，現在の係り受け解析モデルの弱点について分析する．人間の統語解析処理については，自己ペースリーディング法・質問法・視線検出法などの手法により心理言語学の分野で調査されてきた．しかしながら，これらの心理言語学で用いられてきた手法は，読む速度を計測したり，文の意味を質問により事後確認したりする手法であり，コーパスに対する係り受けのタグ付けに直接寄与しない．一方，提案する手法では人間の係り受け判断をより直接的に評価し，また体重加重分布に基づいて解析速度を追跡することができる．以下，節では日本語係り受け解析手法について概説する．節では用いたガーデンパス文について説明する．節では人間による係り受け解析の調査に用いたゲームについて紹介する．節では実験結果と考察を示し，節にまとめと今後の展開について示す．</section>
  <section title="日本語係り受け解析">日本語の係り受け解析器は京大コーパス由来のものが多い．コーパスの基準により，係り受け関係は文節単位に付与され，係り受け関係は交差することがほとんどなく(projective)，常に主辞が右にくる性質を持つ(strictlyhead-final)．また文節を単位とした場合，動詞は格フレームを持つがその格要素は頻繁に省略される(productiveusageofemptycategory)，主辞に対する従属要素間の語順は比較的自由である(presenceofscrambling)といった特性がある．このような特性により，他言語と比して係り受け解析手法を単純化することができる．オープンソースの日本語係り受け解析器が2つある．1つは京都大学で開発されたKNPであり，入力として規則に基づく形態素解析器JUMANの出力を用いる．KNPは同表記異義語の曖昧性解消・文節まとめあげ・並列構造解析・係り受け解析・格解析を行うことができ，文節まとめあげは規則に基づき，以降の処理は規則と生成モデルの混合手法に基づく．もう1つは工藤拓氏によるCaboChaで，条件付確率場に基づく形態素解析器MeCabの出力を用いる．CaboChaは文節まとめあげ・係り受け解析を行うことができ，それぞれ条件付確率場・サポートベクトルマシンといった識別モデルに基づく．日本語の係り受け解析手法は決定的な状態遷移アルゴリズムに基づくものが多く提案されている．長さNの文に対し，時間計算量O(N^2)のCascadedChunking法~・O(N)のShiftReduce法~・O(N^2)のTournament法~などが提案されている．他言語では様々な係り受け解析手法が提案されており，グラフに基づく方法が決定的な状態遷移アルゴリズムとともに高精度を達成している．2手法が得意とする言語現象が異なるため，両者の組み合わせ手法が提案されている．しかしながら，日本語の係り受け解析において，グラフに基づく手法が高精度を達成されたという報告はない．</section>
  <section title="日本語ガーデンパス文">ガーデンパス文とは，途中まで文字列を読んで一旦理解されやすい解釈が誤っており，最後まで読んで初めて正しい解釈ができるような構造を持つ文のことをいう．本稿では係り受け構造同定を誤りやすい文として，Tokimotoの実験で用いられた埋め込み構造に基づく日本語ガーデンパス文を用いる．利用する例文は以下の形式の6文節からなる：下添え字は文節の順番を表す便宜上の数字である．NPは格助詞を持つ名詞句を表し，NP^NOMはガ格を持つ名詞句・NP^ACCはヲ格を持つ名詞句・NP^DATはニ格を持つ名詞句を表す．V^PASTはタ形の動詞を表す．5番目の文節Xに何が割り当てられるかによって異なる3種類の係り受け構造を持つ．1つ目はガ格を持つ名詞句NP_5^NOMを割り当てたものでControl(CTRL)文と呼ぶ．2つ目はヲ格を持つ名詞句NP_5^ACCを割り当てたものでEarlyBoundary(EB)文と呼ぶ．3つ目はそれ以外の句を割り当てたものでLateBoundary(LB)文と呼ぶ．3種類の係り受け構造を図に示す．CTRL文の場合，並列構造などの例外を除いて1つの動詞が2つ以上のガ格を持たないため，最初のNP_1^NOMがV_3^PASTのガ格，NP_5^NOMがV_6^PASTのガ格となる．非交差条件と常に主辞が右に来る制約によりNP_2^ACCがV_3^PASTに，NP_4^DATがV_6^PASTに係る．尚，V_3^PASTがNP_4^DATに連体節外の関係で係る．EB文の場合，並列構造などの例外を除いて1つの動詞が2つ以上のヲ格を持たないため，最初のNP_2^ACCがV_3^PASTのヲ格，NP_5^ACCがV_6^PASTのヲ格となる．準備した文は全てNP_4^DATがV_3^PASTを連体節内の関係で受け，意味的にはV_3^PASTのガ格に相当する．このためNP_1^NOMがV_6^PASTのガ格になる．LB文の場合，準備した文は全てNP_4^DATがV_3^PASTを連体節内の関係で受け，意味的にはV_3^PASTのヲ格に相当する．このためNP_2^ACCがV_6^PASTのヲ格になる．非交差条件と常に主辞が右に来る制約によりNP_1^NOMがV_6^PASTに係る．</section>
  <section title="ゲーム： shWiiFit Reduce Dependency Parsing">本節では人間の係り受け解析判定を調査するために開発したゲーム``shWiiFitReduceDependencyParsing''について説明する．図にゲーム画面を示す．ゲームはNivreらのshiftreduce法の日本語対応版であるSassanoのアルゴリズムを元にしている(Algorithm)．4種類のアクション``defaultreduce''・``defaultshift''・``REDUCE''・``SHIFT''のうち``REDUCE''・``SHIFT''を人間が判断する．文節数Nの1文を，高々2N回のアクションを決定することにより係り受け解析ができる．以下アルゴリズムについて詳しく説明する：[tb]S,Q,A=nil,W,%InitializationS!=niland|Q|==1s|S,q,AS,q,As,q%``defaultreduce''S==niland|Q|&gt;1nil,q|Q,Aq,Q,A%``defaultshift''sandqhasadependencyrelations|S,q|Q,AS,q|Q,As,q%``REDUCE''s|S,q|Q,Aq|s|S,Q,A%``SHIFT''S==nil|Q|==1AalgorithmicalgorithmスタックS・キューQ・解析済み係り受け関係を格納するAの3つ組を定義する．それぞれ，空スタックnil・入力文節列W・空集合で初期化する．係り受け解析はこの3つ組の状態遷移により進められる．状態遷移は以下の条件分岐により行う：``defaultreduce''：スタックSが空ではなくかつキューQが単一文節qのみの場合，システムが自動的にSの先頭要素sがqに係る関係を解析済み係り受け関係集合Aに追加しSからsをpopする．``defaultshift''：Sが空でありかつQが複数文節からなる場合，システムが自動的にQの先頭要素qをpopし，Sにqをpushする．``REDUCE''：人間がSの先頭要素sとQの先頭要素qの間の係り受け関係を判断し係り受け関係がある場合，Sの先頭要素sがqに係る関係をAに追加しSからsをpopする．``SHIFT''：人間がSの先頭要素sとQの先頭要素qの間の係り受け関係を判断し係り受け関係がない場合，Qの先頭要素qをpopし，Sにqをpushする．以下，アクションをどのようにプレーヤーが入力するかを説明する．ゲームのプレーヤーには図のようなスクリーンが提示される．解析すべき文がスクリーンの上部に示される．ゲーム開始時には顔アイコンがスクリーン下部中央に示される．その左上にあるトレイがスタックSに相当し，右上にあるトレイがキューQに相当する．左トレイSには何も載っていない状態で，右トレイQには文の先頭3文節が載っている状態で初期化される．ゲームの間左トレイS・右トレイQともに画面中央を先頭として高々3文節がプレーヤーに提示される．プレーヤーはNintendoバランスWiiボード上に乗り，体重移動により顔アイコンを移動させ左右の壁に移動させることにより注目する2文節間の係り受け関係の有無を入力する．もし左トレイSの先頭要素sと右トレイQの先頭要素qが係り受け関係にある場合，プレーヤーは右方向に体重移動することにより顔アイコンを画面下部右の``REDUCE''という壁に移動させる．係り受け関係にない場合，左方向に体重移動することにより顔アイコンを画面下部左の``SHIFT''という壁に移動させる．壁に顔アイコンが触れた時点で入力と見なされ，ゲームは820--860~msec.のアニメーションとともに，対応するアクションを実行する．この間プレーヤーが体重を左右に加重していない状態であれば，自動的にアイコンは中央に戻る．アクションが一意に決まる場合，つまり``defaultreduce''・``defaultshift''相当の場合，同様に820--860~msec.のアニメーションが提示する．1文解析後プレーヤーには解析結果が正しかったかどうかが提示される．プレーヤーはジャンプすることにより次の文の解析に進むことができる．ゲームの間ソフトウェアは各アクションの反応時間を計測する．今回の実験では，入力デバイスとして，バランスWiiボードを用いたが，ソフトウェアはキーボード上のカーソルキー・ジョイスティック・ゲームパッド（NintendoWiiリモコンの各種センサを含む）でも動かすことができる．入力デバイスとしてバランスWiiボードを用いた理由は，判断に迷った際にある程度プレーヤーに対して負荷を与えることができる点がある．プレーヤーが判断に迷った場合，キーボード上のカーソルキー・ゲームパッドを用いた場合にはプレーヤーは何もしなくてもよいが，バランスWiiボードを用いた場合にはプレーヤーは体重を中心に保つ努力をしなければならない．この負荷の有無については，4人に対する小規模の対照実験においてバランスWiiボードの方が反応時間差が出やすいことを確認している．</section>
  <subsubsection title="実験設定">節に示したゲームを用いて，心理言語実験を行う．ここでは節に示した埋め込み構造に基づくガーデンパス文に対する係り受け解析の精度と反応時間について評価する．21--27歳の日本語を母語とする大学生・大学院生13人を対象とし，被験者には謝金を支払う．ゲームの利用方法を教示するため，被験者は6ページのマニュアルを5分間読む．その後，係り受け関係の教示のために，文の構造を解説している小学校4年生の国語の教科書2ページを読む．教示時には速度と正解率の両方を計測していることを被験者に伝え，速く・正確に解析を行うことを依頼する．ゲーム中は各文が正解しているか否かのみを提示する．練習として被験者は3--6文節により構成される10文1セットを対象に実験を行う．被験者の希望により，同じ文を3セットまで練習することができる．練習に利用した平均文数は16.9文で5--12分要する．練習に用いた文の正しい係り受け構造は図入りのマニュアルに全て示されている．尚，13人の被験者のうちNintendoWiiFitおよび関連ゲームを高頻度で遊んだことのあるものは1人のみ．本実験において60文を解析用データとして準備した．節に示した判定対象となる3種類の例文(CTRL・EB・LB)10文ずつ計30文とフィラー30文からなる．判定対象となる文は全て6文節だが，フィラー文は6--7文節．判定対象となる文はTokimotoの実験で利用されたものと同一であり，フィラー文はTokimotoが行ったように文中に出現する語彙は10年分の新聞記事頻度とNTT語彙特性の語彙親密度により統制する．各被験者は1回の本実験で40文を解析する．文は以下の順で提示する：最初の5文はフィラー文・次の30文はフィラー15文＋CTRL文5文＋EB文5文＋LB文5文をランダム順処理したもの・最後5文はフィラー文．被験者毎に異なるデータセットを作成する．1人の被験者に対して同じ文を2度提示しない．図に実験環境を示す．42インチのディスプレイ上には1024768解像度で表示したうちの800600ピクセルの部分がゲーム画面である．実験に利用した部屋は防音室ではないが，可能な限り静音化した．バランスボードと画面の距離は230~cm．図中ホワイトボードの後ろに教示者がおり，練習時には操作方法の指示を行う．</subsubsection>
  <subsubsection title="実験結果">表に文型毎の文正解率と文単位の反応時間の標準残差（内的にスチューデント化した残差）の平均と標準偏差を示す．標準残差の計算時は正しく解析した際の時間を以下のパラメータで線形回帰する：(a)モーラ数・(b)文字数・(c)文節数・(d)文の提示順・(e)``defaultreduce''の数・(f)``defaultshift''の数・(g)``REDUCE''の数・(h)``SHIFT''の数・(i)隣接する2アクションで``SHIFT''/``REDUCE''が交替した回数（逆順も含む）．文正解率より，ガ格は文末の動詞に係け，ヲ格は近い動詞に係けるEB文の構造をより正解できる傾向が見られる．京大コーパスのマニュアルには，格要素が両方に係る場合，ガ格は最右要素，ヲ格は最左要素に係けるとある．その点について被験者については教示していない．ゲームがshiftreduce法に基づくために全ての要素をより近い要素に係ける傾向があると予測したが，CTRL文がEB文に比べてより誤ることから必ずしも近い要素に係ける傾向があるとはいえない．文単位の反応時間より，LB文は他の文に比べて解析に時間がかかることがわかった（調整化残差の分析より5%水準で有意差あり）．CTRL文とEB文については統計的な有意差は見られなかった．表にアクション毎の反応時間を示す．表の先頭行にアクションのインデックスを示す．対象となる文は全て6文節からなり，解析に必要なアクションの数は10であり，表中の列はこれに対応する．このうちほぼ半分のアクションは``defaultreduce''・``defaultshift''である．表中には，各3文型(CTRL・EB・LB)毎の結果を4行で示し，1行目は正しく解析するのに必要なアクション・2行目は反応時間（アクション間の実時間差からアニメーション提示時間を引いたもの）標準残差の平均・3行目は反応時間標準残差の標準偏差・4行目はアクション間の実時間差の平均を示す．1行目のアクションの略号はそれぞれ：``r''は``defaultreduce''・``s''は``defaultshift''・``R''は``REDUCE''・``S''は``SHIFT''を表す．2行目と3行目の標準残差は正しく解析できた文についてアクション毎の反応時間を(a)モーラ数・(b)文字数・(d)文の提示順で線形回帰をしたものである．尚，文の反応時間のときに考慮した(c)および(e)--(i)は，各文型集合毎で全く一致するので考慮しない．全ての文型について人間が反応可能な最初もしくは2番目のアクションで時間を要している．このことから，被験者は正しく解析するために，逐次的に解析するわけではなく，最初に全文を読んでから解析（の入力）をしていると考える．</subsubsection>
  <subsubsection title="関連研究">Mazukaらは様々な心理言語実験手法について紹介している．ここでは各実験手法との対比を行う．視線検出法では，被験者が文を読む際にどのくらい早く読むかを計測する．1回目の走査の時間・読み直しを行うかどうか・2回目の走査にかかる時間を計測する．この方法は文を読む速度を自然な方法で計測可能だが，視線検出システムは大変高価である．自己ペースリーディング法は被験者の意思に基づいて文節（もしくは句）を逐次的に提示しながら，文を読む速度を計測する．文節を逐次的に提示するために，被験者は近い文節に係けるバイアスを持ち，ガーデンパス文を読む際には再解析(reanalysissteps)を強いることになる．実験では，再解析コストを誤り率と文を読む速度により評価を行うことを目的とする．質問法は被験者に対して文を理解しているか否かを直接聞く方法である．目的に応じて質問は統制される．Who-did-what質問文では被験者が各文の意味を理解しているかどうかを評価する．Difficultyrating質問文では被験者が各文を理解するのにどのくらい簡単もしくは困難だったかを評価する．Misleadingnessrating質問文では被験者が各文に対してどのくらい誤解しやすいかを評価する．質問法は読む速度が得られる手法との組み合わせて行われることが多い．Tokimotoは図に示す文を自己ペースリーディング法による読む速度の残差およびWho-did-what質問法による誤り率で評価した．彼の実験では，各文型の再解析コストはCTRL&lt;EB&lt;LBの順であった．我々の結果を誤り率に変換するとEB&lt;（フィラー&lt;）CTRL&lt;LBとなり結果が異なる．ガーデンパス効果はLB文にのみ認められた．この違いは手法と目的の違いに由来する．Tokimotoは文節を逐次的に提示し，人間が文の意味を正しく理解しているか否かを調査することを目的とする．対照的に我々の実験では被験者は実験中常に文全体を見ることができ，係り受け解析が正しく行えるかを調査することを目的とする．最後に，我々の実験設定において係り受け解析をshiftreduce法に基づいて解析することが適切かどうか考察する．ゲームで提示されるトレイ（スタックおよびキュー）は文脈情報として，それぞれ3文節ずつの窓幅の情報を与える．1文節目と3文節目(NP^NOM_1,V^PAST_3)および2文節目と3文節目(NP^ACC_2,V^PAST_3)の係り受け関係を判断する際に6文節目の動詞V^PAST_6の情報はトレイには表示されない．しかしながら画面の上部には常に文の全体を表示しており，このshiftreduce法に由来するバイアスを低減している．尚，文全体を表示しない（つまり文末の文節を見せない）設定で実験を行った場合，全てCTRL文の構造に割り当てTokimotoらの方法と同じく再解析に陥ることが，被験者5人による事前実験によりわかっている．</subsubsection>
  <subsection title="人間と係り受け解析器の比較"/>
  <subsection title="Late Boundary 各文の分析">ここでは人間にも解析器にも解析が困難であったLateBoundary(LB)文について，統語的制約と選択選好性の観点から分析する．LB文は主節の動詞V_6がガ格ヲ格ニ格の三項を取り，関係節内の動詞V_3がガ格ヲ格の二項を取る．関係節内の動詞V_3が後置する係り先のNP_4をヲ格として取るために二重ヲ格違反と常に左に係る統語的制約により一意に構造が決まる．これに対し「より近い要素に係ける」という選好性と，主節の動詞V_6・関係節内の動詞V_3間の選択選好性の強弱関係により，制約を無視してしまい誤るという傾向がある．より詳細に分析するためにLB文10文について，人の文正解率・KNPの結果・京都大学格フレームの頻度の大小関係・Googleのヒット件数に基づく正規化頻度の大小関係を表に示す．京都大学格フレームの頻度について，NP_2vsNP_4はNP_2^ACCV_3とNP_4^ACCV_3で，V_3vsV_6はNP_2^ACCV_3とNP_2^ACCV_6で，それぞれどちらの頻度が高いかを表す．尚，0は両方の組み合わせが京都大学格フレームに登録されていなかったことを表す．Googleの正規化頻度は，前者をNP_2^ACCとNP_4^ACCの件数で，後者をV_3とV_6の件数で正規化を行う．例文は人の文正解率の良い順に並べられ，下線は選択選好性が例文を正しく解析するために良い影響を与えるものを表す．KNPが正解している文は人間にとっても解析が容易で，LB文の人正解率が高い傾向にある．京都大学格フレームが例文の係り受け全てを被覆していないが，人と誤り傾向の相関があることがわかる．Googleの正規化頻度は全例文を被覆しているが，係り受け関係ではなく連続文字列によるものなので，人間の誤り傾向とGoogleのヒット件数による選択選好性の間に矛盾があるところがいくつかある．実際，3つの項をとる述語に対してガ格・ヲ格・ニ格の順に述語から遠く置かれる傾向にあることを考えると直接比較できるものではない．しかしながら，NP_2とNP_4のどちらがV_3に係るかを評価した際に京都大学格フレームだけでなく，Googleヒット件数でもNP_2の方が強い場合には，人も間違える傾向にあることがわかる．このことから選択選好性の強弱関係が統語的に制約に反している場合には人は係り受け構造同定を誤りやすいことがわかる．</subsection>
  <section title="おわりに">本稿では係り受けタグ付けにおける人間の誤り傾向を調査する新しい方法を提案した．作成したゲームではNintendoバランスWiiボードを入力デバイスとして，ShiftReduce法に基づき，被験者がどのように係り受け解析を行うかを記録することができる．実験対象として埋め込み文に基づくガーデンバス文を用いて格要素の係り先の誤り傾向を観察した．また，同じ文を，6種類の係り受け解析器で解析を行い，誤り傾向を比較した．さらに京都大学格フレームおよびGoogleのヒット件数に基づく選択選好性と誤り傾向の相関について調査した．調査結果より統語的制約のみで一意に文の係り受け構造が決まる場合においても，格構造の選択選好性の強弱関係により誤った係り受け構造を認識することがわかった．またその誤り傾向は従来の心理言語実験で行われている文の内容認識結果とは異なり，ヲ格を文末の述語に係ける文だけでなく，ガ格を関係節内の述語に係ける文でも係り受け構造同定をよく誤ることがわかった．本研究の今後の展開として真に統語的制約によって決まらない曖昧な構造の選択選好性の定量化がある．例えば図のような本質的に係り受け構造が曖昧な文を考える：関係節内の動詞「勝った」はガ格とニ格を，主節の動詞「紹介した」はガ格とヲ格とニ格を取りうる項構造を持つ．「「紹介した」が3つの項全てを埋める選好性」（図左）と「「勝った」のニ格が省略されない選好性」（図右）とで，どちらを優先するかにより本質的に曖昧である．統語的制約によって決まらない構造を，選好性に基づき決定する過程は人によって揺れる．この本質的に曖昧な構造に対して，複数人の判定がどのように揺れるかを定量的に評価することにより，係り受けアノテーション情報の重層化を目指したい．アノテーションスキーマとして一致率を上げる展開とは別に，複数人のタグ付けが一致しない場合のその情報の保存という展開が考えられるのではないだろうか．</section>
</root>
