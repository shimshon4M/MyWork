<?xml version="1.0" ?>
<root>
  <jtitle>感情生起事象文型パターンに基づいた会話文からの感情推定手法</jtitle>
  <jauthor>松本和幸三品賢一任福継黒岩眞吾</jauthor>
  <jabstract>近年の情報処理技術の発達に伴い，従来の情報処理の分野ではほとんど取り扱われなかった人間の感性をコンピュータで処理しようとする試みが盛んになってきた．擬人化エージェントや感性ロボットが人のように振舞うためには，人間が表出する感情を認識し，自ら感情を表出することが必要である．我々は，感性ロボットに応用するための感情認識技術について研究している．自然言語会話文からの感情推定を行う試みは，多くの場合，表面的な感情表現のみに絞って行われてきた．しかし，人間の発話時には常に何らかの感情が含まれていると考えられる．そこで，本稿では，感情語と感情生起事象文型パターンに基づいた感情推定手法を提案し，実験システムを構築する．そして，本手法の有効性を調べるため，シナリオ文を対象にその評価実験を行った．</jabstract>
  <jkeywords>感性情報処理，感情認識，感性コンピュータ，自然言語処理</jkeywords>
  <section title="はじめに">近年，人間の感情を理解可能な機械（感性コンピュータ）に応用するための感情認識技術の研究が言語処理・音声処理・画像処理などの分野において進められている．感情のような人間の持つあいまいな情報をコンピュータで処理することは現段階では難しく，人間の感情モデルをどのように情報処理のモデルとして扱うかが感情認識研究の課題である．我々の研究グループでは，人間とロボットが感情表現豊かなコミュニケーションをとるために必要な感情インタフェース(AffectiveInterface)の実現を目指し，人間の発話内容・発話音声・顔表情からの感情認識の研究を行っている,,,．感情は，人間の行動や発話を決定付ける役割を持つ．また，表に示すように，発話には，感情を相手に伝えようとするもの（感情表出発話）と，そうでないもの（通常発話）とに分類することができる．表の例のように，感情表出発話の場合，聞き手は話者が感情を生起しているように感じ取ることができ，話者も感情を伝えようという気持ちがある．一方，通常発話でも，感情を生起するような出来事（感情生起事象）を述べる場合には話者に感情が生起していることもある．感情推定手法の従来研究として，目良らが提案する情緒計算手法がある,．この手法において，ユーザが単語に対して好感度（単語の示す対象が好きか嫌いかを示す値）を与えておき，情緒計算式に代入することにより快か不快かを決定する．さらに，得られた結果と文末様相などを感情生起ルールに当てはめることで，20種類の感情を判定する．この手法では，直接的な感情表現（感情表出発話）よりも，文が示す事象の望ましさに着目しており，感情表現を含まないような感情生起事象文に対応できるという利点がある．我々の提案する手法は，感情表出発話文と感情生起事象文の両方からの感情推定を目標とする．具体的には，感情表出発話文の文型パターンとの照合を行い，感情を表現する語・イディオムの辞書を用いて，文中の単語に含まれている感情の種類を与える．感情の強度は，修飾語や文末表現（モダリティ）などで変化させる．結果として，発話テキストから複数の感情とその強度が得られる．これにより，単語が表す感情と文単位で表現する感情の2つの面から感情推定が行える．本稿では，感情生起事象文型パターンと感情語に基づく感情推定手法を提案し，その評価用プロトタイプシステムを構築する．そして，システムを用いて会話文の感情推定実験を行い，人間による感情判断との比較に基づく評価と，その評価結果について考察を行う．</section>
  <section title="従来研究">現状の対話システムを感情豊かな自然な会話の流れに対応させるためには，感情状態による発話の制御が必要となる．人間の感情状態は，対話における相手との発話のやり取りで変化すると考えられる．感情表出についての研究は，これまでに，コミュニケーションロボット「ifbot」や擬人化エージェントの研究でも行われてきた．しかし，これらの研究においては，ロボットや擬人化エージェントが感情を表出することで，ユーザの感情を誘発することを目的としており，ユーザの感情状態を言語から認識することはほとんど考慮されていなかった．ロボットや擬人化エージェントに応用するための，感情インターフェースにおける感情表出では，相手（ユーザ）の感情状態の認識により自己感情の状態を適切に変化させることが必要となる．なぜなら，例えば，ユーザが怒っているのに楽しそうに話すロボットは人間らしい振る舞いをしているとはいえないからである．相手感情を認識できてはじめて，人間らしく自然に自己感情を表出できるであろう．したがって，感情インターフェースの実現のためには，発話内容，声の抑揚，顔表情などからの話者の感情状態の認識技術が必要不可欠となる．感情を話者の言葉（発話内容）から認識するためには自然言語文から感情推定を行う必要がある．自然言語文テキストからの感情の自動抽出や自動判定の研究として以下のようなものがある．A【感情語彙や感情表現の自動抽出】文に含まれる感情を抽出する研究として，大量のテキストデータからの感情表現や評価表現の自動抽出を目的とするや，，,,,,,,などがある．では，感情表現の基本となる語をシードとして準備しておき，それらの語との係り受け関係から頻出の感情表現パターンを抽出する．B【語の好感度を用いた会話文からの感情推定】会話文から話者の感情を推定する試みとして，語に好感度（プラスかマイナスの評価）を与え，文毎の事象の望ましさを推定し，話者の感情の推定を行う手法,が提案されている．C【ニュース記事の感情判定】単語と喜怒哀楽との対応関係を示す感情辞書の構築を行い，Webニュース記事から喜怒哀楽を自動判定する研究としてがある．この手法では，読み手側の立場での感情推定を行う．D【人手により作成された学習データに基づく感情推定モデルの構築】テキスト中に含まれる要素と生起感情との因果関係を付与することで，大量の学習データを作成する試みとして，らの研究がある．この研究では，対話文コーパスに対し，人物の生起感情（感情クラス）以外に，感情生起要因や感情強度などのタグを付与した大規模コーパスを構築し，感情推定への応用を目標としている．E【結合価パターンへの感情生起の付与】らは，文を構成する用言と格要素（名詞＋助詞）の意味的用法を体系化した結合価パターン（文型パターン）に対し，生起する感情の種類と，生起要因，生起主体などを記述した辞書の構築を行っている．手法A，Cでは，いずれも文中に出現する単語が示す感情的な意味に着目し，文の感情判定や単語の感情極性判定に利用している．,,などは，単語にpositive,negativeの二極指標を与えることによって評価表現の判定を行っているが，我々人間は，会話において発話内容から快か不快かの単純な感情のみならず，「喜怒哀楽」に代表されるような複雑な感情を理解することができる．したがって，より複雑な感情を推定するためには，語の感情的意味の範囲を快/不快からさらに広げて考慮すべきであると考える．手法Bでは，文末の様相などの情報から，最終的には複数の感情を推定することが可能である．また，手法Dや手法Eでは，文型や文脈を考慮することにより，多くの複雑な感情を推定することを目標としている．これらの研究から，会話文には語の感情的意味のみからでは判定できないような文が多く，そのような文に対しては，文全体，複数の文からなるテキストが示す感情的意味からの感情推定手法が必要であることが分かる．本研究では，感情を表す語や表現を収集・分類し，感情辞書を構築した．さらに，感情表現の文型パターンを収集し，パターンごとに感情生起のルールを作成することで，話者が生起している感情を推定する手法を提案する．</section>
  <section title="提案手法">文中の格要素や述語をfeatureとして機械学習によるポジティブまたはネガティブの推定を行う研究，,，は多数あるが，文型ごとに感情を対応付けし，ポジティブ・ネガティブ以外の感情（例えば「喜び」や「悲しみ」）を推定する研究は少ない．文型パターンへの感情生起に関する情報の付与は，でも行われているが，情緒生起情報として感情の種類のほかに生起要因などの情報を付与している点や，格要素に当てはまる語に関わらず1つのパターンに対し1種類の感情生起を記述している点で，本研究とは異なる．また，本手法においては，文型が登録されていない文でも，感情を表す語や表現を登録しておくことによって，「感情表出発話」としての感情推定を行うことができる．本手法では，単体で感情を表現することが可能な単語を「感情語」と定義する．また，感情を表現するような慣用句（イディオム）を「感情イディオム」と定義する．感情語と感情イディオムの例を以下に示す．感情語（名詞）「楽しさ」，「恐ろしさ」，「憤慨」，「涙雨」感情語（形容詞）「あくどい」，「痛々しい」，「嬉しい」，「おぞましい」感情語（副詞）「嫌でも」，「思いの外」，「折悪しく」，「心置きなく」感情語（動詞）「喜ぶ」，「楽しむ」，「怒る」感情イディオム「へそを曲げる」，「耳にたこができる」，「心がはずむ」本研究で提案する感情推定の大まかな流れを図に示す．まず，感情推定対象の発話テキスト（1発話ターン）が入力されると，前処理として文末などに含まれる不要な記号を削除し，文毎に分割を行う(Step1)．この処理は，係り受け解析時に記号類が文末要素として判定されてしまうことを避けるために行う．また，このとき，記号「？」や「！」は疑問文判定や感嘆文判定に用いるため，モダリティの要素として抽出しておく．次に，前処理された文を係り受け解析する(Step2)．係り受け解析には係り受け解析器の「南瓜」(CaboCha)，を用いる．その後，文節ごとに格助詞の検出を行い，文の表層格の決定を行う(Step3)．このとき，表層格要素はすべて述語（文末要素）に係るものとする．そして，抽出された格要素，修飾語，述語に感情語辞書を参照して感情属性を付与する(Step4)．感情語辞書とは，感情語やイディオムを分類し，収録した辞書のことである．また，感情属性とは主に感情の種類を示す言葉であり，本手法では22種類の基本的な感情属性を定義している（表参照）．辞書中には，感情語ごとに感情属性が1つ以上付与されている．次に，格要素や述語に係っている修飾語により，被修飾要素の感情属性の値の更新を行う(Step5)．修飾語が感情属性を持たない場合は感情属性の値の更新は行わない．その後，感情生起事象文型パターンとの照合を行い(Step6)，一致すれば，感情生起事象文とみなされ，感情生起ルールに基づいて感情属性値が与えられる．モダリティ要素が存在すれば，モダリティによる感情属性更新ルールに基づき，文全体の感情属性値を更新する(Step7)．最後に，感情パラメータの計算を行い(Step8)，感情推定結果として，複数の感情属性を候補として出力する．出力された各感情属性は強度を持ち（感情属性の値），大きいほどその感情が強く表れているとする．1つの発話に感情の種類が1つも付与されなかった場合は，感情推定結果として「無感情」が付与されたとする．以下，3.1節で「感情語・感情イディオム」について記述する．また，3.2節で「意味属性イメージ値」，3.3節で「感情生起事象文型パターン」について記述し，3.4節で「感情パラメータ」，3.5節で「修飾語とモダリティによる感情属性値の更新ルール」について記述する．また，3.6節では，全体の処理の流れを具体例を用いて説明する．</section>
  <subsection title="感情語・感情イディオム">本研究では，単体で感情を表すような単語（感情語）とイディオム（感情イディオム）をまとめた辞書を感情辞書として構築した．この辞書を参照し，文中に含まれる感情語と感情イディオムに対して感情属性値（各感情属性の有無）を付与する．感情語とその感情属性値の例を表に示す．感情語と感情イディオムに対して付与する感情属性として定義した22種類の感情属性とその定義を，表に示す．ここで，この22種類を初期感情属性として定義した過程について述べる．まず，感情の種類を定義するにあたって，Plutchikの定義した基本8感情に，「尊敬」「楽しみ」「不安」「後悔」の4感情と「平静」を加えた13感情を基本13感情として定義した（表参照）．次に，日本語語彙大系の一般名詞属性体系中の感情に関する語彙を調べ，13感情に当てはまらず，新たな感情として定義可能であるものを分類し，抽出していったところ，全部で表に示す22種類となった．また，感情語や感情イディオムの中には，この22種類の感情のどれにも当てはまらなかったり，他に適切な感情の種類が考えられる語（例．語：「やけくそ」→感情：「自暴自棄」）もあり，これらを強制的に22種類中のどれかに分類することは好ましくないと考えたため，付与する際はこの22種類以外の感情属性も許容し，新たな感情属性定義の作成を行うこととした．新たに追加された感情属性の一部を表に示す．これらの感情属性は，ポジティブまたはネガティブに分類できるので，表に示すような定義を行った．感情辞書の構築作業は，抽出対象である日本語語彙大系，感情表現辞典，分類語彙表に含まれる単語（副詞，形容詞，名詞，感動詞，動詞など）と，イディオムから，「単独で感情を表現できる語，イディオムならば抽出」を抽出基準として，作業者1人により抽出した．さらに，抽出された語とイディオムに対して感情属性（感情の種類）を付与する作業を作業者1人が人手により行った．例えば，「怒り」を単独で表現可能な語として「憤慨」や「憤激」，イディオムでは「腹を立てる」のような表現を抽出する．各単語，イディオムに付与する感情属性については作業者自身の判断に任せた．具体的には，感情語（名詞，動詞）と感情イディオムは，主に日本語語彙大系，感情表現辞典，分類語彙表などの辞書からの抽出を行った．日本語語彙大系から抽出した名詞は，一般名詞体系の「精神」以下に含まれる単独で感情を表現できる語である．また，感情表現辞典からは，辞典中で定義されている10種類＋複合感情に分類されている全ての単語，イディオム（感情表現）を抽出した．分類語彙表からは，【2.3000心】〜【2.3042欲望・期待・失望】に含まれる語から抽出した．さらに，形容詞と副詞における感情語は，「現代形容詞用法辞典」と「現代副詞用法辞典」からの抽出を行った．抽出基準としては，辞典中に感情的な暗示が記されている単語を抽出した．具体的には，辞典中の解説文と用例を参照しながら，単語1つ1つに対し暗示されている感情などを初期定義の22種類の感情に当てはまるかどうかを判断しながら抽出を行った．また，22種類の感情には当てはまらないが，その単語が感情を表す言葉であると判定できるものは抽出し，後に新たに感情属性の定義を行うこととした．品詞ごとの感情語と感情イディオムの総数を表に示す．また，1つの語，またはイディオムに複数の感情属性を付与しても良いこととした．さらに，追加した感情属性については，全ての単語への感情属性付与作業が終了してから見直しを行い，単語への感情属性の追加・修正を行った．</subsection>
  <subsection title="意味属性イメージ値">日本語語彙大系における一般名詞に関して，意味属性に対するイメージ値として，正か負の値を付与した．正，負のどちらのイメージも持たないような意味属性にはイメージ値として0を付与した．意味属性のイメージ値の例を表に示す．名詞は属している意味属性のイメージ値を持つことになる．なお，1つの名詞が複数の意味属性に属する場合，イメージ値は0と判定する．一般名詞の意味属性の総数は2715あり，そのうち162種類に正のイメージ値，273種類に負のイメージ値を付与した．この方法によって感情辞書に含まれていない一般名詞に対してのイメージ値の付与を行う．なお，感情辞書に含まれる一般名詞は，付与されている感情属性の種類（正感情属性または負感情属性）によってイメージ値が決まる．イメージ値は，感情語や感情イディオムが含まれない場合（含まれている語から感情属性値が得られない場合）に，モダリティとの組み合わせにより感情の種類を判定するために用いる．具体的には，負のイメージ値を持つ語と不確定（未確認）の様相を持つモダリティが共起している場合，「不安」という感情を生起させ，逆に正のイメージ値を持つ語に不確定の様相を持つモダリティが共起する場合には「期待」という感情を生起させるという処理を行う．表に，意味属性イメージ値とモダリティの共起ルールを示す．例えば，文末に「悪者でしょう」という表現が含まれる場合，意味属性「悪者」と不確定様相と判定される「〜でしょう」とが共起していると判定し，（負の意味属性に属する語）+（不確定様相）となり，「不安」を生起する．</subsection>
  <subsection title="感情生起事象文型パターン">本研究では，感情を生起すると考えられる感情動作や感情状態を記述した文を，感情生起事象文と定義する．感情生起事象文に当てはまる文のパターンに，感情生起主体がどういった感情を生起しているかを付与したものを感情生起事象文型パターン辞書として構築する．具体的には，感情生起事象文型として，日本語語彙大系に収録されている用言意味属性から「感情動作」と「感情状態」に属する用言パターン1615種類（感情状態275，感情動作1340）を基本感情生起事象文型パターンとして抽出し，感情の種類と感情生起条件を付与した．（各文型パターンには文中の格スロットに入る名詞の意味属性制約が設定されている．）感情生起条件には，感情生起の主体を定義している．例えば，「N1-がN2-に怯える」という感情生起事象ならば，事象の主体であるN1が「恐れ」という感情を生起していることを定義する．また，格スロットに入る単語によって異なる感情が生起するような場合には，単語の意味制約（好感度やイメージ値，感情属性値など）による条件も付加した．表に，感情生起事象文型パターンと，生起感情，その生起主体の例を示す．文中において感情生起主体が省略されている場合などは，話者を感情生起主体とみなして感情推定を行う．しかし，話者以外の人物が感情生起主体の場合には，他者の感情生起に対する話者の感情生起を推定する必要がある．この場合，話者と他者との関係（社会的地位や親密度）などの違いによって生起する感情が異なってくる．そこで，本手法では，各感情生起事象文型パターン毎に感情生起主体の感情生起条件のみを記述し，入力文中の感情生起主体が話者であると判定したときのみ，感情生起事象として感情生起条件を適用し，話者の感情推定を行う．入力文が感情生起事象文型パターンに当てはまるかどうかの判定条件として，述語の一致を用いる．述語が入力文のものと一致する文型パターンを，その文の感情生起事象として採用する．さらに，述語が一致する文型パターンが複数存在するとき，文中に含まれる単語の意味属性類似度を選択の基準とする．具体的には，文における単語意味属性類似度の和の平均値が最大値をとる文型パターンを採用することにする．単語意味属性類似度は各単語の，日本語語彙大系で定義されたシソーラスにおける意味属性により求めることができる．単語意味属性の類似度を求める式を式に示す．W_iは文中の格要素の単語の意味属性を表しており，N_iは，文型パターン中の格スロットに付与されている意味属性を示す．式に，文における単語意味属性類似度の平均値(AVG_s)を求める式を示す．式中のnは，文型パターン中の格スロット数を表す．式中のそれぞれの格要素ごとの類似度sim(W_i,N_i)は，らの格フレーム類似度の算出で用いられている方法と同様に，ある単語が複数の意味属性に属する場合には，単語意味属性類似度が最大の意味属性を採用することにする．また，格スロットに具体的な単語が設定されている場合（「N1-が大志-を抱く」の「大志」など），その単語に一致すれば類似度を1，一致しない場合には類似度を0とする．以下，述語が一致する場合の文型パターンの照合処理から感情生起条件適用までの流れについて述べる．入力文中の，モダリティ要素などを取り除いた述語が一致する文型パターンを検索し，該当するものが複数ある場合は，式により値AVG_sを求め，最大値をとる文型パターンを採用する．採用した文型パターンに付与されている感情生起条件を適用する．各格要素の人物判定には話者ごとに自身または他者の呼び名を記述した人物辞書が必要であるが，文中で代名詞を用いている場合には，意味属性が「対称」なら対話相手，「自称」なら話者自身，その他ならば他の人物（あるいは物）であると判定する．感情生起条件に一致すれば，その感情が感情生起主体に生起していると推定される．以下，感情生起主体が話者の場合は(4)，それ以外の場合は(5)のように処理される．感情生起主体が話者であれば，採用された文型パターンに付与されている感情生起条件に基づき，話者の感情を推定する．このとき，推定された話者の感情は，3.4節で述べる感情パラメータ計算において述語の感情属性値ベクトルとして計算される．感情生起主体が話者以外であれば話者以外の感情生起とみなし，これを保持し，3.5節で述べるモダリティの感情属性値更新ルール（動作主体が話者以外）に当てはまる場合に，話者の感情が推定される．また，(4)と同様，推定された感情は述語の感情属性値ベクトルとして計算される．述語が一致せず，感情生起事象として判定されない場合には感情表出発話文とみなし，次節で述べる感情パラメータを計算することによって話者の感情推定が行われる．</subsection>
  <subsection title="感情パラメータ">感情表出発話文には感情を表す単語やイディオムが含まれていることが多い．そこで，本手法では，文に含まれる感情語や感情イディオムからその文における話者の感情表出の程度を計算する．まず，文に含まれる各感情の強度を示す値として感情属性値を定義する．また，文から計算される感情の値として感情パラメータを定義する．感情パラメータとは，文中の格要素に付与された感情属性値を感情の種類ごとに合成したものを指す．また，感情パラメータは，（感情属性の種類数）*（文中の格要素数+1）の感情属性値ベクトルで表現する．感情辞書で照合した語やイディオムに，複数の感情属性が付与されている場合には，その全ての種類が感情パラメータ計算式に代入されることになる．各感情パラメータは，0か正の値をとる．式は，文の感情パラメータ計算式であり，式におけるea_iは，感情属性値ベクトルを表し，w_iは，各格要素ごとの重みを表す．また，ea_pは述語の感情属性値ベクトルで，w_pは述語への重みを表す．1発話中の感情パラメータは1文ごとに計算されるが，感情は記憶の一種であり，発話中において記憶と同じように忘却されていくであろうという考えに基づき，エビングハウスの提案した忘却曲線の近似式を用いることにより，同一発話テキスト中の前の文から計算されたパラメータとの合成を行う．感情パラメータ合成の計算式を式に示す．式中のEA_nは，観測中の文から得られた最新の感情属性値ベクトルを表し，EA_tは，それまでに計算された感情属性値ベクトルを表す．また，それぞれの感情パラメータを計算する際，感情属性値の値に掛ける重みは，格要素の種類ごとに異なる．主体・客体に好感度またはイメージ値がある場合にはそれを考慮して重みが決定される．心理学の分野では，人間はプラスイメージの対象を優先して評価する場合が多いことがS-V-Oポジティビティとして知られている．そこで，正のイメージ値，または感情属性を持つ要素ほど重みを大きくする，格要素ごとの重みを決定するルールを定義する．表に示すように，主体への重みをw_s，客体への重みをw_oとし，その値を定義した．また，述語への重みw_pは1.5とする．本手法では，表層格決定処理時に深層格決定は行わないが，主体，客体は，表層格の種類（ガ／ハ格，ヲ格）と当てはまる語の意味属性（人物，事物）から判定を行う．感情パラメータ計算により，述語が感情生起事象文型パターンに当てはまらない場合にも，感情語と感情イディオムを含んでいる文（感情表出発話文）からの感情推定を行うことが可能となる．また，述語が感情生起事象文型パターンに当てはまり，話者の感情が推定されている場合には，その推定感情の種類と値を述語の感情属性値ベクトルとした上で，感情パラメータを計算する．（この場合，感情属性付与処理において述語単体に付与された感情属性は考慮しない．）</subsection>
  <subsection title="修飾語とモダリティによる感情属性値の更新ルール">文中の格要素や述語を修飾する語が存在する場合，それらが被修飾要素の感情属性値の増減や変化に関わることをルールとして定義した（表）．修飾語，または修飾句のタイプによって，被修飾要素の感情属性への変化の与え方が異なる．本手法では，「直接修飾型」と「程度変化型」の修飾語を定義する．修飾語が直接修飾型である場合，被修飾要素の感情属性の有無に関わらず，修飾語の感情属性に書き換えられることとする．これは，直接修飾型に分類されるような形容詞や副詞などは，感情に大きく影響を与えるものと考えたためである．例えば，「美しい」などの直接修飾型の形容詞によって「花子」という語が修飾されるとすると，被修飾要素「花子」に付与されている感情属性は打ち消され，修飾要素「美しい」の持つ感情属性「賞賛」に書き換えられることになる．一方，被修飾要素の感情属性値の大きさに変化を与えるのが程度変化型の修飾語である．表に示すように，程度の違いによって「強め」，「弱め」に分類した．このタイプに分類される修飾語は主に副詞である．これらの修飾語のタイプの判定のために，感情辞書とは別に，形容詞と副詞を上記の2タイプに分類した修飾語辞書を準備した．この辞書には程度の値なども記述している．また，修飾語には，上で述べた2つのタイプのものと，文のモダリティの変化に影響するものがある．例として，「おそらく，雨が降るだろう」のように，「おそらく」という副詞には「未来」や「予測」という暗示があり，文末の「だろう」という予測の意味を持つ表現を伴うことが多い．よって，副詞には文末の様相と同様のはたらきを持つものも存在するので，修飾語辞書にモダリティとしての属性（モダリティの種類）の登録も行っておく．また，モダリティを文全体の感情属性値に影響させるルールを定義した．基本ルールとして，不確定様相や過去様相なら，感情属性値を減少させる．モダリティの種類ごとに不確定の度合い（やや弱い不確定=0.2，不確定=0.4，やや強い不確定=0.6）を不確定の程度値として定義する．具体的には，文の感情属性値ベクトルに(1.0-不確定の程度値)を掛ける処理を行う．この1.0という値は基準値であり，確定している事象であれば不確定の程度値が0.0ということであるから，文の感情属性値ベクトルは減少しないことになる．一方，不確定の程度が高くなるほど文の感情属性値ベクトルが減少する．不確定様相とは，述べられている事象がまだ未実施である場合や，未確認であるような場合に用いる表現を指す．一方，過去様相（確認様相）は既に過去に確認済みの事象の場合に用いる表現を指す．他に，モダリティの種類（「許可」，「禁止」，「依頼」など）ごとに，表に示すような感情属性値更新ルールを定義した．表中のSbjは，動作主体を表す．本研究では，モダリティの持つ属性として「確認／未確認(Asc)」，「時制(Time)」，「態度(Asp)」を定義する．表中のEmは，述語の感情属性が正感情属性か負感情属性かを判定する関数である．式に関数の定義を示す．signは符号関数を表す．また，ea_iは，述語動詞(V)の感情属性値を表し，関数emは感情属性ごとの正負を判定するものである．</subsection>
  <subsection title="感情推定の例">ここで，(a)「私が優しい花子の言葉に感謝するだろう．」という文（発話テキスト）から感情推定する例を各ステップごとに示しながら処理の流れを説明する．[1]〈Step1〉まず，入力された発話テキスト(a)を「．」や「！」などの句点に基づき，文毎に分割を行う．(a)は1文のみで構成される発話テキストなので，分割処理は行われない．また，(a)には「？」（疑問符）や「！」（感嘆符）のような記号や，その他の記号は含まれないと判定される．〈Step2〉次に，南瓜による係り受け解析を行う．具体的には，〈Step1〉で分割された一文ごとに解析を行う．〈Step3〉係り受け解析された結果に基づいて，表層格決定処理が行われる．(a)では，ガ格は「私」，ニ格は「言葉」，述語は「感謝する」と決定される．また，ニ格に係る修飾句として「優しい花子の」が抽出される．ここで，述語に付属している文末表現は，モダリティ要素として抽出しておく．〈Step4〉次は，文中の語と感情辞書との照合を行う．具体的には，格要素ごとに感情属性が含まれるかどうかを判定する．ここで，図に示すように，感情語として登録されている「優しい」に感情属性「賞賛」が付与される．係り受け関係から，ニ格への修飾句「優しい花子」となり，これが感情属性「賞賛」を持つことになる．また，修飾型は「優しい」のものをそのまま継承して「直接修飾型」となる．〈Step5〉ここで，修飾語による感情属性値の更新ルールが適用される．(a)の場合，修飾句「優しい花子」が「言葉」に係り，ニ格の感情属性値は上書きされ，「賞賛=1.0」となる．〈Step6〉次に，文型パターンの照合処理が行われるが，(a)の場合，文型パターン「N1-がN2-に感謝する」に一致し，生起主体=「私」であり，(a)から推定される感情は話者の生起感情となる．そして，文型パターンに付与されているルールに基づき，述語感情属性として「感謝=1.0」が付与される．〈Step7〉文中にモダリティがあるかどうかの判定が行われる．(a)に含まれる推定のモダリティ「だろう」により，文感情属性値の更新が行われる．この「だろう」の不確定の度合いが「やや弱い不確定」であれば，不確定値は0.2となり，文感情属性値ベクトルに(1-0.2)を掛け合わせることで，結果として，｛賞賛=0.8,感謝=0.8｝という感情属性値が得られる．〈Step8〉最後に感情パラメータの計算が行われるが，発話テキスト中の文が1文のみなので，式により，EP=EA=感謝=0.8*1.5，賞賛=0.8*0.7という計算が行われ，話者の生起感情として，｛感謝=1.2,賞賛=0.56｝という結果が出力される．</subsection>
  <section title="評価実験1">本手法の有効性を評価するために，実験用の感情推定システムを構築し，連続する会話文の感情推定実験を行った．プロトタイプシステムの構成を図に示す．システムは，大きく分けて文解析モジュール，感情推定モジュール，感情文蓄積モジュール，推定結果比較モジュールの4つの部分からなる．入力された発話テキストデータは文解析モジュールでCaboCha(CaboCha)により係り受け解析され，表層格の決定が行われる．次に，感情推定モジュールで感情推定処理が行われ，感情文蓄積モジュールにおいて入力発話テキストは感情推定結果と共にデータベースに蓄積される．その後，推定結果比較モジュールにおいて人手により付与された正解感情（人手による正解感情）との比較が行われ，各発話テキストごとの評価結果が出力される．</section>
  <subsection title="評価方法">評価は，人が判断した話者の感情と，システムが推定した結果との比較により行った．正解として，シナリオ会話文に正解とする感情を人手により付与したものを用いた．今回，人手による解を作成するにあたり，システム構築と感情辞書構築に関与していない5人の学生に対して，1シナリオずつを分担して行った．人手による解の作成者は，文脈を理解しながら割り当てられたシナリオを読み，シナリオ中の全発話に対して1発話ごとに選択候補（感情語，感情イディオムに付与された割合の高かった感情属性の上位45種類）の中から話者の生起している感情として考えられる数種類を選択する．付与の際，選択候補中に適するものが無いと判断した場合に，新たに感情の種類を自由入力できるようにした．また，感情が生起していないと判断したものについては「平静」を付与するように指示した．作成者が自由入力し，追加された感情で，感情辞書中に含まれていなかったものとして，以下に示すようなものがあった．嫌味，不思議，苛立ち，納得，同意，同情，否定，からかい，心配，満足，あわれみ，切望，緊張</subsection>
  <subsection title="対象データ">対象とする文は，Webサイトから収集した連続する会話文から構成される5種類の演劇用台本から抽出したシナリオ文章（合計1774発話）である．各シナリオについてのデータを表に示す．シナリオ会話文は，あらかじめ各話者の発話（ターン単位）ごとに分割しておいた．これらの発話の単位を1発話テキストと定義した．</subsection>
  <subsection title="実験結果">システムは，1発話テキストごとの推定結果として複数の感情属性を出力する．出力結果の例を，表に示す．今回，感情推定結果と，人手による正解感情とを比較することで提案手法の有効性の評価を行ったが，評価にあたり，解の作成者ごとの感情の種類の認識の差を考慮するため，感情属性の種類の大まかな分類（感情属性の大分類）を表に示すように定義した．正しいもの（人手による正解感情と完全一致）は○，完全に正しいとはいえないが，間違いではないと判断できるもの（完全には一致しないが，人手により付与された感情と同じ大分類に属するもの）は△，明らかな間違い（完全一致せず，人手による正解感情と同じ大分類にも属さないもの）であるものは×として定義した．また，感情推定結果として1発話に何も感情属性が付与されない「無感情」については，「平静」と同じ大分類に属するものとして評価を行うことにした．表に，実験の結果得られた感情属性ごとの評価結果を示す．表中の合計は，すべての発話において付与された感情属性の数を示す．また，それぞれの評価ラベルに対し，○(1.0),△(0.5),×(0.0)と重み付けを行い，各文の平均値を評価スコアとして算出した．評価スコアの算出方法を，式に示す．w_nは，各評価ラベルに対する重みを表す．また，Cはその発話文の推定結果として出力された（値が0より大きい）感情属性の数を表す．評価スコアが0.5以上と判定されたものを正しく感情属性が付与された発話テキストとみなし，正解文として集計した結果，該当する文は1006文であり，全体の約57%であった．評価スコアの詳細を表に示す．また，シナリオの種類ごとの成功率を表に示す．</subsection>
  <subsection title="誤り例">ここでは，評価実験の結果，感情生起事象文型パターンに当てはまらず，推定誤りとなった発話テキストについてその原因を考察し，対処方法について述べる．推定誤りの原因の内訳を表に示す．複数の原因が考えられる場合には，考えられる全ての原因を付与する．また，誤り原因の解析は，失敗とみなした発話テキスト（評価スコアが0.5より小さかったもの）に対して行った．以下，それぞれの原因による推定誤りの例を示し，感情推定結果との比較を行う．[(1)]文脈による誤り例[i]「それは，ちょっと．」（推定感情）：“無感情”（人手による正解感情）：“ためらい”（誤り原因）：文脈によるものに加え，文末要素が副詞になっており，述語が省略された形になっているため．述語には，否定的な言葉が当てはまると思われる．文脈話者(Y)「じゃあ，電話で言う．」話者(S)「いやぁ．電話はどうだろう．」話者(Y)「そう．じゃあメールで．」話者(S)「それは，ちょっと．」itembox「全く．」（推定感情）：“無感情”（人手による正解感情）：“あきれ”（誤り原因）：文脈によって，「全く」の後に続く語が限定される．この場合，「全く」の後には相手を非難する言葉が続くと思われる．（相手に呆れてしまい，その先の言葉に詰まる状況）文脈話者(M)	「嫌なら他の人に頼みなさいよ．」話者(F)「そりゃちょっと気が引ける…」話者(M)「私ならいいわけ？」話者(F)「もう習慣みたいなもんだから．」話者(M)「全く．」itembox[iii]「そのたんびに母親に怒鳴られていたよ．」（推定感情）：“怒り”（人手による正解感情）：“愛”かつ“受容”（誤り原因）：文脈からは，同年代の子供達に，愛する自分の息子について楽しそうに話す話者の心情がうかがえる．「母親に怒鳴られる」という事象のみからでは推定が不可能．文脈話者(M)「…ほら，これがうちの子．浩っていうんだ．汚い格好だろう？いつもこうなんだ．隣の家へ行っては，自分より小さな子を泣かして帰ってきたり，どこへ遊びに行ってたのやら，体中泥だらけにして帰ってきたりな．そのたんびに母親に怒鳴られていたよ．」itembox[iv]「顔くらい，いーだろ．」（推定感情）：“受容”（人手による正解感情）：“不平不満”かつ“嫌悪”（誤り原因）：文脈からは，相手の怒りを受けての発言であることが分かる．文脈話者(M)「何すんのよ！ヘンタイ！」話者(F)「そりゃねーだろ．お化けの次はヘンタイかよ．」話者(M)「女の子に触っていいと思ってんの！」話者(F)「顔くらい，いーだろ．」itembox[v]「おかしいなあ．」（推定感情）：“楽しみ”かつ“喜び”（人手による正解感情）：“不安”かつ“不審”（誤り原因）：「おかしい」の意味を，「違和感がある」という意味でなく，「可笑しい」ととってしまったため．「おかしい」の意味を判定するには，文脈の考慮が必要．文脈話者(A)「おい！！あれ！！」話者(B)「ちょうどいいところに来たな．」話者(C)「おかしいなあ．俺，武器も一緒においてっちまったんだっけかな…？」itembox[(2)]モダリティの未登録，照合失敗，感情生起主体の判定失敗など[i]「怒られたくも，叩かれたくもないでしょ？」（推定感情）：“怒り”（人手による正解感情）：“受容”（誤り原因）：「〜でしょ」の未登録，主体の判定失敗（話者として判定）（対処方法）：「〜でしょ」の登録（「受容」を生起するルール），受身形「〜られる」の判定による感情生起主体の判定．モダリティ，感情生起主体の判定が正しく行われる場合(a)問いかけのモダリティ「〜でしょ」が抽出される．（このモダリティが受容を生起するとする）(b)モダリティによる感情属性値ルールにより「受容」を生起．(c)“生起主体が「怒られる」”という事象であるが，主体判定の結果「他者」と判定されればこの事象からの感情は推定されない．(d)結果として(b)で生起した「受容」が話者感情として推定される．itembox[ii]「お前何そんなに怒ってんの？」（推定感情）：“怒り”（人手による正解感情）：“受容”（誤り原因）：疑問の様相「〜てんの」の未登録，生起主体の判定失敗（話者として判定）（対処方法）：生起主体判定方法の改善と「〜てんの」の登録．[iii]「そお，そこそこ．どんなにしっかりしていても，君もまだ子供なんだ．笑ったり，怒ったり，泣いたり，していいんだよ．その子と同じようにね．」（推定感情）：“喜び”かつ“怒り”かつ“悲しみ”（人手による正解感情）：“受容”（誤り原因）：「許可」を表すモダリティ「V-ていい」の抽出失敗．「笑ったり」，「怒ったり」，「泣いたり」からそれぞれの感情属性が結果に表れたため，推定結果のような感情属性が得られてしまった．（対処方法）：モダリティの照合方法の改善[(3)]感情語・感情イディオムの未登録[i]「みんな大袈裟に騒ぎ立てちゃって．」（推定感情）：“嫌悪”（人手による正解感情）：“呆れ”（誤り原因）：感情語としての「大袈裟」が未登録．（対処方法）：「大袈裟」を感情語として登録．「大袈裟」が登録されている場合表層格判定：“みんな”（ガ格），“大袈裟”（ニ格），“騒ぎ立てる”（述語）(1)感情語として「大袈裟」に，感情属性として「呆れ」が付与される．(2)述語「騒ぎ立てる」に，感情属性「嫌悪」が付与される．→述語とニ格の感情属性から，「嫌悪」+「呆れ」が推定される．itembox</subsection>
  <subsection title="考察">実験結果より，感情語が含まれていて，主語や述語が明確な比較的単純な構造の文でも，推定が上手くいかない場合が多かった．この原因として，文脈を受けて感情語の表す感情の程度が変化してしまうということがある．例えば，笑い話をしている最中に，不快を表すような感情語が出現することも多く，そのような場合，単純に感情語から「感情表出発話」として話者の感情を推定してしまうことには問題がある．会話全体のムード（雰囲気）も考慮しなければならない．また，感情の種類によって推定数，推定成功率共にばらつきが出た．この原因として，対象のシナリオの内容によって，感情の種類ごとに含まれる文の数に差があったということと，感情辞書に含まれる感情語やイディオムに付与されている感情属性の種類ごとの数の偏りがあることが挙げられる（図参照）．また，感情語の表記のゆれや，感情語・感情イディオムのパターン不足による照合失敗も多かった．このような照合失敗については，照合処理の改善と単語拡充による対応で解決できると考えている．また，感情推定への影響が大きいモダリティの照合処理の改善とモダリティのパターン拡充も必要である．また，今回実験に用いたシナリオには，登録されている文型パターンに一致する文がほとんど含まれていなかった．さらに係り受け解析の出力による表層格決定の失敗も多数あった．これらのことから，提案手法における文型パターン照合手法が話し言葉特有の表現に対応できていないことが問題であるといえる．また，文脈による誤りが推定失敗の原因の50%を超えていたことから，これらの文から正しく感情推定を行うために，文脈を考慮した感情推定を行えるようにしなければならない．</subsection>
  <section title="評価実験2">評価実験1の結果から，単純な文からの感情推定に失敗する原因として「文脈誤り」が多かった．したがって，対話の流れ（会話全体のムード）に応じて感情推定を行う必要がある．そこで，各シナリオの登場人物ごとに感情状態を保持し，感情の持続性を考慮した感情パラメータ蓄積ルールを適用することにより対話全体の雰囲気を考慮することにした．</section>
  <subsection title="感情の持続性">感情は，一時的なものと継続的なものの2種類に分けることができる．一時的な感情の場合，生起した時点から発話が進むにしたがって減少し，収束していくと考えられる．一方，継続的な感情は，対話中にほとんど減少しないと考えられる．感情の種類について述べているによると，感情を継続性と対人性の観点から分類すると，表のようになる．したがって，継続的感情は，発話の進行に影響されず感情状態が維持させる．また，一時的感情は発話の進行に伴い，1発話テキストにおける感情パラメータの合成時と同様に，同じ対話中の過去に生起した感情を忘却曲線の近似式によって減衰させ，最新の感情パラメータに足し合わせる．また，対話が終了するまで継続的感情を蓄積し続けることにより，後に生起した感情よりも強度が大きくなってしまうことを避けるため，継続的感情と一時的感情とで減少の割合を変更することで対処する．具体的には継続的感情は一時的感情よりも減少率を低くする．この感情の持続性を考慮したルールを感情パラメータ蓄積ルールとする．ここで，ある発話者による2発話における感情パラメータを合成する例を示す．対話例として，表に示すように各話者ごとの発話において感情パラメータが計算されたとする．表中の感情パラメータは，1発話テキスト内のみで計算されたものとする．発話は，U_A1,U_B1,U_A2,U_B3の順に行われたとする．この対話中のU_A2において，直前の発話U_A1で計算された感情パラメータとの合成を行う．一時的感情と継続的感情の減少の割合の比を1.5と定義し，計算を行う．計算の過程を図に示す．評価実験2として，1発話のみからでは推定が困難な場合に，直前の発話から推定された感情パラメータを利用する感情パラメータ蓄積ルールによる効果が得られるかどうかを確かめるための実験を行った．</subsection>
  <section title="まとめ">本研究では感情推定を行うアルゴリズムについて提案し，評価実験用システムを構築した．そして，シナリオデータを対象とした会話文の感情推定実験（評価実験1）を行い，約57%の成功率が得られた．さらに，感情状態の維持を考慮した感情パラメータ蓄積ルールを適用し，同じデータで評価実験（評価実験2）を行ったところ，約76%の成功率が得られた．しかし，評価実験1と同様に，推定結果と人手による解との完全一致率が低いという問題があった．また，評価スコアから誤りと判定された文についてその原因を分析した結果，表記の揺れなどによる感情語と感情イディオムの照合失敗と，モダリティのパターン不足による照合失敗が推定誤りの原因の約30%を超えていたことから，感情語と感情イディオムの照合処理の改善と，モダリティのパターンの拡充，照合処理の改善が必要である．また，評価実験において，感情生起事象文型パターンに一致する文が全体の5%にも満たなかったことから，感情生起事象について見直し，感情状態と感情動作以外の用言パターンに対しても感情生起ルールを付与するとともに，実会話文で使用される表現の文型パターンを拡充していく必要があると思われる．文脈を判断できないことによる誤りが，推定誤りの原因のうち50%以上みられ，推定誤りを減らすためには文脈を判断するためのアルゴリズムが必要であることが分かった．今後は，会話文に特化した感情推定手法に発展させるため，[(1)]係り受け解析誤りに依存しない文型照合方法の提案[(2)]感情生起事象文型の拡充と感情表現文型辞書の構築のため，感情文コーパスからの文型パターン自動登録手法の提案[(3)]対話相手の発話による感情状態の変化規則の構築を行いたいと考えている．</section>
</root>
