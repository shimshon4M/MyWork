<?xml version="1.0" ?>
<root>
  <title>連想知識メカニズムを用いた挨拶文の自動拡張方法</title>
  <author>吉村枝里子土屋誠司渡部広一河岡司</author>
  <jabstract>会話において，まず行われるのが挨拶である．コンピュータやロボットにおいても挨拶を行うことから次へと会話が広がり人間とのコミュニケーションが円滑に行われる．本研究では会話処理の中でも特に挨拶処理についてのしくみを提案する．挨拶処理は従来テンプレートを適用するのみであり，あまり研究は行われてない．しかし，単に用意されたテンプレートだけを用いると応答が画一化され，設計者の作成した文章のみが出現するという問題点がある．会話文の中でも特に挨拶文は設計者の作成した文章がそのまま使われることが多い．そこで本稿で提案する挨拶処理システムにおける挨拶文は設計者が用意した挨拶知識ベースに存在しない新たな文章も作り出す．人間は言葉に関する汎用的な知識を覚え，その言葉に関する常識を持った上で会話を行っている．これと同じように，挨拶処理において，汎用知識と常識判断にあたる連想知識メカニズムを用いる．挨拶知識ベースにこの連想知識メカニズムを組み合わせて検討することにより，文章を大規模に拡張し，精錬する手法を提案する．</jabstract>
  <jkeywords>会話処理，連想知識メカニズム，概念ベース，常識判断メカニズム，挨拶処理，文章拡張</jkeywords>
  <section title="はじめに">近年，ロボットは様々な性能において躍進を遂げてきた．例えば四足で移動するペット用ロボット，ダンスを踊るロボット，走るロボット，人の顔を認識しいくつかの命令を受理できるロボットなどが挙げられる．それらに共通する未来像は「人と共存する機械」であると言えるだろう．人と共存するためには「会話」という大きなコミュニケーション要素が重要となってくると考えられる．また，ロボットが行う会話には，対人関係を円滑にし，利用者に対する精神的サポートを行うという目的が挙げられる．会話において，まず行われるのが挨拶である．挨拶は会話によるコミュニケーションを円滑にする一端を担っている．コンピュータやロボットに対しても，挨拶を行うことから次に会話が広がり人間とのコミュニケーションが円滑に行われると考える．本研究では会話処理の中でも特に挨拶処理についての仕組みを提案する．挨拶処理は従来テンプレートを適用するのみであり，あまり研究は行われていない．しかし，単に用意されたテンプレートだけを用いると応答が画一化され，設計者の作成した文章のみが出現するという問題点がある．挨拶に限らず，対話システムの多くはテンプレートを用いることが多い．対話システムの一つにElizaが挙げられる．このシステムは自然言語による対話システムであり，擬人化されたセラピストエージェントによって，カウンセリングを代行させる．Elizaでは相手の応答に対して答えを評価して返すということはせず，過去に発言した内容の一部分だけを覚えてその単語を組み込む．また，話題に関しては数種類のパターンを用意している，聞き手としてのシステムである．また，今日の対話システムに関する研究は，ある一定のタスク（達成目標）を満たすために行われる，タスク指向型対話に関するものが多くを占めている．これらはテンプレートとその一部に変数となる予約語を用意しておき，ある条件が満たされるとそれに適当な文章を出力する．この様にある一定の状況下における制約条件の下，相手の応答に応じたテンプレートを導出し，テンプレート内の変数を予約語に変換する研究は多数報告されている．しかし，これらはテンプレートの文章数及び予約語数に依って，出現する文章数が決定される．会話文の中でも特に挨拶文は設計者の作成した文章がそのまま使われることが多い．そこで，本稿で提案する挨拶処理システムの文章は，設計者が用意した挨拶知識ベースに存在しない新たな文章も作りだす．このことで多種多様な会話が生み出されると考えられる．</section>
  <section title="挨拶処理システムの構成">「挨拶」とは，日常会話の中において質問の応答や問題の提起を行わない「主張のない会話」だと定義する．本稿で提案する挨拶処理は相手に対する応答のみならず自ら起こす発話も対象とする．つまり，入力変数として現在状態を保持しており，入力文がある場合はその現在状態と入力文，ない場合は現在状態のみを入力変数として挨拶文を作り出す．本挨拶処理システムでは挨拶として二文を返す．一文目として返答する定型の挨拶を第一会話文，二文目として話題をふる挨拶を第二会話文とする．この例を図に示す．挨拶文となる文章として，第一会話文のための定型文と，第二会話文のための可変な文章のテンプレートからなる挨拶知識ベースを作成する．ある程度の基本的なテンプレートの文章知識を，第節で後述する概念ベースと，語種リスト（同義語・類義語・反語リスト），及び常識判断メカニズムによって大規模に拡張する．また，概念間の関連度を評価する関連度計算・シソーラス・概念ベースIDF値を用いて精錬する．このことによって文章は人手によってテンプレートを増やすことなく機械的に大規模に拡張される．このシステム構成の概要を図に示す．また，このシステムを使った例として図を示す．入力文「おはよう」に対し，意図理解システムは挨拶であると判断し，現在状態「12月25日，午前7時，気温-2℃，晴れ」といった入力からは状態語「クリスマス，朝，冬，寒い，晴れ」を導く．これを用いて定型の挨拶文(第一会話文)と話題を続ける挨拶文(第二会話文)を出力する．</section>
  <section title="連想知識メカニズム">人間は言葉に関する汎用的な知識を覚え，その言葉に関する常識を持った上で会話を行っている．これと同じように，挨拶処理において，様々な連想知識メカニズムを用いる．連想知識メカニズムは大きく，概念連想メカニズムと常識判断メカニズムにわかれる．これはシステムが持つ汎用的知識と常識にあたるものである．図に示すように，概念連想メカニズムはシソーラス，語種リスト（同義語・類義語・反語リスト），概念ベース，それを用いた概念ベースIDF,関連度計算などから成る．概念連想メカニズムは語と語の関係を汎用的な知識として持つ．また，常識判断メカニズムは時間判断システム，感覚判断システム等から成り，時間や感覚の観点から語を連想，判断する．本節ではこれらの連想知識メカニズムについて述べる．</section>
  <subsection title="概念ベース">概念ベースにおいて，任意の概念Aは，概念の意味特徴を表す属性a_iとこの属性a_iが概念Aを表す上でどれだけ重要かを表す重みw_iの対の集合として定義する．（式）ここで，a_iを一次属性と呼ぶ．また便宜上，Aを概念表記と呼ぶ．このような属性の定義された語（概念）を大量に集めたものを概念ベースと呼ぶ．だたし，任意の一次属性は，その概念ベース中の概念表記の集合に含まれているものとする．すなわち，属性を表す語もまた概念として定義されている．したがって，一次属性は必ずある概念表記に一致するので，さらにその一次属性を抽出することができる．これを二次属性と呼ぶ．概念ベースにおいて「概念」はn次までの属性の連鎖集合により定義されている．また，各概念表記に対し平均30属性が付与され，属性に付与される重みは，その概念表記に対する重要度であり，各概念表記について，その総和が1.0となるように正規化されている．初期の概念ベース（基本CB）は，約3万4千の概念表記Aとその属性a_i及び重みw_iを複数の国語辞書の語義文から自動的に獲得した．これは辞書の見出し部の単語を概念表記，語義文に含まれる自立語を属性として抽出し，それらの属性の重みはその属性の出現頻度を基に付与する．さらに，属性の自己参照による新たな属性の追加，及び不要な属性の統計的な除去からなる精錬を行うことによって概念ベースを機械構築している．本論文で用いる概念ベースは基本CBに加え，新聞記事から新たな概念表記と属性を取得し，属性の精錬と適切な重み付け手法を施し，電子化辞書から抽出した概念を加えた約9万概念を有する概念ベースを用いる．</subsection>
  <subsection title="関連度計算方式">関連度とは，概念と概念の関連の強さを定量的に評価するものである．概念ベースを利用した概念と概念の間にある関連性を定量的に評価する手法として，ベクトル空間モデルが広く用いられている．しかし，本稿では，概念を定義する属性集合の重みを含めた一致度を基本とした関連度計算方式を利用し，概念間の関連性評価を行っている．これは，関連度計算方式が有限ベクトル空間によるベクトル空間モデルよりも良好な結果が得られるという報告がなされているためである．本稿では重み比率付き関連度計算方式を使用し，実験を行う．任意の概念A，Bについて，それぞれ一次属性をa_i，b_jとし，対応する重みをu_i，v_jとする．また，概念A，Bの属性数をL個，M個(L&lt;M)とする．このとき，概念A，Bの重み比率付き一致度MatchWR(A,B)を以下の式で定義する．MatchWR(A,B)=_a_i=b_jmin(u_i,v_j)eqnarrayこのように一致度を定義するのは，a_i=b_jとなる属性に対し，互いの属性の重みの共通部分が有意に一致すると考えるからである．次に属性の少ない方の概念をAとし(L≦M)，概念Aの属性を基準とする．	そして概念Bの属性を，概念Aの各属性との重み比率付一致度MatchWR(a_i，b_xi)の和が最大になるように並び替える．	これによって，概念Aの一次属性と概念Bの一次属性の対応する組を決める．対応にあふれた概念Bの属性は無視する（この時点では組み合わせはL個）．但し，一次属性どうしが一致する（概念表記が同じ）ものがある場合（a_i=b_j）は，別扱いにする．これは概念ベースには約9万の概念が存在し，属性が一致することは稀であるという考えに基づく．従って，属性の一致の扱いを別にすることにより，属性が一致した場合を大きく評価する．具体的には，対応する属性の重みu_i，v_jの大きさを重みの小さい方にそろえる．このとき，重みの大きい方はその値から小さい方の重みを引き，もう一度，他の属性と対応をとることにする．例えば，a_i=b_jでu_i=v_j+とすれば，対応が決定するのは(a_i,v_j)と(b_j,v_j)であり，(a_i,)はもう一度他の属性と対応させる．このように対応を決めて，対応の取れた属性の組み合わせ数をT個とする．重み比率付き関連度とは，重み比率付き一致度を比較する概念の各属性間で算出し，その和の最大値を求めることで計算する．これを以下の数式により定義する．Rel(A,B)=&amp;&amp;_i=1^TMatchWR(a_i,b_xi)&amp;&amp;(u_i+v_xi)&amp;&amp;(min(u_i,v_xi)/max(u_i,v_xi))/2eqnarray以下，重み比率付き関連度を関連度と略し，この関連度を用いる．関連度の値は0〜1の連続値をとり，1に近づくほど概念間の関連性が高い．概念Aと概念Bに対して関連度計算を行った例を表に挙げる．</subsection>
  <subsection title="感覚判断システム">感覚判断システムとは名詞に対して，人間が常識的に想起でき，特徴付けられる感覚に関する語を取得するシステムである．この「感覚」とは五感（視覚・聴覚・嗅覚・味覚・触覚）の刺激によって得られる感覚を指す．以降，全ての形容詞，形容動詞から五感に関するものを人手で抽出した98語を感覚語と呼ぶ．感覚判断システムは名詞とその特徴である「感覚」の関係を日常的な名詞の知識ベース(感覚判断知識ベース)を構築することによって明確にし，必要な感覚語を取得する．感覚判断知識ベースはシソーラス構造をとる．感覚に関する語という観点で見た場合，名詞にはその名詞のグループが持つ感覚とその名詞固有の感覚の２種類がある．感覚判断知識ベースはこの２種類の感覚を継承できるようにするためにシソーラスのリーフとノードの関係を用いて構築されている．具体的には，日常よく使用される680語をシソーラスのリーフ（代表語）として登録し，それぞれにその語固有の感覚を付与している．また，それらをグループ化しシソーラス構造をとるための語をノード（分類語）として153語登録し，そのグループが持つ感覚を付与している．この感覚判断知識ベースのイメージ図を図に示す．また汎用知識である概念ベースとシソーラスを用いることで，構築した感覚判断知識ベースにない語(未知語)に対しても「感覚」を想起することができる．未知語に対して感覚を付与する場合，分類語としての感覚とその未知語固有の感覚を付与する処理を行う．これは未知語に対して，関連度計算を用いて感覚判断知識ベース内に含まれる高い関連度を持つ代表語を取得し，その語群の属するシソーラスのノードから分類語としての感覚を取得する．また，概念ベースを用い，未知語の一次属性に現れる感覚語を，概念ベースの特徴を利用した自動精錬法(詳細は文献を参照されたい)を行った後，未知語固有の感覚として取得する．表に未知語固有の感覚取得の例を示す．表の未知語「パンダ」の例では，その属性から「白・黒・大きい」などを未知語固有の感覚として取得することができる．感覚判断システムを用いた例を表に示す．</subsection>
  <subsection title="時間判断システム">時間判断システムとは時間を表す言葉（時語）の知識ベース(時間判断知識ベース)を用いて名詞から季節や時刻などの時間を判断するシステムである．また時間判断知識ベースにない時語(未知語)に対しても，汎用知識である概念ベースを利用して補完する．時間判断知識ベースにおいて時語は大きく明示的時語と暗示的時語の二種類に分類される．明示的時語とは「クリスマス」のように明らかな時間を指す語であり，暗示的時語とは「スキー」のように暗黙に時間を連想する言葉である．前者に関して156語，後者に関しては187語格納されている．特に明示的時語の中で基本的な「春，夏，秋，冬，梅雨，朝，昼，夕方，夜」を代表語とし，全ての格納された時語に対し代表語を付加する．このシステムの使用例を表に示す．</subsection>
  <section title="挨拶処理システムのための知識ベース">挨拶処理システムは最初に入力として，入力文と現在状態を取得する．現在状態は年・月・日・時間・温度・天候を取得する．現在状態のうち，時間についてはコンピュータの内部時計を利用し，天候と気温に関しては数時間毎にWEBより取得する．入力文が意図理解システムによって挨拶と判断された場合及び空欄の場合，挨拶処理システムに応答処理を渡す．挨拶処理システムはこれに対し，二文を応答として生成する．一文目は会話の導入部となる定型の挨拶文，二文目は以降の会話展開への話題提供のための挨拶文である．この二文目はテンプレートではなく，それを元に大規模に拡張された文である．以降，一文目を第一会話文，二文目を第二会話文とする．そこで，挨拶のための知識ベースとして，第一会話文知識ベースと第二会話文知識ベースを整理・構築した．本節では挨拶処理システムで利用するために構築された挨拶知識ベースについて述べる．</section>
  <subsection title="第一会話文知識ベース">第一会話文知識ベースは状態語・挨拶入力文に対する定型の応答文を格納した．作成にあたっては，挨拶であると考える語とその状態を5名のアンケートによって調査した．状態語とは現在状態から連想・取得されうる「朝」「寒い」などの単語群である．これにより挨拶である文章（入力文），及び状態語の双方から定型応答語を取得することができる．状態語・入力文を応答語に対するグループに分け，グループIDを付与した．そのグループIDはそれぞれ応答語のグループIDに対応する．以下にその一部を示す．状態語とそのグループIDの格納数は25語（表），入力文とそのグループIDのテーブルには182語（表），それらに対するグループIDと応答語を格納したテーブルには46語（表）を格納した．その一部を以下に示す．</subsection>
  <subsection title="第二会話文知識ベース">第二会話文知識ベースは話題を広げる可変な応答文のテンプレートを格納している．テンプレートを要素語・修飾語・程度修飾語・限定修飾語に分割し，同じ修飾語に繋がる単語群をグループ化した．全単語で92語格納し，この単語群から生成されるテンプレートは803文となる．「要素語」は拡張される基本単語となる．「要素語」はグループIDとテーマを伴う．テーマは要素語のシソーラスの上位ノードのうち，要素語のグループを特徴付けられるノードを選んだものである．このテーマにより，そのテンプレートの話題を大別することが可能である．このテーブルには54語を格納した．この例を表に示す．「修飾語」は要素語を直接修飾する語群，「程度修飾語」はその程度を強調する語群，「限定修飾語」は限定された現在の時間・空間を指し示す語群である．これらにはそれぞれグループ化するためのIDがある．修飾語テーブル（表）は24語，程度修飾語テーブル（表）は8語，限定修飾語テーブル（表）は6語それぞれ格納している．また，これらのグループIDを連結させて文章化するためのルールもまた格納した．この連結ルールは30ルール格納し，この一部を表に示す．要素知識テーブル，修飾語テーブル，程度修飾語テーブル，限定修飾語テーブルを連結ルールを用いて結合させる．この第二会話文知識ベースのイメージ図を図に示す．それぞれの語はグループ化され，要素語にはテーマを付加している．また，連結ルールによって各々の語はつながり，テンプレートとなる．</subsection>
  <section title="挨拶文の生成">本節では挨拶処理システムの仕組みについて述べる．挨拶処理システムはまず入力文と現在状態を取得する．入力文が存在する場合は入力文を挨拶知識ベースから参照し，第一会話文を決定する．入力文が存在しない場合は，現在状態から情報を取得し，その情報から挨拶知識ベースを参照し，第一会話文を決定する．その後，第二会話文を第二会話文知識ベースより拡張された文章群を用いて決定する．第二会話文はテンプレート内に存在する基本単語群（挨拶に関係する語群）を概念ベースの一次属性・関係辞書・常識判断メカニズムによって拡張し，その後，品詞・シソーラス・関連度計算・概念ベースIDF・常識判断メカニズムによって精錬する．この具体的な手法を第節，第節で述べる．図に第二会話文拡張方法の概要を示す．</section>
  <subsection title="意図理解システム">意図理解システムとは入力文に対する応答方法の違いを区分するため，入力文をそれぞれ「挨拶」「命令」「疑問」「情報」という意図に分類するシステムである．このシステムは意図理解判断のために必要な知識ベースをもつ．入力文を形態素解析し，この知識ベースを参照することでそれぞれの意図に分類する．この意図理解システムによって挨拶と判断された文章は挨拶処理，命令文と判断された文章は命令解釈，疑問文と判断された文章は問題解釈，情報文と判断された文章は応答処理のための意味理解へ処理を渡す．意図理解システムの概要を図に示す．</subsection>
  <subsection title="現在状態からの状態語の取得">人間は五感から様々な情報を得て，その情報を基に挨拶を行うことが多い．「なんて暑いのだろう」「騒がしい」と感じるとその状態を話題に上らせやすい．つまり，思考に上らせやすい状態が現在状態に存在するとより話題にしやすいと考えられる．この思考に上らせやすい“状態の単語”を以降，状態語と呼ぶ．この状態語をAとして，現在状態から時間，気温，天候に関する状態語を取得する．天候に関してはその取得した語をそのまま用いるが，数値入力される時間と気温に関してAを取得する方法を次に示す．</subsection>
  <subsubsection title="時間">時間の状態語として年を表す明示的時語，日を表す明示的時語，特定の日を表す明示的時語を取得する．これらは時間判断システムで利用している時間知識ベース内の時語の始点時間と終点時間を時間軸(月，時，月日)と共に格納した明示的時語知識ベースを参考にして状態語を取得した．年を表す明示的時語とは春，夏，秋，冬などの季節を表す語である．これは時語知識ベース内の時間軸「月」に類別されている．また，日を表す明示的時語は朝，昼，夕方，夜，午前，午後などの昼夜を表す語であり，時語知識ベース内では「時」に類別される．特定の日を表す明示的時語はクリスマス，七夕などの年内イベントを表す語であり，時語知識ベース内では「月日」に類別される．時語知識ベースの一部を表に示す．現在状態の時間を表す月，日，時間と知識ベース内の始点時間，終点時間を比較し，時間に関するA_timeを取得し，取得した語群を時間軸によって季節，昼夜，イベントに類別して保存する．これを用いることにより，月日が12月25日であれば「クリスマス」，月が6月から9月の間は「夏」といった状態語を取得することができる．</subsubsection>
  <subsubsection title="気温">気温の平年値を用いて気温に関するA_tempを求める．平年値とは平均的な気候の状態を表す指標である．その求め方は世界気象機関（WMO）が定めており，西暦の一位が１の年から数えて連続する30年間について累年平均値を算出したものである．2000年からは気象庁が作成・提供している1971年から2000年までの平年値が指標となっている．気温の平年値をT_ave，現在の気温をT_nowとし，A_tempを以下の図のように定める．</subsubsection>
  <subsection title="第一会話文の取得">第一会話文を契機に会話は始まる．この文章は総じて定型の挨拶文であり，以降の会話を円滑にする導入部の役割を果たす．これを第一会話文知識ベース及び入力文，状態語を用いて取得する．本稿で提案する会話システムでは相手の応答に限らず，自発的に会話を作成するため，入力文が存在する場合と存在しない場合がある．入力文がある場合，これを意図理解システムに渡す．意図理解システムによって「挨拶」と判定された場合，第一会話文知識ベースの入力文テーブルを参照し，応答語テーブルから第一会話文を取得する．入力文が存在しない場合，現在状態から状態語を取得する．これを第一会話文知識ベースの状態語テーブルを参照し，応答語テーブルから第一会話文を取得する．例えば，現在状態が夜の場合，入力文がないと「こんばんは」と応答するが，対話者が「おはよう」と入力すれば「おはようございます」と応答する．相手に合わせた挨拶がコミュニケーションを円滑にする役割を果たすと考えられる．</subsection>
  <subsection title="第二会話文の拡張">第二会話文は話題を提供する挨拶文である．この話題は日常会話の中において質問の応答や問題の提起を行わない．話題として多く用いられるのは現在状態から連想される事柄である．例えば，気象，季節，朝夕，体感温度などが挙げられる．しかし，第二会話文を人手で作成すると，手間がかかり，設計者が設定した応答しかできない．そこである程度のテンプレートを用意し，そこから汎用知識ベースを用いて機械自身の手で連想を広げる．但し，ここでは文章を拡張することが目的であり，最終的には現在状態にマッチングする文章を応答として返すことを目指しているが，本論文では現在状態を用いて文章を選定する所までは範囲としない．本章では文章を大規模に拡張し，その文章が挨拶において文章単独として常識的であるように，文章の精錬を行う．</subsection>
  <subsubsection title="状態語からの拡張">現在状態から取得した状態語のうち，時間に関する状態語から時間判断システムを利用して連想し，要素語を拡張する．例えば，現在時間が“12月25日／午前7時”とした例を表に示す．ここから状態語として“季節／冬”，“昼夜／朝”，“イベント／クリスマス”が取得できる．この状態語それぞれを時間判断システムによって連想する．冬からは“蟹”，朝からは“出勤”等の連想語が派生する．これを要素語として，それぞれのテンプレートの可変部に戻し，“蟹の季節ですね”“出勤の時間ですね”といった文章拡張を行うことができる．本論文では文章拡張の有効性を調べるため，現在状態を定めて文章を拡張するのではなく，全ての状態語を用いてそこから想起できる文章拡張を行った．</subsubsection>
  <subsubsection title="連想による修飾語の拡張">人は話題の言葉に対して想起した感覚を加えて会話にする．そこで感覚判断システムの連想によって修飾語を拡張する．ここで用いる要素語は第二会話文知識ベースの要素知識テーブルに存在するものを用いる．これらの要素語に対し，連結する基本的な修飾語は第二会話文知識ベースの修飾語テーブルに用意しているが，さらに感覚判断システムによって修飾語を拡張する．この例を表に示す．まず，要素語を感覚判断システムにかけ，感覚想起を行う．感覚想起された修飾語が修飾語テーブルになかった場合，その修飾語をその要素語に対する修飾語として追加・拡張する．連想による要素語の拡張汎用的な知識ベースである概念ベース及び語種リスト（反対語・同義語）を用いて要素語の連想を行う．ここで用いる要素語とは，第二会話文知識ベースの要素知識テーブルに存在する要素語54語のことである．語種リストは国語辞書等から自動構築された反対語リスト，同義語リストを持つ．反対語リストとは反対の意味を持つ語のセットを約１万6000語登録したデータベースである．同義語リストとは同義の意味を持つ語のセットを約20万セット登録したデータベースである．反対語による拡張要素語と同系列の単語群を取得するため反対語リストを利用することによって拡張する．要素語に対する反対語とそれに対する反対語を取り続けることにより，同系列の単語群の取得が可能となる．以下のアルゴリズムで反対語による拡張語群Eを取得する．	要素語Yの反対語群Y_iを取得する．YとY_iを語群Eとする．	語群Eの全ての反対語群E_iを取得する．	E_iとEを比較する．E_iの中でEに含まれていない語をNとする．	Nが無ければ，Eを反対語による拡張語群Eとして取得する．Nが存在すれば，EにNを加えたものを新たなEとして()を行う．同義語・一次属性による拡張要素語とその反対語による拡張語群Eを，同義語と概念ベースによってさらに拡張する．以下のアルゴリズムで同義語・一次属性による拡張語群Eを取得する．	拡張語群Eの全ての単語の同義語群E_sを取得する．	拡張語群Eの全ての単語の一次属性E_cを概念ベースより取得する．	拡張語群EにE_sとE_cを加え，同じ語を削除する．	()で取得した語群を同義語・一次属性による拡張語群Eとして取得する．</subsubsection>
  <subsection title="精度向上">会話文が常識的に正しい文章になるように要素語の拡張語群に対し精錬を行う．</subsection>
  <subsubsection title="品詞による精錬">拡張語群Eに対し，品詞による精錬を行う．本来の要素語Yが収まるようにテンプレートは作られているため，要素語Yと品詞が異なるものは収まりにくいからである．よって，拡張語群E内において要素語Yと同じ品詞の語を，品詞による精錬語群S_hとして取得する．</subsubsection>
  <subsubsection title="シソーラスによる精錬">品詞による精錬語群S_hに対し，シソーラスによる精錬を行う．語群S_h内には様々な多義語が含まれていることが多い．例えば要素語「山」に対して「山岳」「山鉾」「クライマックス」等の多義語が含まれる．これに対し，挨拶文として利用したいものは視界に入る自然物としての「山岳」という意味の語群である．このため，シソーラスを用いて自然物としての意味を持つものだけを取得する．このようにシソーラスによる精錬語群S_tを以下のアルゴリズムによって実現する．	要素知識ベースより，要素語Yのテーマ語Tを取得する．	語群S_hの各単語に対し，シソーラスの全親ノードを取得する．	シソーラスの全親ノードとテーマ語Tを比較し，一致するノードが存在する単語を取得し，これをシソーラスによる精錬語群S_tとする．</subsubsection>
  <subsubsection title="関連度による精錬">シソーラスによる精錬語群S_tに対し，関連度計算による精錬を行う．これは，テンプレートの可変部に入れるために人手で用意した適切な語群との関連度を用いる．適切な語群との関連が高ければ適切だと考えたためである．次のアルゴリズムによって適切な要素語群との関連度による精錬語群S_rを取得する．	要素語Yと同じグループIDを持つ語群Y_gを第二会話文知識ベース内要素知識ベースより取得する．	語群Y_gと語群Y_gの全単語間で関連度計算を行う．	()の平均値を求める．これを要素語Yの閾値とする．	語群S_tの各単語と語群Y_gの関連度計算を行う．	()の平均値を求める．	()と()で求めた閾値を比較し，閾値以上の単語群を取得する．これを適切な要素語群との関連度による精錬語群S_rとする．</subsubsection>
  <subsubsection title="IDF値による精錬">IDF値は情報検索の分野で用いられる単語重み付け手法であり，稀に出現する語は重要であるという観点から重み付けされた対数文書頻度である．ここでは以下の方法で概念ベースIDF値を求める．	概念ベース内の属性全てを対象とし，概念連鎖によって三次まで展開する．	全概念数（87242）をN_Allとする．また，全概念を三次まで展開した属性群(文書空間)内での概念tの出現概念数をdf(t)とし，idf(t)を以下の式で計算する．				idf(t)=logN_Alldf(t)		eqnarray関連度による精錬語群S_rに対し，概念ベースのIDF値を用いて精錬を行う．汎用的な辞書の知識である概念ベース内で使用頻度の低い語は日常会話でもあまり使用されない．そこで，IDF値を用いると，概念ベース内で使用頻度の低い語として雑音を除くことができる．本来，IDF値とは出現頻度の低い語の値が大きく，重要である，という観点で重み付けされるものであるが，ここでは，「稀に出現する語は一般的でない」という観点で，そのような語を抽出するための単なる「計算式」として用いる．閾値は実験によって適切な値を求め，IDF値が閾値以下の語を語群S_rから抽出し，これをIDFによる精錬語群S_iとする．実験は閾値をIDF値0.2〜3まで0.2毎に変化させて取得した精錬語群S_rを用いた．S_rを文章化し，ランダムに100文抽出する．それを３人の目視によって常識的に正しいか否かを評価した．100文に対して常識的に正しいとした割合を算出し，その３人の平均値を精度とした．また拡張語から表現できる全文章数をその文章数とする．このときの精度と文章数のグラフを図に示す．図よりIDF値が小さくなれば精度は上がり，文章数は減少する．また，IDF値が0.8〜1.4の間，あまり精度が変わらないことがわかった．そこで，その間で最も文章数が多くなるIDF値1.4が閾値として適当であると考えられる．これをIDFによる精錬を行う際に用いる閾値とした．</subsubsection>
  <subsubsection title="時間判断システムによる文章の妥当性">精錬語群S_iから第二会話文知識ベースを用いて文章化する．拡張前の要素語のもつ修飾語の上位IDから文章を作成する．このとき，限定修飾語と要素語の状況が全く異なることがある．例えば「今朝はきれいな夕焼けですね」「今夜は涼しい昼ですね」等である．このような文章はどのような状況であっても正しくない．時間判断システムを用いてこれらの文章を削除する．具体的には，文章化する際に，限定修飾語と拡張要素語の双方を時間判断システムにかける．限定修飾語「今朝」と要素語「夕焼け」を時間判断システムにかけた場合の例を表に示す．ここで時間軸が一致（月日，月，時）し，かつ同じ時語を含まない場合，その文章を削除する．</subsubsection>
  <subsection title="実験結果と考察">精錬結果と拡張された文章数について調査を行う．調査方法は，以下のとおりである．まず，精錬語群を文章化し，ランダムに300文章抽出する．それを３人の目視によって挨拶において文章単独として常識的に正しいか否かを評価した．300文に対して常識的に正しいとした割合を算出し，その３人の平均値を精度とした．また拡張語から表現できる全文章数を文章個数とする．挨拶において文章単独として常識的である，というのは，あらゆる状況下で第一会話文（おはよう，こんにちは，など）の後に続いて発する可能性のある文章を意味する．元のテンプレートも関係がないため，実験時には元になったテンプレートは被験者に提示せずに行った．拡張した文章300文のみに対し，文章として非常識でないか，及び挨拶として適当か(状況を限定せず，第一会話文の後に続いて発することが妥当か)を判断基準として評価した．</subsection>
  <subsubsection title="ここまでの実験結果と考察">第節の拡張を行った場合（拡張のみ），第節の精錬（品詞，シソーラス，適切な要素語群との関連度，概念ベースIDF，時間判断）を行った場合のそれぞれの精度を図に，文章個数を対数グラフで表したものを図に示す．拡張のみの精度は38％と非常に低かったにもかかわらず，精錬を経て，78％に精度向上した．また，最初のテンプレート数が803文であったのに対し，拡張と精錬によって17878文が自動拡張された．ここで不適切とされた例には，次の図のようなものがあった．これらは修飾語と要素語が意味として連結しない形をとっている．このため，修飾語と要素語との関係を加味する必要があると考えられる．</subsubsection>
  <subsubsection title="新たな関連度計算の提案">上記実験結果から，修飾語と要素語との関係性を加えることの必要性が感じられたため，関連度を用いることにより，その関係性を追加する．次のアルゴリズムによってこれを実現する．	作成された文章の修飾語と同じグループ内(第二会話文知識ベースより)の語の一次属性を取得	要素語と()の語の関連度計算を行い，平均値を求める	要素語が含まれるグループ全てに()を行い，最低平均値を導出	()をその要素語グループの閾値とする	拡張した単語と()の語の関連度計算を行い，平均値を求める	()が()の閾値以下なら削除する	これを，修飾語の属性との関係を加味した関連度による精錬語群とするテンプレート「うっとうしい雨ですね」を用いた際の例を図に示す．まず，修飾語「うっとうしい」と同グループに属する「うっとうしい，嫌な」の一次属性を取得する．これとテンプレートの要素語「雨」と同グループに属する「天気，曇り，雨」との関連度の平均値を計算する．「天気，曇り，雨」は人間によって修飾語との関連があると判断されたものなので，ここで最も低い値を出した関連度を必要最低限の値と考え，閾値とする．図の場合は「雨」との関連度0.1136が最も低いため，これが閾値となる．「雨」から拡張された語群と「うっとうしい，嫌な」の一次属性との関連度の平均値がこの閾値よりも低い場合，これを削除する．図の場合は「快晴」と「晴れ間」が除去される．このことにより，少なくとも修飾語との関連がないと考えられる語を除くことができる．ここで，第節で行った“適切な要素語群との関連度による精錬手法”と“修飾語の属性との関係を加味した関連度による精錬手法”を入れ替えて，精度と文章個数を求めた．これを図に示す．前者の手法を使ったものを関連度1，後者の手法を使ったものを関連度2とする．すると関連度1を使った手法の精度は77％，関連度2を使った手法の精度は84％となり，関連度2の手法を用いた方が7％の向上が見られた．また，全文章個数も約18000個から約24000個に増加することがわかり，“修飾語の属性との関係を加味した関連度による精錬手法”の方がより有効であった．次に，“適切な要素語群との関連度による精錬手法”と“修飾語の属性との関係を加味した関連度による精錬手法”の双方を行った場合の精度と文章個数を求めた．これを図に示す．順序を入れ替えても，“修飾語の属性との関係を加味した関連度による精錬手法”だけの場合と比較して大きな差異はなく，文章個数のみが大きく減少した．このため，両方を行うのではなく，関連度による精錬を“修飾語の属性との関係を加味した関連度による精錬手法”にすることが適切であると考えられる．この手法によってある一文のテンプレートから拡張された文章の例を表に示す．表に示した例において，「精錬文章群」が「テンプレート」に対し本提案手法を用いたシステム出力例である．また，評価実験において，評価者全員が常識的であると判断した文章例を○，常識的ではないと判断した文章例を×として示す．節「第二会話文の拡張」において，テンプレートを拡張した当初は「精錬文章群」と「削除された文章群」の両方が混在している．これに対し，節で提案した精度向上方法を用いることで，文章は精錬される．このときに削除された文章の例を「削除された文章群」に記載する．例えば「きれいな川ですね」というテンプレートに対し，様々な文章（拡張文章群）が生成される．しかし，提案手法によって，常識的でない（非常識な）文章が大きく削除された．挨拶として(第一会話文に続く文章として)「きれいな流れですね」「きれいな景観ですね」という文章はある状況下で可能であるのに対し，「きれいな河童ですね」「きれいな濁流ですね」といった文章は非常識である．このような文章を自動的に削除することで拡張文章群を精錬し，本提案の有効性を示すことができた．</subsubsection>
  <section title="おわりに">本稿では，日常会話の中において質問の応答や問題の提起を行わない「主張のない会話」である「挨拶」の処理手法を構築した．また，話題の展開に繋がる第二会話文をテンプレートだけではなく，汎用知識ベースである概念ベースや常識判断メカニズムを用いて文章拡張し，品詞，シソーラス，関連度計算，概念ベースIDF，時間判断システムによって精錬する手法を考案し，その有効性を実験によって検証した．また，第節までの操作を行うことによってテンプレートは自動的に大きく拡張・精錬された．この文章群を用いて現在状態に即した第二会話文を取得することが次の課題となる．この挨拶処理手法を用いることにより，少数のテンプレートを連想により拡張し，挨拶を膨大な文章から選択することが可能となる．このことで，単調となりがちなテンプレートの会話に効果をもたらすと期待される．</section>
</root>
