<?xml version="1.0" ?>
<root>
  <title>国文学作品のテキストデータ記述ルールについて</title>
  <author>安永尚志</author>
  <jabstract>国文学作品の電子化テキストのためのデータ記述ルールについて検討した．様々な国文学作品の特徴を整理し，電子化テキストの目的と研究対象をまとめ，必要なデータ記述のための機能や情報構造について考察している．データ記述の基本原則を作品の構造とテキストの構造に分けて考察し，またデータ表記の様相を分析，評価し，ルール化についてまとめている．３つの基本ルールから成るKOKINルールと呼ぶデータ記述文法を定義し，作成した．これは国文学作品を対象とする電子化テキスト記述用のマークアップ文法である．ルールに基づく電子化データを実際に作成し，ルールの構文の正当性やルールの有用性などについて評価している．例えば，電子化データのテキストデータベースやCD-ROMへの登録，SGMLへの変換などを行っている．これらの結果，ルールの有効性が確認され，実用性についても高く評価された．</jabstract>
  <jkeywords>テキストデータ記述文法，テキストデータベース，本文データ，国文学作品本文データベース，テキスト符号化，KOKIN</jkeywords>
  <section title="まえがき">最近，国文学の分野においても，文学作品のテキストをコンピュータに入力し，研究に活用しようとする動きが盛んである~．これは日本語処理可能なパソコンなどの普及により，国文学の研究者が，自分の手でデータを作成する環境が整ってきたことによる．すでに，多くの文学作品が電子化テキストとして作成され，蓄積され，流通され始めてきている．例えば，村上ら~による語彙索引作成を目的とした幸若舞の研究は，最も初期のものである．これは田島ら~により，万葉集を始めとする多くの文学作品の電子化テキスト作成の試みに引き継がれている．最近では，内田ら~は情報処理語学文学研究会の活動を通じて，パソコン通信などにより電子化テキストの交換を行っている．また，伊井，伊藤ら~による国文学データベースの作成と電子出版活動も注目されている．とくに，源氏物語諸本の８本集成データベースや国文学総合索引の研究成果がある．一方，長瀬~は源氏物語の和英平行電子化テキストを作成し，オックスフォード大学に登録し公開した．また，出版社による電子化テキストの提供サービスも始まっている~．しかしながら，大きな問題がある．一般に，研究者は自分のためのデータを作っている．そのため，システム，文字コ−ド，外字処理，データの形式や構造などに関しての仕様が，研究者個人に依存している．さらに，蓄積した情報資源の流通をあまり意識していない．すなわち，苦労して蓄積したデータが活用されにくく，また同じ作品の重複入力の問題などが指摘されている．したがって，データ入力の共通基盤の確立と適切な標準化が必要である．とくに，文学作品の電子化テキストを作るためのデータ記述ルールが必要である．現在，人文科学のための定まったデータ記述のルールは無い．SGML：StandardGeneralizedMarkupLanguage~に基礎をおくTEI:TextEncodingInitiativeなどの活動~があるが，その成果は未だ実用化に至っていない．とりわけ，人文科学領域の日本語テキストへの適用は，国文学における数例~を除けばほとんど無い．国文学研究資料館において，電子化テキストのデータ記述についての試みがなされてきている~．例えば，日本古典文学大系（岩波書店），噺本大系（東京堂出版）などの全作品の全文データベースの開発が進められている．また，最近では正保版本歌集「二十一代集」を直接翻刻~しながら，データベースに構築している．これらはテキストのデータベース化を指向したものであるが，テキストデータの記述のための基準文法が定められている．この基準文法をKOKIN（KOKubungakuINformation）ルールと呼んでいる．KOKINルールは国文学作品を対象とする電子化テキスト記述用のマークアップ文法である．本稿は，国文学作品テキストのデータ記述文法について述べている．第２章では，電子化テキストの目的と研究対象をまとめ，データ記述の考察上不可欠と考えられる本とテキストの情報構造を分析し，まとめている．第３章では，データ記述のルール化のための基本原則を考察している．作品とテキストの構造記述が必要なこと，及びテキスト表記の記述が必要なことなどをまとめている．第４章では，KOKINルールを３つの基本ルールに分けて定義し，それぞれについて考察している．第５章では，実際のデータ作成とそれに基づくデータベース作成の事例などから，KOKINルールを評価している．研究成果としては，すでに国文学研究資料館において，本文データベースとして試験運用が開始されている．研究者による利用結果からは，文学研究に有用であるとの評価を得，概して評判がよい．最後に，問題点などを整理している．</section>
  <section title="電子化本文作成のための条件整理"/>
  <subsection title="電子化本文の目標">電子化本文の作成は研究の効率化をはかることが目的であるが，新しい研究テーマへの展開やデータベースとしての発見的利用も期待されている．例えば，大量の資料，情報を扱った考察が可能になり，自説の組立や確認の度合いが飛躍的に高まる．単語や語形の検索はもとより，単語が現れる環境の調査が可能になる．組版などの印刷物では表せないことが可能になる．さらに，作品に記載されていないことの発見的検索が可能になる~．国文学の研究対象は，上代の神話から現代の作品まで全ての時代に渡り，地域的にも歴史上のわが国全土を網羅する．また，古典文学は千数百年に渡る歴史を持ち，ジャンルも多様である．表１に，散文，韻文，戯曲のカテゴリに大別し，その代表的ジャンルの例を示す．しかし，絵詞のようにこの分類に馴染まないものも多い．*-2mm*-2mmこのような様々な作品を統一的に電子化することは不可能である．そこで，次のような段階を経ながら，電子化の経験を積むこととした．これは，まず国文学作品の全般的な様相を知り，次いで個別の作品の伝本の全ての本文校訂に進むことを可能とするプロセスを考えるためである．したがって，第１段階での網羅性は文学作品の本文の全体的な様相を把握し，その上で電子化の方策を考えることが可能な程度の作品の種類と量を必要とする．また，これには実際にデータを作成し，その過程から知識を得て行くことが不可欠である．また，写本や刊本から直接電子化本文を作ることはかなり難しい．規範的な標本があれば，あるいは典拠と言って良いが，作業効率は格段に高まる．研究者が最も望むものは，第２段階の専門領域の電子化本文である．基準本文は第２段階の電子化本文作成にとって，重要な要件と考えられる．何を基準とするかの問題がある．国文学や歴史学では古記録，古文書，古典籍などの研究対象資料（文献資料と言う）を翻刻する場合に，校訂作業が不可欠である．作品の多くの伝本を比較参照し，書写文字などによる本文の意味や用法を考察し，作品の本文を定める（定本と言う）．すなわち，校訂本が作られる．このことから，基準本文には定本としての校訂本を基礎とすべきである．現在までに研究対象とした作品の一覧を，表２に示す．これらは二十一代集を除き，校訂本からのデータ作成である．第１段階として，時代及びジャンルを網羅した規範的な校訂本のデータベースを準備することを目標にして，選定している．</subsection>
  <subsection title="電子化本文の情報構造"/>
  <subsubsection title="本文と本の情報構造">電子化本文を作成するに当たって，まず取り扱う情報の種類と性質を整理する必要がある．本文は校訂本から選んだ．このとき，この本文は校訂という枠組の中で成立する．すなわち，電子化本文は純粋な本文データの他に，校訂に関する情報を持つ必要がある．本文データが単独で利用されることはない．本文とその本に関する情報は不可分である．図１に，このような情報を階層的に構造化して示す．これは本と作品，本文の情報構造を明確化し，その上で本の論理構造を定義するものである．国文学におけるこのような整理はなく，図１はやゝ常識的ではあるが，現在有用であるとされている．ここで，本と作品の物理構造を考えておく．本は作品を記載する．この関係は通常は１対１であるが，古典籍では多対１あるいは逆に１対多も多い．多対１は作品が分冊される形態であり，１対多は複数の作品がまとめられる場合である．これは伝本の形態によって異なる．このような情報構造は図１によって記述できる．さらに，よく和歌集などに見られる合綴本などの構造記述も可能である．なお，本文が文献資料から直接選ばれる場合も，実質的に翻刻，校訂作業を経るから，図１の情報構造が適応できる．</subsubsection>
  <subsubsection title="本の情報構造">図１(a)は，本の構造を示す．本の構造は本の物理的なモノとしての種類と形態を表す．本は伝来されたものである．これを本の系譜構造として把握する．また，本の情報とは本に関わる情報，言わば属性情報であり，階層化して定義する．本の情報構造は３レベルの階層で定義する．図において，本の情報は文献資料情報と校訂本情報とから成る．文献資料情報は底本,諸本（または異本とも言う），それらの系譜に関わる情報から成る．また，底本情報は書誌，所蔵，及び成立に関する情報から成り，諸本情報も同様である．書誌，所蔵に関わる情報は図書館などで一般に用いられている情報に加え，古典籍特有の情報項目を持つ．成立情報は底本及び諸本の本文の成立に関わる情報である．通常，校訂は底本を基軸とし他の伝本を参照しながら行われる．すなわち，底本は諸本の中で位置付けられる．位置付けに関わる情報は本の成立に関わる構造の把握と考えられる．一方，校訂本情報は本としての構造を持ち，書誌情報などによって同定される．校訂本には成立に関する情報は無いと考えられるが，ここでは一般化して考える．同一の作品には複数の校訂本があるが，校訂本としての性格から独立して扱うことは可能である．ただし，文献資料情報と同様に諸校訂本との関連を参照する必要がある場合には，諸校訂本情報として記述する~．</subsubsection>
  <subsubsection title="本文の情報構造">図１(b)は，本文に関する情報の構造である．本文情報は元・本文情報，原・本文情報，及び校訂情報から成る．本文情報はその出典により，２種類に大別される．両者は全く異なるものである．元・本文情報とは底本に記載されている本文と，それへの種々の書き込みなどの情報である．書肆的な情報なども含む．校訂により，元・本文情報は校訂本文である原・本文情報に変換される．原・本文情報は本文と傍記の形式で表記される．ここで，本文とは主たるテキストを指す．傍記は本文を構成する文，語，字などへ直接付加されたテキストである．例えば，校異,振り仮名や振り漢字などがある．また，校訂本には作品の本文の他に校訂に関わる様々な情報を伴う．例えば，解題,解説，頭註または脚註，凡例などである．これらを校訂情報と呼ぶが，単なる註ではなく校訂本のテキストの形態の１つである．ところで，校訂情報は狭義の校訂情報と校註情報と呼ぶ２つの情報から成る．狭義の校訂情報は解題などのように作品全体に関わる情報であり，テキスト形態の１つである．校註情報は頭註など本文の語彙などに関わる情報である．上述の傍記とは異なるものである．さらに，校註情報は校訂註と解説註に分けて考える．校訂註は本文の異同に関する校訂者の見解や従来の考え方などの参照である．校異に関する註記であるので，校訂上とくに重要な情報と考えられる．解説註は主に本文中の様々な事項に関する解説である．例えば，人物，儀式，官位，あるいはテキストの解釈などである．いずれもテキスト形態の１つと考えられる．</subsubsection>
  <subsubsection title="電子化本文の論理構造">図１(c)に示すように，論理的な原本の構造を定義する．電子化の直接的な対象は原本すなわち校訂本である．原本はその版面情報を保存することを原則とする．理由は電子化本文の根拠を原本において，データの信頼度を保証する必要があるためである．すなわち，原本通りのデータがデータベースに写像されていなければならない．そこで，原本を論理化して考える．論理原本は論理ファイルから成る．すなわち，原本の各ページを論理ファイルとして定義する．論理ファイルは原本のそのページに限定された原文の集まりである．通常，ページや原行の始端または終端では文の中断が起こり得る．これを認識したり，また意味のある文の単位を確定したりすることは結構難しい．文の単位を形式的に定義する．原文は形式的に原行の集合から構成されるから，論理ファイルは原行から構成するものとする．すなわち，文を行によって形式的に定義する．これを論理レコードと呼ぶ．論理レコードはまた原語及び原字から構成される．論理ファイル中の論理レコードは順序性を保存し，かつ論理ファイル自体も順序性を持つ~．以上のことから，電子化本文のデータ記述においては，本の構造，作品の構造，本への作品の位置付けなどを考慮しなければならないことが分かった．また，本文を構成する文，語，字などの要素に対応する傍記と呼ぶテキスト形態の１つを，本文記述としてルール化しなければならない．</subsubsection>
  <subsection title="本文のデータベース化指向">文学研究には本文とそれに関わる諸情報が，同時に参照，処理できなければならない．これは，全文をコンピュータに単に蓄積しただけでは進められない．本文情報のデータベース化を指向する必要がある．全文と様々な属性情報から成る総合的なデータベースを，校訂本文データベースと呼ぶ．電子化本文は本文と傍記から成るが，これは並列的なテキストである．また，校訂情報や校註情報などが加わり，マルチテキストである．とくに，本文は諸本の系譜の中で位置づけられ，諸本の本文比較などが可能でなければならない．本文の氏素性の関連と同定に関する多種多様な情報を組織化し，活用しなければならない．すなわち，このような多重構造を持ったデータの世界は，データベースとして構築することが適当と考えられる．さらに，研究者の研究目的，方法，対象によって自由な活用ができることが不可欠である．例えば，ハイパーテキストなどのユーザインタフェースにより，柔軟かつ高次の活用に応える必要がある．このことから，まず大型コンピュータのデータベース機能を活用し，本文データベース化の基本的開発研究を行うこととした．この成果に基づき，次いでパーソナルデータベース化を進める．パーソナルデータベースではデータの流通を考慮して，例えばCD-ROMなどのパッケージ型の自立型テキストを考慮する．なお，データ記述のルールにはデータベース化を指向した機能を考慮する必要がある．</subsection>
  <section title="データ記述のための基本原則"/>
  <subsubsection title="本文の構造">次に，本文の構造を把握しなければならない．いわゆる文体である．当然，本文の構造はジャンルにより異なり，同じジャンルでも時代や本の体裁により異なる．原・本文は多くの文から構成されている．文には多くの種類がある．データ記述に当たって，文を１つの単位とすることが望まれるが，意味のある文の確定は困難である．そこで，前述のようにデータ記述の基本的単位を論理レコードとした．論理レコードの識別のための記述子をタグと呼ぶ．論理レコードは原本上の位置を保存し，かつ種別についてタグによりマークアップされる．タグには原本の構造を定義するタグと，原・本文の構造を定義するタグがある．論理レコードの順序性はタグにより保持する．意味のある論理レコードの集まりを定義する．論理レコード集と呼ぶ．例えば，和歌集の中の１つの歌の範囲を決める論理レコードの集まり，すなわち作者，題，詞書き，歌などのまとまりである．あるいは，図３に示すような小噺の１つの単位などである．論理ファイルは形式的な論理レコードの集まりとして取り扱う．一方，論理レコード集は上例のように意味のある構造を抽出する場合に用いる．</subsubsection>
  <subsubsection title="作品の構造">文学作品の構造を定義しなければならない．通常，SGMLでは文書型定義（DTD:DocumentTypeDefinition）と呼ばれるもので，ここではこれを作品型定義（TTD:Text-dataTypeDefinition）と呼ぶ．一般に，TTDは全てに共通するような標準型が定義できるわけではない．韻文，散文，戯曲の文体毎に，さらに細かいジャンル対応にTTDを定義する必要がある．すなわち，作品毎にTTDを置く．なお，現在一般に定まった本文DTDまたはTTDは無い．本文研究では，作品の掲載されている原本の体裁などの情報が必要とされる．例えば，原本の何ページの何行目の文という同定が必要である．これは，諸本の本文の様々な差異の対比において必要とされる．通常，SGMLでは文書の構造を論理的なものとして本の体裁，すなわちフォーマットを分離して考える．しかし，古典テキストの研究では，本の物理的な構造と論理的な構造を一体化した考え方をとることが要求される．すなわち，本文の位置情報が必要である．ある本におけるその文の現れる位置の同定である．原本に記載されている底本の位置情報も不可欠な情報である．例えば，表２の噺本大系では原・本文中に「（十五ウ）」などと表記されているが，これは「この位置までが底本の15枚目の裏であること」を意味する．ところで，底本の文，語，字などと校訂本の文，語，字などとの対応は，研究上不可欠な情報として同定されなければならない．換言すれば，写本のテキストと活字本のテキストの文の対応，同定である．しかしながら，このデータ作成は専門家によるかなり高度な作業を必要とする．しかも，作業の負荷がたいへんに重い．そのため，この課題は将来課題とせざるを得ない．以下の考察のために，図２に，表２の東京堂出版「噺本大系」の第五巻「軽口大わらひ」の版面コピーを示す．また，図３に噺本大系の作品構造を５レベルの階層構造で定義する例を示す．なお，記号などは後述する．</subsubsection>
  <subsection title="本文表記の構造"/>
  <subsubsection title="表記の様相">現代文，古文を問わず日本語には欧米文と異った特有の表現がある．文は分かち書きの無い文であり，とくに古文では句読点も無い．文は縦書きであり，割書,虫喰い,囲みがあり，読み，振り，訓点,ヲコト点,各種註記などの多様な傍記を持っている．さらに，任意の位置に参照や書込みがあり，挿し絵，解題，頭註または脚註があり，系図があり，「何々を見よ」などの引用や遷移もある．すなわち，作品は本文と各種情報が混在したハイパーテキスト的である（図２の版面参照）．</subsubsection>
  <subsubsection title="フラグ方式">原・本文は本文と傍記によって表現される．本文の記述には文字セットを除き特段のルールは必要ではない．傍記の記述にはルールが必要である．一般に，傍記はその文の要素への指示として表される．文の要素を本文素と呼ぶ．本文素とは意味のある語や字を単位とする概念ではなく，傍記の対象となる語や字などの論理的な単位である．傍記は必ずしも意味のある語に指示されるわけではなく，例えばその語にとって意味的に不可分の下位構成語や字に指示されることも多い．傍記の表記は本文素に対する並列的なまた補足的な文や記号から成る．これを傍記素と呼ぶ．したがって，本文素に対する傍記の位置付けが決まればその記述が可能である．この位置付けの記述子はフラグと呼ばれる．フラグは本文素並びに本文素の間に対する傍記の位置を示すために使用する．本文素の間とは字間や語間などであり，傍記はこれらの間にも指示される．これにより，傍記を論理レコード中に埋め込み記述することができる．一方，特殊な構造を持つ文の表記形式については，フラグを構造的に定義する制御記号を定め，その変換規則を定める．これらには虫喰いとその各種変形，図式的なテキスト表現（系図など），割書，２重傍記，版本における書誌的事項などが定義されている．</subsubsection>
  <subsubsection title="文字セット">文字種が多い．本文は書写による時代による複雑な変遷，伝搬過程がある．電子化本文の文字セットを閉じることは不可能である．文字セットには梵字などの各国語文字，踊り字,謡印,音曲記号，注記記号などの他，絵文字に代表されるような特殊な文字や記号もある．原文に使われている文字セットは原則として保存する．ただし，踊り字，謡印などのような特殊な文字や記号は，適切な文字や記号に置換する．例として，日本古典文学大系を見てみる．これは旧漢字，旧仮名使いで表記されている．現在のJISコ−ド表（JIS78を用いている）では漢字字体についての規則性はなく，旧字体と新字体が混在している．そのため，JISコ−ド表に定義している旧漢字はそのまま使う．JIS外の旧漢字でその新字体がJIS内にある場合はこの新字体を用いる．その新字体がJIS外であればその文字を作成する．JIS外字の内，新字体を持たない旧字体の漢字は作成する．国文学研究資料館が定義するJIS外字（約2600字）は基本文字として使う．このような簡単な規則を定めて電子化した場合に，日本古典文学大系には約３千種のJIS外字がある．この内の約600種は作成すべき文字と認識されている．ただし，データ流通を考える場合にはあまりJIS外字を増やすべきではない．なお，噺本大系はJIS内字に拠っているので，JIS外字はないが，この場合には絵文字などの特殊文字が多い．使用する文字セットはその型をTTDの先頭で定義する．</subsubsection>
  <subsection title="付加価値づけ">国文学の電子化本文に要求される機能に，まず語彙索引の作成がある．日本語による文は語単位の分かち書きの無い文からなる．そこで，日本語の全文データベースを作成する場合は，その文を分かち書きしなければならない．さらに，その単位毎に表記，読み，品詞などの属性情報を付加する必要がある．しかし，分かち書きを行うことは一般に容易ではない．次のような問題がある．作品は時代，ジャンルの範囲が広範である．また，作品は個々に文体が異なるために，語彙索引の作成，管理，利用の取扱いが異なる．最も重要な点は，研究者によって語単位の確定やその属性に対する認識が異なることである．したがって，第１段階では分かち書きをしたデータ作成は行わない．利用する研究者が行うものとする．そのための分かち書きと属性付加に関するルールのみを定める．</subsection>
  <section title="データ記述文法 --- KOKIN ルール"/>
  <subsection title="前提">上記の問題を全て解決できているわけではない．電子化本文の対象は前述の校訂本，版本であるから，符号化の規則はこの範囲を原則としている．KOKINルールと呼ぶデータ記述文法を定め，データ作成に当った．これは自立型のデータファイルとして流通できること，並びに本文データベースに登録できることを条件にしている．KOKINルールは３種の規則から成る．なお，この規則は研究者が日常的に使用できることを前提に作られており，単純ではあるが機能は充足していなければならない．以下に，ルールの基本構造をまとめる．文献による噺本大系を具体例に用いる．</subsection>
  <subsection title="KOKIN ルール＃１">KOKINルール＃１は作品のTTDを定義する．TTDは論理ファイルの順序並びである．論理ファイルは論理レコードの順序並びである．論理レコードはその型と性質がタグにより定義される．したがって，TTDの定義はタグリストで表すことができる．なお，タグを持たない論理レコードはない．図４に，論理レコードの基本形を多少説明を省くがBNFで定義したものを示す．論理レコードの基本形はタグと情報部から構成される．情報部は原文の本文データの本体部分であり，算用数字または日本語文字列で表現される．表３に，タグの種類と定義の抜粋例を示す．また，表４にタグの書式と文法の定義例を示す．タグは英字により定義し，属性は算用数字（いずれも全角文字），または日本語文字列による．原則として，論理レコードは開始記号“¥”で始まり，タグを定義し，必要な情報部による本文データが続き，終結記号“★”で終了する．自明の開始記号は省略可とする．これらの記号に特段の意味はなく，利用者の見た目の分かり易さを重視した．なお，作品毎に独自に定義するタグがある．これをローカルルールと呼ぶ．噺本大系に関する作品構造（TTD）の定義例を，付録に示す．また，そのデータ記述例（初期データ入力例）を，噺本大系第五巻「軽口大わらひ」について，付録に示す．</subsection>
  <subsection title="KOKIN ルール＃２">KOKINルール＃２は，日本語の特有な表記のためのデータ記述のルールである．主として傍記記述の文法である．傍記はテキストであるが，本文に対する付随的な情報と考え，意味を考えない．例えば，読み，振り漢字，校異註，参照などの区別をしない．すなわち，本文に対する傍記の位置付けである論理関係を定義する．この記述子がフラグである．図５に，BNFによりフラグ文法を定義した抜粋例を示す．また，下記で用いる例を図中にまとめる．フラグは，本文素への傍記の位置の開始及び終結を指示しなければならない．これらを開始フラグ及び終結フラグと呼ぶ．終結フラグに続いて開始フラグが現れる場合は，終結フラグを省略することができる（フラグの縮約と言う）．とくに，字間，語間などの間の位置を示すフラグは開始と終結を同時に兼ねる．これを間フラグと呼ぶ．なお，間フラグに続いて開始フラグが現れる場合（傍記が独立している）は，フラグの省略は無い．特殊な傍記などの記述のための制御記述子を定義する．以下に代表例（記述例は図５）を示す．縦書である本文素の左右の傍記を左右傍記と呼ぶ．左右傍記制御記述子“｜”により，右傍記と左傍記を識別する．記述順序は右傍記優先である．２重傍記は２重傍記制御記述子“＃”により識別する．記述順序は右側傍記優先である．文の特殊な表記の記述規則も定める．例えば，虫喰いは様々な表記形式がある．個別の虫喰いは原則として文字“□”に置き換える．四角で囲った虫喰い文字列は，推量された文字列を補ったものである．虫喰い領域記述子“◇”により記述する．同様に，領域を指定する記述子はそれぞれの性質毎に定める．例えば，割書は領域記述子“＠”により識別する．傍記データの記述規則を定める．傍記データは原文のままとする．傍記には，元来底本に表記されている振り仮名や漢字などがあり，また原本の校異などに関する種々の校訂註がある．データ記述においては傍記の種類の区別はしない．すなわち，傍記の属性情報は定義しない．特殊文字の置換規則を定める．例えば，古文でよく使われる２字以上の踊り字“”は，清音，半濁音，濁音別に定める繰返し記号により置換する．例えば，ｎ字の清音の踊り字はｎを繰返し音字数とし，“＋ｎ”と記述する．</subsection>
  <subsection title="KOKIN ルール＃３">分かち書きを行い，品詞情報や各種属性情報を付加するための規則である．付加価値付けと呼んでいる．ルール化の基礎を語彙索引の作成に置く．すなわち，文を語あるいは接辞などの造語成分に区切り（語単位），これに対する読みを付して，読みによる５０音順に配列する．同一語を一ヶ所に集めるために，活用語は終止形を基本とする読みを与える．さらに，同音異義語を区別するため漢字を与える．掛詞などの両用語の掲出を考慮する．品詞情報を付加する．とくに，名詞では人物名，官職と人物の同定，地名の同定を考慮する．一方では，原文の誤字，脱字などや特殊語彙の注記の表現なども必要である．図６に，ルールの典型例を示す．KOKINルール＃２と同様の書式であるが，フラグ記号に空白を用いて語単位（または形態，形態素など）を確定し，（）内に属性情報を付す．属性情報は語単位に対して，種別を［］などで括り与える．属性情報の記述は傍記と同じ形式である．語単位の確定や属性情報の種類と目的などは，研究者の研究目的によって異なるから，これら全てについて前もって定義することはできない．このような背景から，ルール＃３は現在未完成である．また，先に述べたように，第１段階では分かち書きは行わない．</subsection>
  <section title="評価">KOKINルールに基づいて，表２に示す作品のデータ記述を行い，データ作成を行った．これらのデータ構文の正当性の検証は，専用のパーサシステムを作り確認した．詳細は割愛するが，KOKINルール自体に特段の問題はない．このシステムはむしろデータ作成上のエラーチェックに有効であった．また，ルール化されたデータから元のデータを再現する検証を行い，確認した．これは印刷組版までの再現ではなく，原本の形式上の再現として行った．次に，KOKINルールで作成したデータは，研究者が研究現場で実際に使えるかということの評価が必要である．すなわち，ルール化されたデータの有用性，有効性の検証である．そこで，次のような課題について実証実験を行った．</section>
  <subsection title="校訂本文データベース">KOKINルールで記述したデータは，校訂本文データベースとして定義可能でかつ実装できなければならない．とくに，作品の本文をどのようにデータベースに定義するかの問題がある．本文の連続性を保存し，文体の構造を規定し，文や語や字の検索，研究を可能としなければならない．校訂本文データベースは本文，書誌，注釈，ユーティリティという４つの実体とそれらの関連により，概念モデルが定義されている．すなわち，図１に示した電子化本文の情報構造を定義するモデルとして実現されている．本文実体は，本文情報すなわち本文と傍記のデータベースである．作品単位でその本文情報を蓄積するが，KOKINルール＃１で規定した論理レコードを定義域とする．KOKINルール＃２は論理レコードを構成するデータとして取り扱う．書誌実体は本の構造を含む本情報である．校訂本情報と文献資料情報のデータベースである．また，TTDのデータベースでもあり，校訂本の目次構成や文書構造及び文体などの属性情報を持つ．注釈実体は校註情報の内，解説註のデータベースである．ユーティリティ実体は校註情報の内，校訂註を蓄積し，また校訂本作成時の凡例に関する情報やシステム及び作品の利用案内情報を持つ．実現の詳細は割愛するが，フルテキストを定義するデータモデルはないので，関係モデルをベースに開発した．実装はHITACM860/60上に，DBMSに関係モデルであるXDM（日立製作所製）を用いた．本文の入れ子または階層構造や連続性は全て正規形に変換している．したがって，各関係表は多くのポインタ属性を持たざるを得ない．また，標準のSQLでは構造を持つ文書に対して，例えば繰返し，入れ子などに関しての検索機能が不足である．そのため，文書の論理構造を定義するDQL:DocumentQueryLanguageを考慮している．まず，案内的なディレクトリサービスを考えている．機能的にはダウンロードを可能とし，文字列に基づくKWIC索引作成などを行う．現在，国文学研究資料館において表２のデータベースの試行運用が行われている．</subsection>
  <subsection title="CD-ROMの作成">データ流通を一歩進めるものとして，KOKINルール記述のデータのCD-ROM化，並びに検索サーバとしてCD-ROM上の必要な文字列を検索する機能システムについて検討した．CD-ROM検索サーバはソニー株式会社との共同研究により，同社のCD-ROMハンドラであるMediaFinderをベースとした検索サーバと，その利用システムを開発した．検索サーバにワークステーション（NEWS）を用いて，CSSとして実装している．一方，MS-WINDOWSの下でのパソコン版システムとして，サーバとユーザ機能を一体化したMediaFinder（同一名称である）を開発している．CD-ROMの作成ではMediaFinderのデータ構造に，KOKINルールによる噺本大系の本文データを変換する必要がある．データ構造は単純化し，２階層とした．１枚のCD-ROMには複数のMediaFinder型データベースが定義できる．また，データベースは項目と呼ぶ単位に分類する．一般に，データベース中の項目数の制限はないが，多い場合は当然検索性能に関わる．MediaFinderの設計思想は，項目単位で情報を高速に検索することに置かれている．MediaFinderはハイパーリンクに基づいた検索システムを持っており，噺本大系では２種類の結合を生成している．１つは本文データの構造を定義するタグを指標として，ハイパーリンクを構成したものである．これにより，本文の構成要素（全文，噺，注釈など）を単位とした文字列検索が可能となる．他の１つは，論理ファイル単位（タグＰによる領域）を検索対象とするものである．これにより，校訂本の本文の表記を忠実に再現する．ただし，本文表記の再現であり，ページ像は再現しない．検索機能としては，次の機能を実装している．その他にも，印刷や自前のファイルに取り込むこと，関連する語彙から探すこと，絵や表を取り扱うことも可能としている．このようなシステムを実装し，実験環境に供している．概して評判がよい．</subsection>
  <subsection title="SGML化">KOKINルールは研究者が憶えやすく，使い易い規則として開発されているが，SGMLと互換性を持っている．SGMLによる古典本文や目録の構造記述はデータの標準化を一層推進する．噺本大系，正保版本歌集二十一代集などのデータ記述をSGMLで行った．噺本大系はKOKINルールで記述した本文データから，SGMLへの変換を行った．正保版本歌集は独自仕様で記述された本文データから，SGML変換を行った．いずれも，SGML仕様に基づいたDTDを定義し，Mark-it（SemaSoftwareTechnology社製）と言うSGMLパーサにかけ，自動変換した．DTDを如何にうまく定義するかがポイントである．KOKINルール＃１の変換は比較的簡単である．KOKINルール＃２の変換は日本語の表記構造の認識にあるため，困難な場合が多い．例えば，傍記の泣き別れである（図５参照）．また，論理レコードの順序性の保持は，SGMLでの記述は難しい．現在，技術検討を行っている．なお，SGML化の詳細は別途報告の予定である（例えば，）．変換されたSGMLデータは，例えばMark-itでTex形式のデータに変換し，印刷版面に近い版下出力などが可能である．SGMLからTexへの自動変換も行った．また，Open-Text（Open-Text社製）と言うフルテキストデータベース検索システムを用いれば，DTDで定義された要素を指定する語彙検索が可能である．これらは，現在試行実験を行っている．</subsection>
  <section title="あとがき">国文学作品のテキストデータ記述文法について述べた．全ての時代，ジャンルに渡る本文を，ここで述べたデータ記述文法で記述できるわけではない．作品毎に細部の機能拡張が必要である．ただし，この骨格は有効であると考えている．国文学では，作品の本文を同定すること，すなわち定本を確定することが極めて重要とされる．ある作品の本は書写などによる永い伝搬過程を持っているから，本文それ自体に多くの異動が発生している．諸本の系譜を知らなくては，本文の確立あるいは解釈は成立しない．このことを前提として，KOKINルールは作られている．また，KOKINルールでは校訂本を記述できる．KOKINルールは国文学者にとって取り扱いが容易な文法である．データ記述において，ユーザ定義が容易であるため自由度が高く，機能拡張性に富む．すでに，データ作成も始められている．本文データベースの目的は，既定の活字本をコンピュータに写し取るのではなく，また本を作ることでもない．本文がコンピュータに入力されたとき，研究の多様な展開に寄与できることを目的としている．したがって，利用者が個人的に自由に活用できるデータベースでなければならない．そのための試みとして，大型コンピュータによるデータベースサービスの他に，CD-ROM化についての検討も行っている．なお，データ流通について，とくにJIS外字の取り扱いは，現在有効適切な対策は立てられていない．大きな将来課題である．データ作成作業は多くの人手と時間と費用を要す．とくに，異なる多量な作品を対象としているから，深く広い専門的知識と有効適切なかつ総合的な作業管理を必要としている．とりわけ，データの信頼性確保のための校正には多大の労力を強いられている．最近，欧米を中心にフルテキストの標準化計画（TEI）が進められている．これは，現在のところ英字を中心とするSGMLに基礎を置く多様なドキュメント類のデータ流通，蓄積を目的としているが，これへの日本語としての対応が求められている．本稿でのデータ記述文法は独自なものであるが，基本的考え方は共通である．また，一部の作品については機能互換性を検証している．ただし，国文学作品の全般に渡る標準化は極めて困難なことと考えている．本研究がその一助となれば幸いである．</section>
  <section title="国文学の用語">主として，広辞苑（1983，岩波書店，第三版）により，読みのABC順で示す．</section>
  <section title="噺本大系の作品構造(TTDの例)"/>
  <section title="噺本大系第5巻「軽口大わらひ」のデータ記述例">document</section>
</root>
