<?xml version="1.0" ?>
<root>
  <title>構文付きコーパスの作成と類似用例検索システムへの応用</title>
  <author>兵藤安昭河田実成応江黔池田尚志</author>
  <jabstract>本論文では，まず，表層的情報のみを用いて安定的・高精度に構文解析を行う骨格構造解析の方法について述べる．次に，これを用いて行った8万用例文に対する構文付きコーパスの作成について触れ，骨格構造解析の有効性について述べる．さらに，この構文付きコーパスを対象として構築した類似用例検索システムについて述べる．本システムは，(1)構文的制約(係り受け構造)を指定して検索できるので，単語レベルの検索では検索されてしまうような多くの不適切な用例を絞り込むことができる(2)分類語彙表を利用した意味コード化により，類似用例の検索も可能である(3)インデックスに構文情報を含めることにより，高速な構造検索を実現している(4)ユーザはウインドウ上で，三角表を用いた構文構造のブラウジング，検索パターンの指定などができ，使いやすいインタフェースを実現している，などの特徴がある．</jabstract>
  <jkeywords>構文付きコーパス，骨格構造解析,類似用例検索，シソーラス</jkeywords>
  <section title="はじめに">近年，電子化された大規模なテキストデータベース(コーパス)が身近に存在するようになり，その中から必要とする情報のみを高速に検索することができるテキスト検索システムの重要性が改めて認識されるようになってきた．また，検索の目的としても，単にある文字列を検索してくるというだけでなく，用例ベースの翻訳支援システムなどで要求されるように，ある言い回し，ある種の意味内容について検索してくるといった高度な検索が求められるようになってきた．このような高度な検索のためには，検索対象であるテキストデータを解析して種々の情報をあらかじめ付加しておく必要がある(タグ付きコーパス)．タグ付きコーパスとしては，形態素解析を行って単語に分割し，品詞情報を付加したものが作成されているが，前述のような検索要求に対しては，これではまだ不十分であり，構文情報を付加したデータが望まれる．しかし，長文を含む一般の大量のテキストに対して，安定的に高精度の構文解析を行うことは現状ではまだ困難である．我々は以前，人手により構文解析したコーパス(約3500文)を実験的に作成し，これを対象とした用例検索システムTWIXの構築を行ったが，実用的なレベルの大規模な構文付きコーパスを作成するには人手による方法では現実的ではない．そこで我々は，必ずしも常に完全な構文木ではないが，場合によっては部分的に曖昧さを残したままの解析木を，表層的な情報のみを用いて安定的に求める骨格構造解析手法を開発し，これを用いて構文付きコーパスを構築することを試みた．さらに，この構文付きコーパスを対象として，分類語彙表の意味分類を利用した意味コード化をも加え，類似用例検索システムの構築を行った．本システムでは，構文的制約(係り受け構造)を指定して検索できるので，単語レベルの検索では検索されてしまうような多くの不適切な用例を絞り込むことが可能となる．本研究では，講談社和英辞典およびオーム社科学技術和英大辞典の用例(約8万文)について，骨格構造解析により構文付きコーパスの作成を行なった．このうち200文を取り出して解析結果を評価したところ，骨格構造解析結果中に正しい解析木を含んでいるものは約93%，その中で，係り先が曖昧な文節は約8%であり，高い精度が得られることを確認した．また，このコーパスを対象として類似用例検索システムによる検索実験を行い，骨格構文構造を用いることの有効性，さらに意味コード化の有用性を確認した．以下では，２章で骨格構造解析と構文付きコーパスの作成方法について述べ，３章で類似用例検索システムの実現方法，４章で検索実験とそれについての考察を行う．</section>
  <section title="構文付きコーパス">ある単語が現れるか否かだけでなく，単語間の関係すなわち係り受け関係をも指定して用例を検索することができれば，ある言い回しを含んだ文を検索することや，ある意味内容を含んだ文を検索することなど，検索対象をさらに絞り込んだ高度の検索をすることができる．そのためには，単語，品詞などの形態素情報をタグとして付加するだけでは不十分で，構文情報が付与されたコーパスを作成しなければならない．しかし，完全な構文解析には意味情報も必要であり，長文を含む大量のテキストに対して安定的に高い精度で構文解析を行なうことは現在のところ未だ困難である．そこで，我々は，完全な構文解析木を得るものではないが，文の骨格的な構造を表層情報のみを用いて解析する方法を開発した．この方法は，意味を考慮しないと正確に解析できない部分については，曖昧なまま残しておき，それ以外の文全体の構造を正確に把握しようとするものである．本研究では，対訳付の辞書用例8万文について，骨格構造解析により構文付きコーパスの作成を行なった．このうち200文を取り出して解析結果を評価したところ，骨格構造解析結果中に正しい解析木を含んでいるものは約93%，その中で，係り先が曖昧な文節は約8%であった．以下2.1節で骨格構造解析の概要を述べ，2.2節で構文付コーパスの作成実験について述べる．</section>
  <subsection title="骨格構造解析">骨格構造解析は次の２段階により行なう．(1)形態素解析を行なって文節列を求め，係り受けに関する文節の属性(文節カテゴリ)を求める．(2)文節カテゴリと以下に述べるブロック化規則に基づいて文節列に次々とN近傍ブロック化処理を施す．N近傍ブロック化とは隣接するN文節(あるいはNブロック)間の係り受け関係を定めることであり，場合によっては曖昧な係り受け関係をそのまま含む．このように本手法では，係り受け関係は隣接するN近傍において構成されるという仮説に基づいている．実際にはN=3として解析している．</subsection>
  <subsubsection title="形態素解析と文節カテゴリの付与">まず始めに，文を単語単位に分割し，それらを文節単位に区切る．そして，各文節の形態素情報を元に文節カテゴリを付与する．文節カテゴリとは，文節自身のタイプ(自立語の品詞)と係り先文節のタイプによりカテゴライズしたもので，文節自身のタイプを，体(名詞)，用(動詞，形容詞，形容動詞)，副(副詞，連体詞)，接(接続詞)の４つのに大分類し，これらの組合せにより「体用」「体体」などの１０種のカテゴリを設けた．その他に，文節が並列構造を構成する可能性があることを示す「体並，用並」，主題を表す機能語「は・では」が含まれる文節「は用」，時を表す名詞が含まれる文節「時用」の４つのカテゴリを設けている．</subsubsection>
  <subsubsection title="係り受けブロック化規則による文節列のブロック化">ブロック化処理では，Nブロック先までを係り受けの範囲として調べる．N=3とした時，ブロック内の係り受け可能性の組合せは文節カテゴリに基づけば，図に示す2^6=64通りが考えられる．このうち，図(a)--(l)の30通りがブロック化可能なパターンである．例えば，図(a)の場合は，文節Aは文節Bに係ると解析され，文節A,Bを１つのブロックとしてブロック化を行う．また，ブロック化が可能なパターンの中で，図(h)(i)(j)(l)については，曖昧さを含んだブロックとして解析される．例えば，図(h)の場合は，文節Aは文節Bか文節Cに係ると解析される．その他のパターン(34通り)は，ブロック化が不可能なパターンである．図(m)の8通りは文節AがB,C,Dのいずれにも係りえないためブロック化が不可能なパターン，図(n)--(q)の10通りは，非交差条件によりブロック化できないパターン，図(r)--(w)の16通りは，文節カテゴリの組合せにより出現しえないパターンである．ブロック化の途中で，読点が出現した時は，その文節までをブロック化の範囲として解析し，ブロック化を一時中断しておく(読点ブロック)．ここで，Nブロック前か，直前の読点文節のいづれか遠いブロックに戻り，ブロック化が可能な状態に変化しているかどうか順次調べ，その後，読点ブロックの次の文節を起点とするブロック化処理を行う．また，係り可能性のパターンが図(m)--(q)に該当する時には，ブロック化が行われず，必然的にブロック化が停止する．この場合も，読点で停止した時と同様の処理を行うこのようにして，N文節よりも遠い文節と係り受け関係をもつことが可能となるが，この場合でも，ブロックで見るとその関係はＮブロック以内になっている．</subsubsection>
  <subsubsection title="ブロック化処理手順例">ブロック化処理の手順例を図に示す．文頭より解析を始め「一度」から「汚れた」，「汚れた」から「環境を」，「環境を」から「戻す」までにブロック化規則，図-(a),(a),(f)をそれぞれ適用してブロック化を施す(図-(1))．次に，先にブロック化された「一度…戻す」から「難しさを」までをブロック化する．これにより「戻す」の係り先は「ことの」と「難しさを」の２通りがあると解析される．その後「難しさを」から「体験している」，「体験している」から「日本は，」までをブロック化する(図-(3))．文節カテゴリ「は用」は主題を表す文節であって，一般に後続するいくつかの文節に係る可能性がある．そのため，このような文節の係り先は保留して，次の文節「技術援助の」からブロック化を行う．以下，同様に解析を進める．</subsubsection>
  <subsubsection title="骨格構造データ">骨格構造データは，原テキストに骨格構造解析を施したものである．実験では，形態素解析用の自立語辞書としてはＥＤＲ日本語単語辞書より単語の見出し・品詞情報のみを取り出したものを，機能語辞書については我々が実際のテキストベースから収集し拡張，整理した複合機能語辞書(約200のグループ，見出し語数約1500語)を用いた．データは次のような形式で登録されている．*5mm(・・・(文節番号((自立語係り先文節列)機能語列文節カテゴリ)・・・)活用語は終止形に戻し，複合語は，その構成語を＃で連接して登録してある．機能語は，複合機能語辞書中のグループ名で登録した．例えば「ている」「てはいる」「てもいる」のように意味的には同じであるが，派生的な語は同じ機能語として登録されている．</subsubsection>
  <subsubsection title="意味分類コード化データ">類似用例の検索を実現するために，分類語彙表を用いて，文節内の自立語(複合語は，その構成語各々)に対して，意味分類を用いた番号付けによってコード化を施した(意味分類コード)．このコード化により，意味分類コードの前方一致位置よって完全一致検索を含めた３つのレベルの曖昧検索が可能となる．*5mm表に，この8万文の中から抜き出したそれぞれ100文について，形態素解析，文節カテゴリ付け，骨格構造解析での正解文数を示す．講談社和英辞典については，骨格構造解析結果が正しい解析木を含んでいるものは100文中で97文，科学技術和英大辞典では90文であった．誤りのほとんどは，形態素解析あるいは文節カテゴリ付けの失敗によるものであり，これらが正しく行われば骨格構造解析そのものは，98%以上の精度で正しい解析木を含むものが得られる．また，100文中で，係り先が特定できない文節(曖昧文節)は，科学技術和英大辞典では約9%出現した．係り先が１つに特定できないと，構造を指定して検索する際に，検索パターンと構文的には異なるものを検索してしまう可能性がある．この点については４章で述べる．</subsubsection>
  <section title="類似用例検索システム">2章で述べた骨格構造解析によって構文付きコーパスを作成し，それを対象として用例検索システムを構築した。この用例検索システムでは，単語や品詞情報などの形態素的制約だけではなく，構文的制約(係り受け関係)を指定して検索することができる．この構文的制約によってユーザの検索意図に反する多くの不用な用例を省き，必要な用例に絞り込んだ検索をする．また，検索対象とするコーパスは分類語彙表により意味分類コード化処理が施してあるため，類似用例を検索することも容易である．以下，3.1節でシステムの概要を，3.2節で構造コードを含む索引表について述べ，3.3節で検索アルゴリズム，3.4節で本システムのインタフェースについて述べる．</section>
  <subsection title="システムの概要">システム構成図を図に示す．本システムは，構文付きコーパス，索引表，入力文解析部，検索部，インタフェース部から構成されている．入力された検索対象文は，入力文解析部で解析され，その構造がインタフェースのウインドウ上に表示される．この構造表示の上で，さらに検索したい部分構造を特定することができる．検索は２段階に分けて行われる．まず始めに，検索パターン中の自立語または機能語が出現する文を索引表から検索する(一次検索)．次に，検索された文を対象として，検索パターンと構造的に一致するか否かの照合を行う(二次検索)．</subsection>
  <subsection title="構造検索のための索引表の作成">本システムでは，用例中に出現する自立語，意味分類コード，機能語を対象として索引表を作成した．ただし，機能語「の，は，を，が，に，た」については，索引表に登録していない．本システムでは，索引表は，検索対象を制限するための一次検索において用いるが，これらの機能語は，非常に多くの用例に出現するため，このような効果が小さいからである(表)．検索パターンにこれらの機能語が含まれる場合には，二次検索の際に，これらの機能語が含まれるか否かを調べている．通常の索引表では，図に示すように，ある単語に対して，どの文に出現したかを示す文番号列のみを登録するが，本システムでは，二次検索で構造の照合を行う必要があるので，その単語が出現する文番号だけでなく，単語のテキスト中での出現位置(文節番号)，文節カテゴリコード，係り先文節番号列を同時に登録した(以下，構造コードと呼ぶ)(図)．このような構造コードを登録することにより，二次検索で構造の照合を行う時に，２次記憶上にある構文付きコーパスを再度アクセスすることなく、構造コードに対して検索パターンとの照合を行えばよいので，高速な構造検索が可能となる．</subsection>
  <subsection title="検索アルゴリズム">検索は，以下のように一次検索，二次検索の２段階に分けて行う．一次検索では検索パターン中の単語が現れる文を検索し，二次検索で，検索された文を対象として，検索パターンと構造的に一致するか否かの照合を行う．自立語，機能語による絞り込み(一次検索)本システムは自立語に対して，次のような種類の検索を可能としている．1.単語による完全一致検索2.意味分類コードによる類似用例検索*2em・曖昧レベル１検索・曖昧レベル２検索単語による完全一致検索の場合の一次検索は，入力された単語と完全に一致する文を自立語索引表を用いて検索する．類似用例検索の場合の一次検索は，各単語の意味分類コードを用いて検索を行う．その際，図のように，曖昧レベル１検索では，意味分類コードＡ，Ｂが一致する単語を含む用例を，曖昧レベル２検索では，意味分類コードＡのみが一致する単語を含む用例を検索する．これにより，意味分類コードに対して単純な前方一致検索を行うだけで，その一致位置により２つのレベルの曖昧検索が可能となる．機能語については，例えば「ている，てはいる，てもいる」のような派生的な語は１つのものとして登録してある．そのため「ている」「てはいる」「てもいる」は同じ語として検索される．構造検索(二次検索)二次検索では，索引表にコード化されている構造コード中の文節番号，係り文節番号，文節カテゴリコードを参照して，検索パターンと一次検索で抽出された文との間に構造的一致があるか否かを検査する．例えば，検索パターンが図のように＃に続く番号で表現されているとすると，一次検索において，＃１と＠３，＃２と＠４，＃３と＠５が一致していることがわかる．従って，ここでは＃１と＃３の構造が＠３と＠５の構造と，＃２と＃３の構造が＠４と＠５の構造と同じであれば構造が一致したといえる．骨格構造解析により解析されたコーパスには，係り先が一意に決定されていない場合があるが，そのような場合には，対象とする用例中に検索パターンとの構造が一致するものが含まれていれば，構造的に一致したことにする(図)．また，並列構造を構成する可能性がある文節については，係り先文節は決定されず，「体並・用並」という文節カテゴリが付与されている．そこで，並列構造を指定して用例を検索する際には，対象とする用例の文節カテゴリが一致しているか否かの検査を行うことにより構造の照合を行う(図)．</subsection>
  <subsection title="検索インターフェース">検索システムの実行画面を図に示す．インタフェースはX-Window上に構築されており，ユーザが検索文入力ウィンドウに文を入力すると，骨格構造解析が実行され，解析結果が三角表現を用いてウィンドウ上に表示される．検索パターンの指定は，三角表上で，係り先を示すウインドウ(図中の矢印)をマウスでクリックするという簡単な操作で行われる．検索結果もウインドウ上に表示され，ユーザは検索された用例の構造を三角表上で確認することも可能である．また，構造の三角表現は，縮退表示することも可能である(図)．これにより，長い文の全体構造も，ウインドウ上で一度に把握することができる．</subsection>
  <section title="検索実験">本システムの有効性を検証するために，次の３点について評価を行った．構造検索により，検索パターンと構造が一致しない用例をどの程度，棄却可能か．骨格構造解析手法により解析されたコーパスには，係り先が曖昧な文節が登録されているが，このコーパスを対象として，どの程度，正確な構造検索が可能であるか．分類語彙表を用いた類似用例検索で，どの程度，広範囲に用例を検索できるか．</section>
  <subsection title="検索例および評価">実験では，２章で述べた各辞書用例(講談社和英辞書，オーム社科学技術和英大辞典，合計8万用例)を検索対象として，以下に示す各検索パターンについて検索を行った．「品質」が「向上する」に係る用例「装置を」が「作る」に係る用例「(A)と」と「(B)との」が並列で「バランス」に係る用例「(Aし)ている」が「間」に係る用例「(A)について」と「(B)を」が「行う」に係る用例「〜ように」が「〜なさい」に係る用例結果を表に示す．検索パターン(1),(2),(3)については，分類語彙表を用いた類似用例検索を，(4),(5),(6)では完全一致検索を行なった．また，それぞれの実験で，係り受け構造を指定した場合(構造検索)の検索用例数と，指定しない場合(単語検索)の検索用例数を調べた．講談社和英辞典の用例は単文がほとんどで，構造検索での効果はあまり見られなかった．しかし，長文が数多く含まれている科学技術和英大辞典では，指定した単語が１文中で無関係に現れる場合が多く，係り受け関係を指定することにより，このような数多くの用例を棄却することができた．今回の実験では，骨格構造解析が曖昧な解析結果を含むことに起因して，構造的に検索パターンと一致しない誤った用例を検索してしまったのは合計2文のみであった．また分類語彙表を用いた類似用例検索では，それぞれの実験で，数多くの類似用例が検索されている．以下で各検索結果について詳細に述べる．*-10mm(1)「品質」が「向上する」に係る用例(図)*1em「品質」の同義語として「質，性能」を含む用例が検索されている．単語のみを指定して検索を行うと31文が検索されたが，この中で検索パターンと構造的に一致しない用例が7文含まれていた(図-a)．これらの用例は構造を指定することにより，棄却できる．(2)「装置を」が「作る」に係る用例(図)*1emこの例では，機能語「を」を加えて，検索を行った．従来の単語中心での検索では，このような機能語を加えることにより，係り先の制約を与えようとしていた．しかし，図-aに示すように，１文中に「装置を」と「作る」が無関係に出現する場合も，単語のみを指定した場合には検索されてしまう．(3)「(A)と」と「(B)との」が並列で「バランス」に係る用例(図)*1em「バランス」の類似語として「釣合」「かねあい」が検索されている．この例では，構造を指定した場合の効果は見られなかったが，構造的に検索パターンと一致しない用例も，１文誤って検索されている．図に示すように，骨格構造解析では「放射損失との」の係り先が一意に決定できていないため，この用例も検索パターンと一致するとして検索されてしまう．(4)「(Ａし)ている」が「間」に係る用例(図)*1em機能語「ている」は，コーパス中に出現する頻度が高いため，単語のみを指定した場合には多くの用例が検索される．そこで，この例の場合は検索パターン中の単語の語順や単語間の距離を指定することにより，多くの用例を棄却することも可能である．しかし，この方法では図-bの「しているベアリングの接触面の間」のような構造的には検索パターンと一致する用例も棄却されてしまう．(5),(6)の検索例を，図，図に示す．</subsection>
  <section title="おわりに">本論文では，骨格構造手法による構文情報付きコーパスの構築と，これを対象とした構文指定による類似用例検索システムについて述べた．対訳付き辞書用例8万文について，骨格構造解析により構文付きコーパスの作成を行ったところ，骨格構造解析結果中に正しい解析木を含んでいるものは，200文中で約93%であり，骨格構造解析の有効性を実証できた．誤りの多くは，形態素解析あるいは文節カテゴリ付けの誤りによるもので，この部分については今後改善していく予定である．また，類似用例検索システムでは，骨格構造解析の方法を用いて作成した構文付きコーパスを検索対象とし，係り受け関係を指定して検索することで，単語や品詞などの形態素情報のみでは検索されてしまう多くの不用な用例を，絞り込むことができ，骨格構造解析の有用性を実証することができた．なお，英語対訳付き用例を用いたのは類似用例検索による翻訳支援への応用を念頭においてからであり，今後は，そのような応用システムの具体化についても検討していく予定である．</section>
</root>
