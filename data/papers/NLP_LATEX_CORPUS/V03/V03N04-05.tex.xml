<?xml version="1.0" ?>
<root>
  <title>縮退型共起関係を用いた学習機能付き係り受け解析システム</title>
  <author>安原宏</author>
  <jabstract>実用的な自然言語処理を開発するには大規模な言語資源が必要になる．語彙解析では辞書が共通の言語資源である．一方，構文解析では文法規則が主流になってくる．規則ベースは抽象的で解析時の挙動を理解することは困難であり，規則の規模が大きくなると保守改良が困難になるという課題がある．本論文では実際の文章から縮退型共起関係という２文節間の係り受け関係を品詞と付属語列で表現するデータを抽出し，係り受け解析の唯一の言語資源として利用したシステムを示す．本方式を用いて４０００文から抽出した８０００の縮退型共起関係データを用いたプロトタイプシステムを構築し，５０文の新聞社説で評価実験を行ったところ，８０％の係り受けが成功した．本システムの特徴として，規則駆動では困難な構文規則を学習したり拡張することが共起関係によるデータ駆動の良さから実現可能になっていることが挙げられる．</jabstract>
  <jkeywords>係り受け，依存文法，構文解析，共起関係，連続句</jkeywords>
  <section title="まえがき">自然言語処理のための言語リソースとして語彙辞書が最も基本となるが，構文構造の基本となる構成要素は，２文節間あるいは２単語間の係り受け構造である．係り受け関係は，CFG規則の最も単純な形式であるチョムスキ標準形と見なすことができる．通常この関係は共起関係と呼ばれている．本論文は，文法規則というよりは言語データの一種と見なせる共起関係を用いて日本語の係り受け解析を行い，かつ更新，学習機能を取り入れることにより，カナ漢字変換に見られるような操作性の良さを有する簡便な日本語係り受け解析エンジンを提示することを目的とする．これまで共起関係による自然言語解析には，の研究がある．は本論文に最も関係するもので係り受けによる日本語解析の基礎を与えるものである．は日本語の共起関係の記述単位として品詞と個別単語との中間に位置すると見なせるクラスター分類で与えるとともに半自動的にインクリメンタルに共起辞書を拡大することを述べている．は英語に関して動詞の格ペアーとして共起関係を捉えている．は英語構文解析の規則に共起関係を抽出する補強項を付け加へ，２項以上の多項関係を解析時に自動的に抽出している．しかし，いずれのシステムも共起関係だけから実用規模の係り受け解析を構築したものはない．一般に共起関係はを除き係り側の自立語と付属語（機能語）列および受け側の自立語（終止形）で論じられることが多い．その際，係り側の付属語は両方の自立語の表層格（関係子）として考えられている．は二文節間の関係に着目して受け側も自立語と付属語列として考察した．さらに機械処理の観点から，付属語・補助用言・副詞などの語は個々の単語で記述し，他の語は品詞水準で扱った．これを準品詞水準と称している．本論文では，副詞も含めてすべて自立語は品詞で記述し，付属語列はリテラルで表現することにする．品詞に縮退させているためこれを縮退型共起関係あるいは省略して単に共起関係と呼ぶ．本論文では，実際の文章から機械的に抽出した係り受け関係を共起データとし，いわゆる文法規則の類を一切使用せずに係り受け解析システムを構築する．その際，共起関係の構文情報の中に連続性の概念を導入して，これまで文法的には曖昧であるとされていた構造も本質的に曖昧性が解消出来ているのではないが，実際の文章では出現頻度が少ないとか，分野を限定すれば同一文体が続く傾向があるために係り受けパターンを絞り込めるのではないかと予想して開発した．これは最近研究の盛んなコーパスに基づく統計的言語処理の一つの試みにもなる．また単純な形式の共起関係のみを用いて解析を行うため，日本語の係り受け解析で一文ごとに規則に相当する共起関係を学習する機能を持たせることができ，共起関係の更新機能と併用することで従来のものと比較して，柔軟性，拡張性に富んだシステムが得られる．以下，章では，構文構造と共起関係のデータ構造を定義する．章では本共起関係を用いた学習機能付き日本語係り受け解析システムを説明する．章では解析システムの実験結果を示し，評価を行う．</section>
  <section title="データ構造">構文解析で使用する言語リソースのデータ構造についてその定義を与える．第１は，係り受け関係の表現ための構文木，第２は，係り受け関係の基本データ構造である縮退型共起関係である．</section>
  <subsection title="構文木">日本語の係り受けを解析することをここでは構文解析ともいう．解析結果を与える構文は，工学的観点にたって見やすく工夫している．図にその例を示す．各文節は順序番号を付与して係り先の文節番号と係り受け関係を明示しグラフで表示している．文節は長い文節にも対応できるように縦に配置している．文節の先頭の品詞も明示している．詳細は省くが，このグラフ表示に対して形態素，構文レベルの修正が可能である．修正機能は１００％正解が困難な現状の自然言語処理にとって有用な支援機能である．グラフの上段は形態素解析の結果を示している．</subsection>
  <subsection title="係り受けの連続性">文中で連続した文節が係り受けの関係になっている場合，その係り受けの２文節は「連続」あるいは「連続句」であるという．文中で離れた文節間で係り受け関係があれば「不連続」という．日本語においては特定の係り受け関係は連続して生ずるケースが見られ，これに注目するため連続，不連続を区別している．連続，不連続を付与した係り受け関係においては，連続して用いられる度合の強い係り受け関係は解析において単語に次ぐ重要な言語リソースで，辞書の見出しを単語から句に拡大するとき最初にエントリの候補となるものである．</subsection>
  <subsection title="縮退型共起関係">縮退型共起関係では，文節の自立語列はヘッドとなる最終の自立語の品詞で，付属語列はリテラルとしてそのままの文字列で表現される．句読点も付属語列に含める．係り受け関係は例えばに示したような係り受け関係名で記述する．単に係り受けの関係だけを解析するのであれば関係名は係り側の付属語列で代用するか，あるいはまったく無視しても本処理系には影響を与えない．図に縮退型共起関係のデータ構造とその例を示す．*5mm大文字Ａ，Ｂは自立語品詞，Ｆは付属語品詞列，小文字ａ，ｂは自立語リテラル，ｆは付属語列のリテラルを表わすとすると，一般に共起関係を構文規則として見て，抽象化の強いものから並べると次の４種類に分類される．１）ＡＦＢＦ型，２）ＡｆＢｆ型，３）Ａｆｂｆ型あるいはａｆＢｆ型，４）ａｆｂｆ型である．２），３），４）のように具体的に記述するにしたがって共起関係の数は増大する．通常の構文規則は１）のレベルで記述するのが一般的である．縮退型共起関係は２）の型に属し，その特徴は文節の自立語を品詞で代用していることと受け側の付属語も添付していることである．付属語は付属語相当語を含めて現在６５０語を用いているがオーダ的には組み合わせや句読点を考慮して１０００程度であり，リテラルとした．自立語は１０万のオーダになりそれらをすべて記憶しておくことは２項関係としては動詞が１万とすると名詞と動詞の組み合わせだけでギガのオーダであり，付属語パターンも含めると現状の機械処理の立場からは困難である．これはでも示された考え方であった．本論文では，付属語列の末尾に句読点情報も付与している．なぜなら，現実の文章においては，句読点が係り受け関係の決定に意味を持っているからである．これの有効性は従属節の述語間の係り受けに対してでも示されている．係り受け関係で受け側の付属語列を伴ったＡｆＢｆ型が重要なことは，ＡｆＢでは次にどのような付属語列が来るかはＢのみの品詞情報で決定され，文節Ａの付属語列は関与しないことによる．しかし文法的には等価であるが慣用的な用法が多い自然言語では，特定の付属語を好む場合がある．例えば，文「欧米においては電車で寝ているような光景は決して見られないが，」で，「欧米においては」は動詞に係るというだけの情報では，この文の場合「寝ている」に係るとしてしまうことになる．ＡｆＢｆ型にするとＢに付属語「〜ないが，」が付くパターンを優先して使用することができる．もっと単純な場合では，「Ｎ（名詞）はＡ（形容詞）」の規則で，「彼は若い．」と「彼は長い（トンネルを）」を同じと見てしまう．しかしＢにｆを付与すると「．」が効力を持つ．もちろん組み合わせの数はＡｆＢｆ型がＡｆＢ型より３桁多くなるが，係り受けの絞り込みは良くなる．付属語列をリテラルにしておくメリットは，「男は車に近づいた．」の縮退型共起関係である「ＮはＶた．」*-1mmにより「男は近づいた車を見た．」*-1mmの文で「男は」*-1mmは*-1mm「近づいた」*-1mmではなく*-1mm「見た．」に係る．また「女は赤い服を着た．」で，「女は」は「赤い」に係らないで「着た．」に係っている．「Ｎ助詞Ａ」といったＡＦＢ型の共起記述では「女は」は「赤い」に係ってしまう．もちろん自立語で品詞を使用することによって「髪が長い少女に会った．」の類に関しては「ＮがＡ」の規則が生まれて上記の文の解析を誤らしめて良くないがこれは頻度情報や後述する学習機能によって避けられると考えている．別の解決法は名詞の品詞を細分類したり，のようにクラスター分割することが一つの解決策であるが，本論文では単純な方法を採用した．縮退型共起関係と連続句の概念によって解析の曖昧性は次のように解消できる．では，「彼は山に登って景色を見た．」に対して３つの解析例があるとしているが，連続句を優先すれば「山に」は「登って」に係り，縮退型共起関係「ＮはＶて」が無いか，あるいは在っても「ＮはＶた．」に比較して頻度が少なければ「彼は」は「見た．」に係かる．</subsection>
  <subsection title="共起データベース">共起データベースCOODBとは，係り受け解析の出力から得られる縮退型共起関係を蓄積したデータベースである．但し，頻度は１であるので記憶していない．各レコードは，縮退型共起関係からなっている．それらを文に対応させて記憶することにより，任意の縮退型共起関係から逆にそれが使用された原文を参照することが可能になる．これにより与えられた縮退型共起関係が正しいかどうかの判断を実例文で確認することができる．図に共起データベースの例を示す．共起データベース中の縮退型共起関係をソートして頻度を付与したものをソート済み共起データベースSTCDBと呼ぶ．*3mm</subsection>
  <section title="新解析系"/>
  <subsection title="係り受け文法の定式化">ＡｆＢｆ型の係り受け関係を形式化するとCFGと等価なことが分かる．さらに図でも示したように係り受け関係には頻度や確率が付与されるため確率付きCFGと見なすことも可能である．文節の文法カテゴリをγＢf，δＢf等で表わすと一般の係り受け関係は，δＢg＝γＢfγＢgδＢg＝δＢfγＢgδＢg＝γＢfδＢgδＢg＝δＢfδＢgeqnarrayで表現することが出来る．ここで，γは規則が最初に適用される文節カテゴリに付与しており，δは１度以上規則を適用してできたカテゴリである．カテゴリの添え字γ，δは，意味的には連続，不連続と関係させたものである．連続のものは規則が適用されると文節間にギャップができるため左辺のカテゴリにはγは現われない．またＢは品詞，ｆは付属語リテラルに相当する．~()の右辺の”γＢfγＢg”は文節カテゴリγＢfがγＢgに連続して係ることを示す．（例．机を＝＞運ぶ．）~()の意味はδＢfがγＢgに連続して係ることを表わしている．（例．（大きな＝＞）少年の＝＞頭には）~()はγＢfが不連続にδＢgに係る．（例．少年が〜＞（机を＝＞）運ぶ）~()はδＢfが不連続にδＢgに係ることを示している．（例．（大きな＝＞）少年が〜＞（机を＝＞）運ぶ．）ここで＝＞は連続した係り受け関係を表わし，〜＞は不連続の係り受け関係を意味している．以上の~()，~()の規則は連続フラグが立っている縮退型共起関係から生成され，~()，~()は不連続な縮退型共起関係から生成したものである．もう少し緩い規則として連続，不連続のいずれも上記４つの規則に展開しておくことを考えてもよい．なぜなら，一般に日本語においては連続した共起関係は不連続でも発生し得るし，逆も可能であるからである．いずれにしてもSTCDBをチョムスキー標準形のCFG規則に変換することが出来る．しかしこれは従来のCFGの規則数と比較してオーダの違った規則群になる．解析するのは原理的にCYK法のようなボトムアップ解析によれば可能である．その場合，係り受けの交差も自動的に回避できる．ここでは全解パージングではなくコスト等を導入して最尤解を求めるためにに述べるような独自な系を作成した．</subsection>
  <subsection title="解析系">以下で縮退型共起関係を用いた解析系を記述する．システム構成縮退型共起関係を用いた解析システムの構成を図に示す．本システムで使用する特徴的な言語リソースを以下に示す．いわゆる解析規則はなく，共起関係データベースがその代りになっている．共起関係データベースはフィードバック系になっている．係り受けマトリックス*-2mmこれは，でも与えられているが，本論文では図に示すように行列要素の値を係り受けの可否ではなくコストで与える点とさらにそれらの関係名を記述する点で相違する．ソート済み縮退型共起関係データベースの作成COODB，STCDBともに初期状態は空である．先ず実際の文章からCOODBを収集し，ソートして重複頻度付きの形式でSTCDBを作成する．係り受け解析の結果は共起関係で表現できるから，先ず何らかの手段で解析データを収集する．人手でやるのも可能だが量的に限界がある．解析の結果に対して機械的に収集すればよい．すなわち解析そのものに共起関係を利用することが最終目標であるが，そのためのデータ収集は，人手で解析されたデータや別の解析ツールを使用することができる．これによって本解析エンジンで最低限度の解析ができる程度の容量になるまで蓄積する．今回は，本解析方式（図中の日本語係り受け解析２）とは別の解析システム（日本語係り受け解析１）を用いてCOODBの自動抽出ツールを作成した．STCDBのデータ構造はＢ木や配列として記憶しておく．解析エンジンが始動してそこからデータを収集すればブートストラップになる．解析ステップ以下，解析のステップを順に述べる．先ず，システムは形態素解析を行い，文節に区切られた結果を構文解析に渡す．構文解析では係り受けマトリックスをSTCDBを用いて作成する．その後，文頭の文節から順にその係り先を係り受けマトリックスを用いて非交差条件を守りながらコストの低いものを優先して決定する．したがって係り先の文節はコストが同じなら距離が近いものほど優先することになる．連続する共起関係は，学習で選んだものを除いて最もコストを低くしている．最終的に最小コストの係り受け関係を一つだけ出力する．コストを例えば１から６に設定すると，１は最小コストで６が最大コストになる．後述する学習した共起関係のコストは１とし，連続する共起関係は２，不連続は頻度によって３から５とし，疑わしい共起関係は６とする．データ量が多くなり飽和してくれば頻度の代りに確率を使うことも考えられるが，現状は１文づつの更新で常時頻度が変化しているため確率や頻度計算をすることは避け，連続，不連続だけで選択している．更新機能および学習機能本方式による係り受け解析は１００％の正確さではない．従ってユーザには，失敗に対して，係り先や係り受け関係を修正する機能が提供されている．章で述べたように係り受け解析の結果はグラフ表示が出来るためユーザは任意の係り受け関係を画面上で係り元，係り先および関係名を番号で指示することにより修正することができる．係り受け関係を修正すると，縮退型共起関係の４種類の更新機能を聞いてくる．ユーザはいずれかを選択する．具体的には，１）何もしない．２）現在の共起関係自身が間違っている疑いがある．３）修正結果は新規の共起関係としてSTCDBに登録する．および４）学習機能である．２）の場合は直接削除することはやめて，疑問符を付けておき，コストも最大にする．後日，COODB等を用いて適否を検討するようにしている．４）の学習機能は係り先を変更したり，古い係り受け関係を新しい関係で置き換えることによって起動し，古い関係はコストを高めることにより優先度を下げ，当該共起関係の選択を抑止するようにする．同時に新しく指定した共起関係に対しては~図（ａ）に示した学習フラグをセットして最小のコストを付与する．頻度を高めていく方法もあるが，学習効果を即時に得るためこの方法を採用した．１文の解析が終了するとこの文で指示されたSTCDBに対する上述の共起関係の追加，修正および学習が実行される．以上のステップから，更新機能によってインクリメンタルにSTCDBが拡大していくとともに学習機能によって優先順位が更新され最近の選択結果を優先することが可能になる．同じ構文をこの後に実行すると優先順位に逆転が起こり，正しい係り受け解析が得られる．図に学習例を示す．構文解析が学習によって適応規則を変更していくため，インタラクティブな環境ではワープロのカナ漢字変換に似た学習効果が得られる．学習・更新効果の評価は別の機会にゆずるが，一般的に述べると本方式の特徴は付属語リテラルのパターンを用いることにある．「ですます調」とか「だ文」とかの文体あるいは「〜ですか」のような会話文独特の表現はいずれも付属語が文体を代表しており効果が現われやすい．</subsection>
  <section title="解析実験と評価"/>
  <subsection title="共起データの統計的情報">縮退型の共起関係が係り受け解析にどの程度有効かを調査するために，先ず一つの文章を順に１１０文だけ解析した．これは本解析エンジンとは別の解析を用いた．１つの文章から順々に文を解析しているから言い回しが似ていて共起関係が重複して出現することが期待できる．１１０文を１０文ずつに分割して解析し，その中に重複して含まれる共起関係を抽出した．その結果を表に示す．共起データ数は文の文節数によって変化するが，これらを累積すると次第にそれ以前に解析した共起関係と重複することが多くなる．１０文毎の重複率は１０文内限定とそれ以前のものも利用するのとでは平均約２倍に高まっている．重複したものを一つにカウントしたソート共起データ数と重複を別々にカウントした出現個数の比を収縮率と呼ぶと，文数が増大すると収縮の度合が拡大する傾向が出ている．すなわち収縮率が小さいことは，新規の共起関係の出現率が少ないことを示す．文数をさらに３０００文にまで増大した例が表である．１００文では７０％前半であった収縮率は，１０００文では５０％，３０００文では４０％前半になった．表はSTCDB中の８４１３種類の共起関係の頻度別の分布を示したものである．１回しか出現しない共起関係が８０％を占めており，これは，まだ共起関係が収束していないことを意味している．この程度ではまだ共起パターンが拡散するのであろう．ちなみに最高出現頻度５０９回のものから順に上位７つを示すと，「ＮのＮを」（５０９回），「ＮをＶ（連体形）」（２９１回），「ＮのＮが」（２３１回），「ＮのＮの」（２３０回），「ＮはＶ．」（２２３回），「ＮをＶ．」（２２０回），「ＮのＮは」（１９５回）である．</subsection>
  <subsection title="解析実験">本方式をWS上にインプリメントした．実験で使用したSTCDBのレコード数は上記の共起関係の収集で使用した約４０００文から得られた約８０００種である．この程度の蓄積では必ずしも日本語の共起関係をカバーしていないことは，~表で示したように収縮率が４割程度であることからも明らかである．つまり６つの文節からなる文では５つの係り受け関係が生じるのであるが，その内２つ程度を新規に追加していく必要が残っていることになる．収縮率を裏返せば成功率は６０％以下ということになる．具体的な実験で説明すると，本システムを利用して新たに新聞社説から１００文を入力し，係り受け解析を行った．その結果を~表及び~表に示す．~表の５０文は，~表の１００文中で形態素分割が正しく出力されているものに限定して選択した．構文規則が全く白紙の状態から，４０００文の共起関係を記憶することにより未登録の係り受けを除けば新聞社説の５０文に対して係り受けは成功率７９％である．未登録を失敗とすれば５９％の成功率になる．共起関係を大規模に収集すれば，収縮率が漸近的に小さくなっていくことは上記のデータからも予想できるが，収縮率が１０％を切る（すなわち成功率が９０％を超える）にはどの程度の共起関係を収集すればよいかは現時点のデータでは不十分である．成功率は文の長さにも依存する．５文節程度の短い文に限れば成功率を９０％以上にすることは不可能ではない．上記の実験データは，一般文章の係り受けを解析した場合であった．もし解析範囲をデータベースのフロントエンドや質問応答システム等の自然言語インタフェースあるいは天気予報といった特定分野に限定すると，文節数は少なくなり，使用するパターンも制限されたものが使われるものと思われ，本方式の特徴である規則作成の容易性及びインタラクティブな学習更新機能が即効的に作用することが期待できる．例えば天気予報文でよく出現する「Ｎａ（日中）はＮｂ（南）のＮｃ（風）で，」や「Ｎａ（明日）はＮｂ（冬型）のＮｃ（気圧配置）で，」といった表現では「Ｎａは〜＞Ｎｃで，」の係り受け規則が適用できる．ところが一般の文章では「Ｎａ（最近）はＮｂ（計算機）のＮｃ（おかげ）で，」や「Ｎａ（大統領）はＮｂ（ボストン）のＮｃ（ホテル）で，」のように「Ｎａは〜＞Ｎｃで，」の係り受け規則を適用できないものもある．係り受けの曖昧性の解消が分野を限定すればどの程度の効果を持つかは今後実験を重ねて行く必要がある．</subsection>
  <subsection title="課題">評価実験の解析失敗事例からいくつかの課題が出てきた．以下それらを列挙する．共通事項として，品詞を細分類することや意味情報を用いることが課題解決に必要である．品詞の見直し「この」「あの」と「小さな」は品詞としてはどちらも連体詞であるが，次のように異なる構文役割を持っている．これは品詞体系の課題である．「身体（が｜の）＝＞小さな人」は良いが，「Ｎ（が｜の）＝＞（この｜あの）」は成立しない．「一番＝＞大きな」は良いが，「ＡＤＶ＝＞（この｜あの）」は成立しない．「NをNに」型「産業を中心に」，「技術等を対象に」，「今春を目標に」等がこのタイプになるが，受け側の語彙をサブの品詞カテゴリによって何らかの形でグループ化することが必要である．並列句並列句は構文情報だけでは解釈困難であるから本方式の限界でもある．*-1mm「私は新聞と本を読む．」*-2mmと*-1mm「私は弟と本を読む．」*-2mmの区別には意味情報が必要となる．並列構造の解析をのように形態素解析と係り受け解析の間に挟むのが妥当であろう．省略（文脈）「私は（t）赤いのがよい．」（t）には文脈によって「服は」，「車は」，「ワインは」などが入る．これは一文だけでは「本は面白いのがよい．」のと品詞レベルでは区別不可能で，係り受けが曖昧になる．これも意味情報あるいは品詞細分類が必要である．</subsection>
  <section title="むすび">２文節間の係り受け解析において，共起関係を実際のテキストから抽出し，頻度情報を付与したり，学習機能を利用すれば，構文解析規則に代わる言語リソースに成り得ることを示した．これは規則駆動による解析から事例駆動，データ駆動による解析への一つの例になる．共起関係は見方を変えれば，文脈自由文法になるが，共起関係は文法規則と言うよりはどちらかといえば共起辞書に近い．その理由は，形式が単純であり個数が１０万や百万のオーダになるからである．現在，８５００程度の共起関係で解析システムが動作しているが，これほど単純な規則を用いて一定水準の動作確認が出来たことは自然言語インタフェース等への応用の可能性を示唆している．また，法律，経済，医学等の個別分野における共起関係の分布パターンを特徴抽出することも興味ある研究課題である．解析性能の向上には，本論文で述べた原理的な方法以外に，ＡｆＢｆＣｆ等の３文節以上の多文節間の係り受け関係の導入，並列句を含めた係り受けの曖昧性解消策として従来から研究が進んでいる意味情報の利用，ａｆｂｆ，Ａｆｂｆ等の自立語も含めた文節リテラルによる例外規則としての付与，規則利用による冗長な付属語列を持つ共起関係のコンパクト化など様々な付加手続きを利用して，データ収集と性能評価を行う必要がある．縮退型共起関係を用いた構文解析が実際の自然言語処理の場で使用されるようにするには，たとえばタスクを限定して共起関係の登録数を増大させ新規の縮退型共起関係の登録回数を減らすことが第一の目標になる．もちろん量の増大に伴う副作用も検討していかなければならない．係り受け解析が，２項関係あるいはチョムスキ標準形のような単純なデータ構造を基本として，そのデータ上でのいくつかの条件付与で可能であるとすると，係り受け解析が複雑で抽象的な句構造規則を指向したものではなく，語彙辞書と単純なパターンである縮退型共起関係といったデータ指向の延長線上でかつ推論規則よりも単純なパターンマッチングによって実現可能になることが期待できることから本方式は人間の言語習得に関する研究においても検討材料を提供する可能性があるものと考えられる．document</section>
</root>
