<?xml version="1.0" ?>
<root>
  <title>テキスト音声合成における係り受け解析結果を用いたポーズ挿入処理</title>
  <author>佐藤奈穂子小島裕一望主雅子亀田雅之</author>
  <jabstract>我々は，テキスト音声合成システムのポーズ挿入精度向上のために，言語処理部に構文解析処理を導入し，一文全体の係り受け解析結果を利用したポーズ挿入処理を試みた．本稿では，この結果について報告する．テキストを音声に変換して出力する際には，その内容を感覚的，意味的に捉え易くするために，テキスト中の適当な位置に適当な長さのポーズを与える必要がある．ポーズ位置やポーズ長の設定に，対象文の係り受け解析結果が有効な手がかりになるとの知見が得られているが，従来は実施上の都合から，語彙情報の利用や，局所的なテキスト解析による方法が代用されていた．そこで本稿では言語処理部に軽量かつ高速な構文解析系を導入し，一文全体の係り受け解析のシステム上での実現を試みた．ポーズ挿入の生じ易さの指標としてポーズ挿入尤度を設け，係り受け情報に着目したポーズ挿入規則に基づき，全文節境界にポーズ挿入尤度を設定する．尤度の高い境界から基本ポーズ長レベルを設定した後，各境界に対してアクセント結合処理および呼気段落に基づく閾値による調整を行なう．実際にテキスト音声合成システムに実装し，形態素解析と隣接間係り受け処理のみ実装しているテキスト音声合成ソフトウェアパッケージとの比較実験を行なったところ，ポーズ挿入精度の大幅な向上が得られ，その効果を確認することができた．</jabstract>
  <jkeywords>音声合成，ポーズ挿入，係り受け解析</jkeywords>
  <subsubsection title="2.3.1 実験方法">実験は下記の手順で行なった．使用したサンプルテキストは日本電子工業振興協会の報告評価文の抜粋および小説また，比較対象は形態素解析と隣接間係り受け処理を用いたポーズ挿入処理を実装している既製のテキスト音声合成ソフトウェアパッケージの出力である．サンプルテキストを比較対象のテキスト音声合成ソフトに入力し，ポーズ記号，アクセント句区切り記号を含む発音記号列を自動的に作成する同ソフトにおいて同じサンプルテキストを発音記号列に自動的に変換した後，挿入されたポーズ記号，アクセント句区切り記号を取り除き，「読み」のみの記号列を作成するＱＪＰに同じサンプルテキストを入力し，形態素解析＆構文解析結果を得るＱＪＰの出力結果から係り受け文節を抽出し，係り文節から受け文節までの距離を表の通り各ポーズレベルへ対応づける予め作成しておいた(２)の読み記号列に(４)の結果を反映させ（対応ポーズレベルをポーズ記号に変換して手入力），文節間距離情報を反映した発音記号列を作成する比較対象のテキスト音声合成ソフトが自動作成した(１)の発音記号列と，情報を反映した(５)の発音記号列を比較・評価する</subsubsection>
  <section title="はじめに">テキスト音声合成システムの言語処理部における重要な課題の一つに，ポーズ挿入処理が挙げられる．ポーズ挿入処理は，音声化され，出力されたテキストの内容を人間が感覚的，意味的に捉えやすくするために，テキスト中の適当な位置に適当な長さのポーズを与える，テキスト音声合成に必須の技術であり，入力テキストの書き手が意識して挿入した句読点以外にも構文構造とポーズ挿入位置の関係が研究されてきた．従来の研究から，ポーズは構文的区切りと一致する，また特定の句構造ポーズが挿入され易いという知見が得られている．この他にも，文節間の係り受け距離と文節の長さが，ポーズ挿入の有効な手がかりになるという知見，さらに，係り受け関係，句読点，文中における位置情報を加えることで精度が高まると期待できるとの報告もある．しかし，これらは係り受け距離や係り受け関係スト情報が既に得られているとの前提に立った報告であり，実際にそれらのテキスト情報を求めるためには構文解析処理が別途必要となる．一般に構文解析処理は，大量の言語知識データを要する，テキストから精度の高い統語構造の自動抽出が困難，処理が重くなる，などといった問題から，実働するシステムにおいては，簡易なテキスト解析で得られる単語の品詞やモーラ数など，形態素解析レベルで得られる情報や，局所的な数文節に着目した簡易な係り受け解析が広く用いられている．係り受けの範囲については，隣接する数文節の範囲内に限定できるとの報告，実際の文章において，隣り合う２文節の係り受けが，隣接２文節，もしくは局所的け解析結果を用いた方法でかなり高精度のポーズ挿入が実現できることが明らかになっている．しかしながら，人間が聞いて理解しやすい構文的まとまりは，複数の文節によって様々なパタンで構成されており，上記方法でも限界はある．例えば，小説や随筆など，一文がある程度長く，文の構造が複雑なものになると，係り受けが３文節以上に跨る文の存在は少なくない．予め係り受けの範囲を３文節に限定してしまうことで，構文的まとまりの一節中にポーズが挿入されるなど不自然な読み上げを頻出する場合がある．一方，別のアプローチの一つに，コーパスを利用した統計的なポーズ挿入位置の予測方法が報告されている．文献では，隣接２単語の接続のしやすさをてスコア化し，それを用いたポーズ挿入方法を提案している．また，文献では，副助詞や接続助詞などの文法的役割に着目し，コーパスを用いてそれらの語彙の後に来るポーズの長さをレベル化し，それを用いたポーズ挿入方法を提案している．さらに文献では係り受け情報付きコーパスの学習とポーズ情報付きコーパスの再学習によりフレーズ境界前後の形態情報とポーズ長の関係を統計的に得る方法を提案している．しかし，これらの方法は予め大量の学習用データを要し，さらにデータの分野依存が大きいと考えられる．本稿では，大量の学習用データに頼らず，長距離の係り受け解析をする，軽量・高速な構文解析処理を用いたポーズ挿入手法について報告する．本手法では，解析の範囲を文の長さや文節数で限定せず，一文を単位とした係り受け解析の情報を利用する．また，本手法をＰＣ上で実動するレベルのテキスト音声合成システムに実装して，その効果を確認した．</section>
  <section title="構文解析処理の導入"/>
  <subsection title="利用する構文解析処理系">本手法では，日本語解析系QuickJapaneseParser（以下，ＱＪＰ）をテキスト音声合成システムの構文解析に利用する．先に述べたように，一般的な構文解析で，実用レベルの開発を難しくしている要因に，詳細かつ膨大な（場合によっては意味まで踏み込んだ）規則を要する，生成される候補が多い，計算量も多い，などの問題がある．また，その解析精度も形態素解析技術に比べると処理が複雑であるため，なかなか実用レベルになりにくい．しかし，ＱＪＰは，日本語解析を要する応用系システムへの組み込みが容易な言語処理ライブラリであり，効率的な処理が実現可能である．ＱＪＰは字種の特徴を利用した小規模辞書ベースの形態素解析系と，形態素情報ベースの規則による構文解析系の２つの処理系で構成されている．主に形態素情報による規則を用いて解析処理を行なうため，シソーラスや意味情報など，構築およびメインテナンスに労力を要する膨大な言語知識データは不要であることを大きな特徴としている．構文解析系は，一文毎に単語列を文節にまとめる際，文節にはその構成単語の品詞情報を利用して文節属性が設定される．その文節属性や品詞情報に基づき係り受け可能文節対を検出し，非交差規則，再近接文節選択をベースに，様々なヒューリスティックを用いた例外処理も用いて，尤もらしい係り受け文節対を確定する．品詞情報とその組み合わせで構文解析処理を行なうため，解析規則等のデータ開発コストが抑えられ，軽量さ，高速さを実現できている．また，長文に対しての頑健さも兼ね備えているため音声合成向けのテキスト解析に導入しやすい．さらに，係り受け処理の単位が一文であり，文節数が限定されないため，対象となった文中の本来の文法的区切り位置を得ることが可能である．</subsection>
  <subsection title="ポーズ挿入のための利用可能情報">構文解析処理を導入することで，利用可能なテキスト情報が大幅に増える．これらの情報をどのように利用するかで様々な手法が考えられ得る．まず，形態素解析結果から得られるポーズ挿入処理に有益なテキスト情報は，以下の通りである．	句読点位置情報	語彙レベルの定性的情報		感動詞，接続詞，提題の意味の「は」の直後にはポーズが入りやすい，などの品詞や語特有の性質	文節モーラ長	局所的な連続文節間の関係		隣接を含む局所的な連続した数文節間における係り受け関係の有無さらに，ＱＪＰの構文解析系の解析結果から得られるポーズ挿入処理に有益なテキスト情報は以下の通りである．	文節の属性	係り受け文節対	係り受け文節間の距離		隣接文節間の係り受け距離を１としてカウントする（一文中の文節数＞距離＞０）	係り受けの関係		係り受け文節対の各属性に基づくそこで，まず予備調査として，先行研究で取り扱われている，係り受け文節間の距離を用いてポーズ挿入実験を行ない，その評価結果に基づいて実際のポーズ挿入処理アルゴリズムの設計を行なうことにした．</subsection>
  <subsection title="予備実験">本手法の予備調査のために，係り受け文節間の距離のみを用いたポーズ挿入実験を行なった．以下，予備実験について述べる．</subsection>
  <subsection title="ポーズ挿入規則">本稿で提案するポーズ挿入手法では，基本的にテキスト中の各文節末には何らかの韻律句境界があると定義する．そして，各韻律句境界にポーズ挿入規則に基づき，ポーズ挿入が生じ易いかどうかの指標をポーズ挿入尤度として設定する．規則により全ての韻律句境界にポーズ挿入尤度が設定されたら，ポーズ挿入尤度の高い境界から順に，適当なレベルのポーズを挿入する．ポーズ挿入規則は，文献に基づき，係り受け文節間の距離に基づく規則と係り受けの関係に基づく規則と，語句や呼気段落における定性的な規則の３規則にまとめた．	係り受け文節間距離(d)に基づく規則係り受け文節間距離(d)とは，着目している文節位置直後から，その係り先文節まで（係り先文節を含む）とする．従って，．dはそのままポーズ挿入尤度とする（表）．テキスト中にポーズを挿入する際は，尤度に対応したポーズ長レベルを予め設定しておく必要がある．ポーズ長レベルはシステムの用途によって変更可能である．	係り受けの関係による規則予備調査の結果，上記規則１だけでは，ポーズ長が一定で単調，構文のまとまりがわかりにくい読み上げとなる場合があることが明らかになった．そこで，本手法では規則１でd＝１の場合に限り，更に係り受けの関係に基づくポーズ挿入尤度を設定することにした．ＱＪＰ構文解析系の係り受けの関係はかなり多くのバリエーションがあるが，本手法ではこれらを文法に即して大まかに６種に大分類し，対応するポーズ挿入尤度を持たせた（表）．ポーズ挿入尤度の高低は隣接文節関係の知見より以下のように設定した．規則２ではポーズ挿入尤度はアルファベット１文字のフラグで表記しており，規則１同様，テキスト中にポーズを挿入する際は，尤度に対応した基準のポーズ長レベルを予め設定しておく必要がある．語句や呼気段落における定性的な規則句点の位置には文末相当のポーズを挿入する，読点の位置にはそれ相応のポーズを挿入する，など従来研究の知見や形態情報から得られる定性的な規則も併用する．これらは文献で挙げられているテキスト情報「句読点」「文節位置」の他，文節を構成する単語の語彙情報も含んでいる．また，テキスト中にポーズ挿入尤度の高い境界から順に，実際に適当なレベルのポーズを挿入した際，同レベルのポーズに挟まれた発話区分のモーラ数が呼気段落を考慮して予め任意に設定した一定のモーラ長を超過した場合は，その間にある各文節境界のポーズ挿入尤度を参照し，最もポーズ挿入尤度が高い境界位置のポーズ長レベルを格上げし，同レベルのポーズを挿入する．</subsection>
  <subsection title="ポーズ挿入処理のアルゴリズム">節で述べたポーズ挿入規則に基づき，入力テキストに以下の手順でポーズ位置とポーズ長を設定する．	文節間距離の算出		係り受け成立が確定した文節間のdを算出する	dに対応するポーズ挿入尤度設定		規則１に基づき，各文節末（＝アクセント句末）へdに応じたポーズ挿入尤度を設定する	係り受けの関係によるポーズ挿入尤度設定		d＝１の係り受け文節間にのみ，規則２に基づき，係り受けの関係によるポーズ挿入尤度（基準値)を設定する	句読点位置へのポーズ挿入尤度設定		句点の位置に文末相当の尤度を，読点の位置に適当な尤度を挿入する	各境界へのポーズ長の設定		各文節末にポーズ挿入尤度が設定されたら，アクセント結合処理などを経て，ポーズ挿入尤度の高い境界から順に予め設定しておいた尤度に対応した適当なレベルの長さのポーズを挿入する		発話区分のモーラ長限界によるポーズ長レベルの格上げ		同レベルのポーズに挟まれた発話区分のモーラ長が呼気段落を考慮して予め任意に設定した一定のモーラ長を超過した場合は，その間にある各文節境界のポーズ挿入尤度を参照し，最もポーズ挿入尤度が高い境界位置のポーズ長レベルを格上げして，同レベルのポーズを挿入する</subsection>
  <section title="システムへの実装">前節で述べたポーズ挿入処理を，実際にＰＣ上で実動するテキスト音声合成システムへ実装した．</section>
  <subsection title="システム構成">ＱＪＰの形態素解析系では，単語辞書を利用せず，字種の特徴を利用して単語切りをしており，音声合成に必要な読み・アクセント情報を得る手段が無い．また，漢字複合語列を各単語に分割しないため，後処理にアクセント結合処理が控えている音声合成の言語処理では問題になる．そこで，本システムへの実装にあたり，形態素解析には読みやアクセント情報記載の単語辞書を利用する形態素解析モジュールを用い，その出力をＱＪＰの構文解析モジュールへ入力できるようなシステム構成を考えることにした．形態素解析処理に用いる品詞の体系と構文解析処理に用いる品詞の体系が異なる場合，形態素解析処理の出力結果をそのまま構文解析処理の入力とできないことがしばしばある．そのような場合には，間に品詞変換処理が必要となるが，本システムでも同様に，ＱＪＰ構文解析系を利用するために，品詞変換モジュールを併せて開発した．本システムでは構成上，品詞変換モジュールとＱＪＰ構文解析モジュールを合わせて，拡張ＱＪＰ構文解析系と呼ぶ．また，後続処理である，アクセント結合モジュールとポーズ挿入モジュールを合わせてフレージング処理系と呼ぶ．本システム構成を図に示す．</subsection>
  <section title="発音記号生成実験">本手法の効果を確認するために，簡単な評価実験を行なった．以下，実験内容について述べる．</section>
  <subsection title="サンプルテキストと比較対象">評価実験にはポーズの正確さを評価するため，一文がある程度長く，文の構造が複雑である小説から引用した文を入力用サンプルテキストとして用いた．一文の平均文節数は21.5，平均モーラ数は146.5である．比較対象は2.3.1節の予備調査の実験と同様のテキスト音声合成下，従来システムと呼ぶ）の出力した発音記号列である．</subsection>
  <subsection title="実験方法">実験は以下の手順で行なった．	形態素解析誤りが構文解析処理に影響しないように，必要に応じて従来システム，および本手法を実装したシステムへの単語登録，解析誤り訂正を予め行なっておく	サンプルテキストに対し，最も自然に聞こえるように人手でチューニングした発音記号列（Ａ）を作成する	サンプルテキストを従来システムに入力し，発音記号列（Ｂ）を得る	サンプルテキストを本手法を実装したシステムに入力し，発音記号列（Ｃ）を得る		得られた発音記号列（Ｂ），（Ｃ）のポーズ挿入位置を，発音記号列（Ａ）のポーズ挿入位置と比較する	</subsection>
  <subsection title="評価方法">評価は，予備調査時の評価方法と同様に，ポーズ挿入正解率，ポーズ挿入精度向上率，ポーズ挿入精度降下率という３つの観点で行なった．</subsection>
  <subsection title="評価結果">評価結果を表に，更に，ポーズ挿入精度向上例を発音記号サンプルを挙げて示す．ひとまとまりの意味を成す連文節中に目立ったポーズが挿入されるなどの致命的なポーズ誤りに対するポーズ挿入精度向上率は100％ポーズ挿入精度降下率は係り受け解析誤りを含むＱＪＰの評価文に対する構文解析精度（係り受け正解率）は86.6％【ポーズ挿入精度向上例】*0.5cm●入力テキスト*1cm「その女性は赤い長めのオーヴァーコートを着て，・・・」*0.5cm●従来システムが出力した発音記号列*1.1cmソノ/ジョセーワ/アカイ////ナガメノ/オーバーコ’−トオ//キテ////「赤い」と「長め」の間に長いポーズが挿入されているが，この発音記号を音声出力すると，文意と異なった意味にとれるほど不自然である．隣接文節との係り受けの可否で検査するため，「女性は」と「赤い」の係り受けの関係が強く，「赤い」と「長め」の係り受けの関係が弱いことにより，こういった失敗が生じていた．*0.5cm●本システムが出力した発音記号列*1.1cmソノ/ジョセーワ////アカイ//ナガメノ/オーバーコ’−トオ/キテ////本手法による発音記号では，文意に即した自然な音声出力が得られた．遠い係り先まで検査するため，「女性は」の係り先可能性として，「赤い」と「着て，」を検出する．ＱＪＰにより「着て」との係り受けが尤もらしいと判断され，係り受け文節間の距離４で「女性は」の後に長いポーズが挿入される．一方，「赤い」は「オーヴァーコートを」に係るので，係り受け文節間の距離２で「赤い」の後には「女性は」の直後のポーズより短いポーズが挿入される（図２参照）．3.5mm【係り受け木構造】【係り受け関係】[1]:┏その&lt;連体詞連体:体言句&gt;[2]:┏女性は&lt;主格主題:動詞句&gt;[3]:┃┏赤い&lt;連体形連体:体言句&gt;[4]:┃┣長めの&lt;の連体:体言句&gt;[5]:┣オーヴァーコートを&lt;を連用:動詞句&gt;[6]:┏着て，&lt;て連用:動詞句&gt;:::図2ＱＪＰの出力した係り受けverbatim</subsection>
  <subsection title="考察">評価結果より，文節数に制限のない係り受け文節間の距離，および係り受け関係をポーズ挿入処理に利用することが，ポーズ挿入精度の向上に寄与することが確認された．一方，適切なポーズが挿入できない原因を調査すると，約54％が構文解析処理の誤りに起因するものであった．その他，係り先が遠い文節が続いた場合のポーズ長の調整不足によるもの，規則２の係り受け関係の分類の甘さによりポーズ挿入尤度が効いていないものがあった．</subsection>
  <section title="おわりに">テキスト音声合成のポーズ挿入処理に軽量・高速な構文解析処理を導入し，一文全体の係り受け情報を利用して構文的区切り位置の同定，同位置へのポーズ挿入，最適なポーズ長の実現を実システム上で試みた．その結果，以下の２点を確認することが出来た．	一文全体の係り受け解析処理を導入した本手法のポーズ挿入処理方法の方が，隣接間係り受け処理を用いたポーズ挿入処理よりも挿入精度が高く有効である	係り受け文節間の距離と係り受け関係の情報以外に，同レベルポーズ間のモーラ長閾値の調整が必要である．さらに，係り受け関係の細分や規則としての適用順を考慮することでポーズ挿入精度の向上が期待できる本稿では，文節数に制限のない係り受け処理をテキスト音声合成システムの言語処理部に実装して，ポーズ挿入精度の向上効果を確認した．今後は，この結果を反映した規則音声合成システムを実用レベルにするために，さらに大量のテキストを利用してデータやシステムのチューニングを進める予定である．また，構文解析処理の精度を高めると共に，その導入により得られる情報をもっと有効活用し，テキスト読み上げだけでなく，ユーザの任意な出力形態要求に対応できる出力形式について検討していく予定である．</section>
</root>
