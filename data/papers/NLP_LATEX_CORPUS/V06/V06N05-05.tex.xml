<?xml version="1.0" ?>
<root>
  <title>放送ニュース文を対象とした効果的類似用例検索法</title>
  <author>田中英輝熊野正浦谷則好江原暉将</author>
  <jabstract>著者らは用例提示型の日英翻訳支援システムを開発している．この中には利用者が入力する日本語の表現に類似する表現を検索して，検索結果を含んだ日本語文とその対訳を表示する機能がある．著者らの日本語データベースの文は平均長が88.9文字と長い．このように長い用例を対象に類似検索を行う場合，キーワードによるAND検索は適切ではない．なぜなら用例が長いため1文中に同一キーワードが複数回出現する場合があり，これが原因で不適切な用例を検索しやすくなるからである．これに対して著者らは入力キーワードの語順とその出現位置の間隔を考慮した検索手法を提案する．これによって構文解析を行うことなく構文情報を反映した検索を行うことができる．本稿では従来のAND検索と提案手法を使った評定者による主観評価実験を報告する．この中で，提案手法の有効性が統計的に有意となったことを示す．また，検索時間の増加は1.3倍であった．</jabstract>
  <jkeywords>用例提示型翻訳支援システム,類似性,語順,AND検索</jkeywords>
  <section title="はじめに">人間の翻訳作業を支援するシステムは，電子単語辞書から機械翻訳システムまでいろいろ提案されており関連する研究も多い．著者らはこの中の用例提示型の翻訳支援システムの研究を行っている．このシステムは一般的に巨大な対訳用例データベースと検索システムから構成される．このシステムに対して利用者は「翻訳がわからない」と思う表現を入力する．するとシステムは入力に一致した表現，あるいは類似した表現をデータベース中で検索してその翻訳例を提示する．利用者は提示された翻訳例を参考に翻訳を作成する．機械翻訳システムと違ってこの場合の翻訳の主体は利用者にあり，システムは利用者に参考となる情報を提示するだけである．このように利用者主体の翻訳作業を支援する考え方はKayによって1980年に提案されている．この文献では電子化辞書を使った支援を提案しているが，対訳用例を使う翻訳支援もこの考えを基本的に踏襲したものである．また実際に対訳用例を使って日英翻訳支援システムを作成した例としては等の先駆的なシステムがある．さらに最近では商用システムもいくつか販売されている．著者らは上記一連の研究と同一の考えに基づいて，日本語ニュースの英訳支援のためのシステムを開発している．このシステムには二つの特徴がある．一つは利用する日英用例の対応付けの粒度である．従来の研究では，表現の対応を集めた日英表現翻訳辞書や文間の対応付けを行ったデータベースなど詳細な単位で対応のとれたデータベースを利用することが多かった．これらに対して著者らのデータベースは記事という大きな単位での対応はとれているが，それより細かな対応はとれていない．これは日本語ニュース記事を英訳する場合に，英語視聴者の背景知識や興味に合わせて大きく意訳することがあるためである．極端な場合は日本語ニュースを参考にして英文ニュースを新たに作成する場合もある．このため入力の検索結果に対応する翻訳部分を提示するには，日英表現の自動的な照合が必要になる．そしてこの場合に表現が照合しないことも前提にしなくてはならない．第二点は「意訳の支援」である．従来，用例提示型のシステムはマニュアル翻訳のような定型的な翻訳に応用する場合が多かった．たしかにニュース翻訳の場合でも「株価」「天気予報」「新車販売台数月例報告」などの項目はほぼ定型的な文から成り立っており，これらを有効に支援できると思われる．しかし著者らは本システムで意訳を積極的に支援したいと考えている．なぜなら意訳こそニュース翻訳の難しい部分であり，また用例によって有効に支援できると考えるからである．例えば日本語の短い言い回し「いかがなものか」は本稿のデータベース中だけでも過去10通り程度に訳されている．同様に同じ単語や似たような文が文脈によってどのように意訳されているかを観察すれば，意訳のための知識を効果的に学ぶことができると考える．意訳であろうと定型的な翻訳を支援する場合であろうと，表現を検索する部分には同じ手法を利用できる．しかし，結果の表示には異なった配慮が必要である．定型的な翻訳であれば入力に対応する翻訳例を一つ示せば十分である．しかし意訳を支援するにはできるだけたくさんの翻訳例を文脈付きで利用者に提示する必要がある．このため著者らのシステムは検索速度を重視している．またどのような長さの入力であっても出力は日本語と英語の記事を提示した上で，対応個所を強調して表示している．本稿は上記のシステム中の検索部分を対象としている．著者らは一文字から一記事までの範囲を入力として類似検索ができるシステムを研究している．これは意訳が単語や短い表現から文や記事までの広い範囲で行われるためである．実際には一文字から一文までを対象にした検索システムと記事を対象にした検索システムの二つを作成した．本稿はこのうちの一文までの表現を対象として類似用例を検索する手法について報告する．著者らはこの検索を頑健で柔軟かつ高速に行うためキーワードのAND検索を基本的な手法として採用した．すなわち，入力を形態素解析してあらかじめ指定している品詞のキーワードを抽出してAND検索を行う手法である．しかし単純なAND検索を行うと不適切な結果を多数表示することが判明した．そこで著者らはAND検索に語順と「変位」と呼ぶ制限を加えることを提案する．これは表層的な情報を利用してAND検索に構文的な情報を反映させようという試みである．この手法は構文解析を利用していないため速度と頑健性に優れている．以下，本稿の構成を示す．まず~~章で著者らの用例提示型翻訳支援システムの概要を説明して，この中の類似用例検索部分の設計方針を示す．~章では類似用例検索にキーワードによるAND検索を利用した場合に起こる問題を示す．続く~~章ではAND検索に語順と変位を使う手法を提案する．またこの手法を使った検索手順をアルゴリズムの形で示す．そして~~章で約160万用例からなるデータベースを使った検索実験を報告する．ここでは検索時間と，検索結果の主観的な満足度などを報告し，提案手法はAND検索にくらべてわずかに検索時間が増加するものの（約1.3倍）利用者の満足度は統計的に有意に優れていたことを示す．次に~~章では関連研究を紹介して本研究との比較を行い最後に~~章で本稿のまとめを行う．</section>
  <section title="用例提示システムの概要"/>
  <subsection title="構成">用例提示システムは下記の部分から構成されている．日本語と英語の2言語ニュース記事データベース日本語類似用例検索システム検索結果の表示システムこのシステムは次のような形で利用する．まず英訳したい日本語ニュース記事がある．この中で翻訳を調査したい表現があればこれをシステムに入力する．このとき利用者は表現を編集せず，カットアンドペーストで入力することを想定している．システムは入力に一致する表現，あるいは最も近い表現を日本語記事データベースで検索する．結果は日本語，英語とも記事を表示単位として，日本語の検索結果を含む文とそれに対応する英文を強調して表示する．記事を単位として表示するのは，文脈を利用者に提供することが重要だと考えるからである．ユーザは提示された過去の翻訳例を参照して自分の翻訳を作成する．もし結果に満足できなければ次の検索結果をシステムに要求する．</subsection>
  <subsection title="データベース">2言語記事データベースはNHKの日本語ニュース記事とその人手による英訳を1995年3月から1997年2月までの期間蓄積して作成したものである．表~~に本稿のシステムで使った日本語記事データベースの大きさを示す．また，英語の部分もほぼ同じ規模である．英語のニュース記事は日本語の記事全体を元にして作成しており，日本語文の単純な直訳を集めたものではない．これは英語視聴者の視点に立った分かりやすいニュースを作成するために意訳が求められるからである．このため文間の対応関係を単純に求めることは難しい．そこでで提案された手法を使って対応付けを実施した．さらに任意の日本語文字列を高速に検索できるように日本語データベースに対してポインタ表現の部分列インデックスを作成した．このインデックスにより，任意長の入力文字列の出現位置を漏らさず高速に求めることができる．この時，どの記事のどの文に出現したかもわかるようにインデックスを作成している．</subsection>
  <subsection title="検索部分の設計方針">~章で述べたように著者らはこのシステムを使って定型的な翻訳だけでなく意訳を支援したいと考えている．この目標はシステムの想定利用者であるニュース翻訳者への面接調査を行って設定した．翻訳者は日本語，英語とも基本的に堪能である．しかし経験によってはニュース翻訳の知識が十分でない場合がある．面接調査によると，「固有名詞」や「複合語」などの主に定型的翻訳を行う表現と，単語，表現，文，記事のさまざまな段階で必要になる意訳を支援してほしいという要求があった．定型的翻訳，意訳とも多種類の表現が対象になる．そこで著者らのシステムではさまざまな長さの入力に対して検索できるようにした．具体的には一文字から一文までを入力対象にした検索システムと記事を入力対象にした検索システムの二つを作成した．日本語ニュース記事は5文程度からなっており段落がない．そこで実用上はこの分類で十分と考えたからである．本稿はこのうちの一文までの文字列を入力として類似用例を検索する手法について報告する．なお本稿ではこの検索システムを表現検索システムと呼ぶ．表現検索システムには次の2種類の検索機能がある．完全一致検索*-3pt一文までの範囲の文字列を入力してこれに完全に一致する表現の出現位置を~~節のインデックスを参照して漏らさず求める．この結果，これを含む記事と文とその中の位置を特定することができる．長い入力に対しては結果が得られない可能性が高いが，慣用的な表現を検索するのに有効である類似検索*-3pt入力文字列を形態素解析して自立語を抽出しこれをキーワードとする．データベース中の日本語の各文を対象にキーワードをなるべく多く含む文を検索する．すなわち入力表現と用例文の類似性は共有するキーワードの数で評価する．キーワードの出現位置は上記の完全一致検索を利用することで高速かつ完全に求めることができる．キーワードの組み合わせによる検索もあとで述べるように高速に実現できる．なお類似検索は一文を検索対象とするため，以後，一文と用例を同じ意味で使用する類似検索は次のような手順で実行する．また具体例は図~に示す．最初はすべてのキーワードを含んだ用例を検索する．成功すればそれらを表示する．もし，検索に失敗するか，成功しても利用者がさらに検索を要求した場合にはキーワード数を一つ減らして検索を続ける．この時一度表示した用例は検索の対象としない．なぜなら同じ用例を提示しても利用者は新たな情報を得られないからである．このようにキーワード数の条件を利用者の指示で徐々に緩和して検索を実行する．条件を緩和する場合にはキーワードすべてが同じ重要性を持つと仮定して，任意のキーワードが一つなくなった条件で検索を行う．ここで提案した検索は特殊な処理を想定していないため頑健である．またキーワードの選択方法，キーワードの緩和方法を変えることでさまざまな検索を実現できるため柔軟性も高い．このため将来の拡張も比較的簡単である．また高速なため，満足な解が得られない場合は何度でも検索できる．さらに類似検索の結果を提示する場合も根拠としてキーワードを提示できるため直感的な理解が容易になる．なお，完全一致検索はポインタ表現の部分列インデックスを参照することでそのまま実現できるので以降では類似検索部分のみ議論する．</subsection>
  <section title="AND 検索の問題点">~章で述べた類似検索を実現するにあたり著者らは最初キーワードのAND検索を採用した．すなわち入力キーワードと検索対象中のキーワードの語順の一致を考慮しない手法である．AND検索を採用した理由の1つは高速性である．データベース中での各キーワードの出現位置さえわかれば，これらをAND条件で含む記事を特定するのは容易で高速である．もう1つの理由は~章で述べるようにAND検索を採用した用例検索システムが多く提案されており効果的であると報告されていたからである．しかし日本語ニュース原稿を対象にAND検索を使うと問題が発生することが明らかになった．問題の例を示そう．例えば「政府の作業」の類似用例を検索するのに政府and作業で検索すると下記の文をすべて出力する．尚，用例中の照合キーワードを太字で強調している．例1には「政府」「作業」というキーワードが一文中に出現している．しかしこの順序が逆転しており，またその間に関連がなく類似用例とは考えられない．例2では2つのキーワードが出現しており語順も入力と同じである．しかし両者に係り受け関係はないため類似用例とは考えられない．例3では「政府」が6個所，「作業」が1個所出現している．この中で，下線部が入力表現と一致しており用例3は類似用例と判断できる．しかしこの用例には「政府」が6個所も出現しているため下線がなければ該当個所を見いだすのは容易ではない．ここで使った入力表現「政府の作業」は短いため，この中に重複するキーワードはない．しかし長い入力表現では同じキーワードが出現する可能性がある．この場合，照合部分を把握するのはさらに困難になる．まとめるとAND検索の問題は例1と例2で示したような不正解文を拾いやすいこと，正解であっても例3のように該当個所を確認しにくいことである．このような問題が発生する主な原因は日本語ニュースの文の平均長が88.9文字と長いことにある．短い用例を使ったシステムではこのような問題は発生しにくいであろう．これらの問題を解決するには構文解析を利用する手法が考えられる．入力のキーワード間の係り受け関係を認定して，同様の係り受け関係を持つ用例を検索する手法である．しかし現時点では構文解析器の精度が十分でないためこの手法は採用しにくい．そこで著者らはこれらの問題を構文解析せずに~章で提案する近似的な手法で解決することにした．</section>
  <section title="提案手法">単純なAND検索手法には~章で述べた問題がある．またこれらを解決するのに構文解析を使うことは困難である．そこで著者らはAND検索に語順と変位とよぶ制約を加えた検索手法を考案した．尚，以下ではこの手法をAND+W+D（AND+Wordorder+Deviation）検索とよぶ．この手法は構文解析をせずに，表層の単語のならびと位置情報を使って近似的に構文的な情報を捉えたものである．本章ではAND検索，AND検索に語順を加えた検索（AND+W検索）について説明し，その上で提案手法（AND+W+D検索）を説明する．次にその実装アルゴリズムを説明する．以下では次の入力例を用いて説明を行う．ここで``A,B,C''はキーワード，``*''はそれ以外の単語とする．また簡単のためキーワードや単語はすべて一文字とする．</section>
  <subsection title="AND 検索">AND検索では次の4つの用例をすべて出力する．ここでは用例中の照合したキーワードを強調表示している．これらの用例は順序が違ってもキーワード``A,B,C''を含んでいるので条件を満たす．また4つの用例の間に優先順位はない．用例3と用例4には``A''が3つあるが，この中のどの2つと照合したかを決めることができない．以上の問題は先に~章の例3で具体例で説明した問題と同一である．</subsection>
  <subsection title="語順を考慮した AND 検索">入力と語順が同じ表現はそうでない表現より近いであろう．なぜなら語順はある程度構文の情報を担うからである．そこでAND検索に語順の制約を付加することで類似性の低い不適切な検索結果を減らせると期待できる．例えば上記の例でキーワードの語順を考慮して検索すると用例3と用例4だけが出力される．~章の例で言うと，「政府の作業」に対して例2と例3だけに解を絞ったことに相当する．しかし，語順だけでは不十分な点がある．まず用例3と4には最初にAが2つあるがどちらが照合キーワードなのか決めることができず照合個所を特定できない．また用例の間に優先順位をつけることができない．キーワードの数と語順が同じ用例が検索されたときにその提示の優先順位を決められない問題である．これは大規模なデータベースを対象にした場合に結果を絞り込めない問題につながる．</subsection>
  <subsection title="語順と変位を考慮した AND 検索">著者らは上記の問題を解決するために以下で説明するキーワードの「変位」を使った手法を利用した．まず入力中のキーワードx_iの出現位置を与える関数をorg(x_i)とする．この値は任意のキーワードについて一意に決めることができる．これに対してキーワードx_iの用例内での出現位置を与える関数をpos(x_i)とする．もしpos(x_i)の値が決まればキーワードx_iを入力と用例で照合できることになる．しかし，現在の例のように用例に同一キーワードが複数出現する場合には一意に照合できない．ここで入力中のx_iの右隣のキーワードがx_i+1であるとする．また用例中にもx_iとx_i+1と同じ2つのキーワードが出現しているとする．ただし用例にはこの2つのキーワードが複数出現しておりキーワードの対応があいまいだとする．この時，次式で定義するキーワード対の変位dev(x_i,x_i+1)が最小になるようにpos(x_i),pos(x_i+1)を決めることにする．この基準を使えば変位が同じ場合を除いて一意に照合することができる．（）~式は入力のキーワード対の間隔と用例のキーワード対の間隔の差である．これが最も小さくなるように照合するのは，キーワードの間隔が似ている場合には係り受け関係も近い可能性があると考えたからである．例えばこの経験則で~~章の例3の「政府の作業」の照合を正しく行うことができる．一般に入力のキーワードがn(n2)個ある場合には隣接キーワード対の変位を利用して，その合計が最小になるように照合する．現在の例で入力にはA,B,A,Cというキーワードがある．そこでdev(A,B)+dev(B,A)+dev(A,C)が最小となるようキーワードを対応させる．また，この値の小さな順に用例を提示する．この結果は次の通りである．AND+W検索と同じ用例を検索しているが，照合したキーワードを特定できており，また検索用例に順位がついていることに注意されたい．ここでAND+W+D検索の特徴をまとめる．キーワードのあいまい性の解消+W+D検索はキーワード照合にあいまい性がある場合にそれを解消する能力がある．~章の例3の場合では「政府」の照合個所を下線部分に特定できる．この性質は結果を表示する場合に有用である．用例の順位付けが可能+W検索とAND+W+D検索が同じ入力キーワード群で出力する用例集合は上記の例のように常に一致する．違いの一つは用例に優先順位がつく点である．例えば，~章の例の例2と例3のキーワード数は2で同じである．しかし例3の変位合計は0であるため1位となり例2は変位が大きいので2位の解となる．完全一致検索に近い名詞複合語を検索する場合は構成要素の名詞が連続した用例が正解である．AND+W+D検索ではもし入力と同一の複合語があればその変位合計は0となって第1位で出力される．すなわち完全一致検索の機能も包含した検索手法となっている．一方，AND+W検索ではこのような保証はない．この性質は特に名詞複合語の検索が多くなる場合に有利である．一般的にAND検索は同じ入力キーワード群に対して語順を考慮したAND+W検索とAND+W+D検索より多くの文を検索する傾向がある．ただし，キーワード数を1まで減らして検索できる文の集合はいずれの手法も同じである．すなわちデータベース中の類似用例の正解がどう定義されていても最大限に条件を緩和すれば3手法の再現率は同じことになる．</subsection>
  <subsection title="アルゴリズムの概要">類似検索全体のアルゴリズムは~~節に示した手順に従っている．すなわち利用者の要求に従ってキーワードの数を一つずつ減らして検索を行う．このとき利用者は途中で検索を打ち切ることが可能である．また，用例はキーワードを最大個数含む段階で表示するものとし，それ以後のキーワードを削減した段階では表示しない．ここでは上記を考慮したAND+W+D検索アルゴリズムの概要を説明する．処理の大まかな流れは以下の通りである．入力表現の形態素解析を行ってキーワードを求める用例集合中でのキーワードの出現位置を完全一致検索で求めるキーワードが出現している用例についてはノードテーブルを作成する．ノードテーブルは検索に使うデータ構造である検索，表示処理のループ．ユーザの要求によって繰り返す検索処理表示処理入力表現は形態素解析されて自立語がキーワードとして抽出される．キーワードのうち活用語は活用語尾や「な（い）」「つつ」など接続し得る機能語をすべて付加して展開する．本システムではキーワードの出現位置を文字列検索（完全一致検索）によって求めている．このため活用するキーワードは可能な出現形で検索する必要がある．このとき活用語尾を付加しただけでは間違った品詞のキーワードを検索する場合がある．例えば一段動詞の未然形や連用形の「衰え」を検索すると名詞の「衰え」を検索する恐れがある．このため機能語も付加して検索することで誤検索を防いでいる．ただし，例えば否定の「ない」は「なかっ」「なかろ」「なく」「ない」「なけれ」と活用するが「な」だけを付加する．つまり誤検索を防ぐのに必要十分な機能語部分文字列を付加する戦略を取っている．入力には同じ表層形のキーワードが複数出現する場合があるため，出現順に付番してすべてを区別する．この番号をキーワードidと呼ぶ．ただし展開で得られる派生キーワードは同一のキーワードidとする．全用例集合を対象に各キーワード表層形を完全一致検索によって検索し，それぞれが出現した用例とその中での位置を求める．キーワードが一つ以上出現している用例については，ノードテーブルと呼ぶデータ構造を作成する．前節で使った入力と4つの用例に対応するノードテーブルの例を図~~に示す．この図の最上段は入力のキーワードの出現位置を示している．下部のg_1からg_4に示したノード群が用例1から4に対応するノードテーブルである．このテーブルは入力のキーワードを出現順，つまりキーワードid順に並べ，各idのキーワード表層形の出現位置をノードとして記述している．各ノードは対応するキーワードidで管理されている．ここで入力中にキーワードがM個あるとする．このノードテーブルには次の性質がある．[（性質1）]用例のノードテーブルに対して任意のノードから右方向でかつ出現位置が増加するような経路を作成したとする．この経路上のノード集合は語順の条件を満たすキーワード集合である．図~~の矢印が経路の例である．以後，経路とはこの条件を満たす経路であるとする．任意のノードからの経路を求める場合に，ノードをなるべく多く含んでかつ変位合計が最小となる経路はグラフの最短経路問題として定式化できるので従来のアルゴリズムで高速に求めることができる．すなわち各ノードを始点とする最適な検索結果を求めることができる．[（性質2）]N個のキーワードを含む経路はキーワードidがM-N+1以下（左）であるノードを開始点とする経路上にしかない．例えば図~~においてキーワード数3の経路はキーワードidが1のノードと2のノードを開始点とする場合しかない．別な見方をするとキーワードidがM-N+1に属するノードを開始点として経路を求めると，N以下のキーワードを含む場合の経路を求めることができる．以上の性質を利用して図~~に示すAND+W+D検索を実現した．アルゴリズム中の変数Sは全用例集合を示すS=s_1,s_2,s_i,．Gは検索対象の用例の番号を記録するリスト変数である（b5）．一度表示した用例はこのリストから削除することで以降の処理を行わないようにする（d3）．R(i)は用例s_iに関する情報を格納する構造体の配列である．この変数には用例s_iの最大キーワード含有数R(i).kwd_num，その変位合計R(i).dev，キーワード群の出現位置R(i).kwd_listを記録する（c7）．検索処理の中心部分は（c1--c10）である．キーワード数Nの用例を検索するために開始キーワードidを（c2）で設定している．このあと各用例iの中でこのキーワードidに属するノードから最適経路を探索している（c5）．検索開始キーワードidはキーワード数の緩和（d6）に伴って1から順に増加するように設定されている（c2）．このため（性質2）から用例iでキーワード数Nの経路が見つかった場合に，すでに同数の解が以前の開始キーワードid（1,,M-N）での探索で発見されている可能性がある．そこでこのような場合には変位合計の小さい解だけを残す処理を行っている（c6--c7）．図~~の矢印で示す経路と変位は，キーワードid1のノードを開始点として最適経路を求めた結果である．用例1と2についてはキーワード数3の解が，用例3と4についてはキーワード数4の解が求められている．以上のように本手法はキーワードを最大限含む順に解を求めている．多くの場合利用者は条件緩和の途中で検索を打ち切るので，この順序で解を求めている．ただしこの手法では用例のノード集合を最初に全部保持するためデータベースの大きさによってはメモリの消費が問題になる可能性がある．この場合には各用例の最適解を最初に求めるなど変更する余地はある．いずれにせよ動的計画法を利用すれば実用的な速度で解を求めることができる．</subsection>
  <section title="検索実験"/>
  <subsection title="実行時間">AND検索，AND+W検索，AND+W+D検索を対象に検索時間を評価した．AND+W検索はAND+W+D検索アルゴリズムをほぼそのまま利用して作成した．AND検索はキーワードのノード集合を作成する過程で出現キーワード数を計数することで実現した．検索対象データベースは1995年3月から1997年2月までに収集した日本語ニュースである（表~）．入力したのは1997年3月のニュース記事からランダムに選んだ500記事の各先頭行500行である．これらの記事は検索対象データベースに含まれていない．また入力の平均文字数は92.7文字と長い．このためキーワードが完全一致する用例はほとんどない．実験手順は以下のとおりである．入力の各文を形態素解析して自立語キーワードを抽出する．そして各文でキーワード数1になるまで条件を自動的に緩和しながら検索を行ってその累積時間を計測した=202.9，SPECfp92=259.5である．．結果を表~に示す．緩和の合計回数は3手法で等しく10,989回である．この表から語順を考慮したAND+W手法とAND+W+D手法でもAND検索にくらべて約1.3倍の時間増だったことがわかる．またAND+WとAND+W+Dを比較すると，時間の差はほとんどなく変位の有無の影響はほとんどなかったことがわかる．1回の緩和，すなわち利用者が1つキーワードを減少するよう指示した時に要した平均検索時間(総時間/10,989)を2行目に記した．これによればAND検索で2秒，AND+W，AND+W+Dで3秒程度である．ただし総時間にはキーワードの出現位置をディスクからメモリに転送する初期処理の時間を含めており，この時間がかなりの部分を占めている．初期処理が終了した後の1回の緩和に要する時間は語順と変位を考慮しても1ないし2秒であり実用上満足できる速度であった．以上の実験より語順と変位を考慮してもAND検索なみに十分高速に検索できることを確認した．</subsection>
  <subsection title="検索文数の絞り込み効果">~節の終わりに述べたようにキーワード数を1まで緩和すれば，AND，AND+W，AND+W+D手法で検索できる用例集合は同じである．しかし実際にはキーワード数の大きなところで検索を打ち切るので利用者の見る用例数は語順の制約の有無で違ってくる．この違いを前節と同じ入力を使って評価した．語順を考慮した手法AND+WとAND検索それぞれについて，各キーワード数での検索用例数を計測した．結果を図~に示す．検索用例数は入力500文で合計したものである．横軸はキーワード数で縦軸は対数を取った検索数である．また，このグラフの一部の検索用例数を表~に示す．アルゴリズムの説明で述べたように，文は含有キーワード数が最大の時に一度表示するだけである．このため図~の2つのグラフの面積は等しくなる．表~から明らかなようにキーワード数1の部分でAND+W検索の検索用例数がAND検索の結果を大きく超えている．この結果キーワード数が1以外の部分ではAND+W検索の検索数はANDより小さく押さえられている．すなわち語順制約を使うことでキーワード数が1より大きい部分で検索結果数を絞り込むことができたことが確認できる．しかし，語順による絞り込みの効果が十分であるとは言えない．キーワード数が小さい部分での絶対的な検索数が大きいのが問題である．例えば3語のキーワードで検索する用例数は平均で4,177（=2,088,640/500）に達した．このような用例も検索する可能性があるため絞り込み効果は十分でない．逆に50程度の検索用例数を許容すると仮定すればキーワードの語順を考えない場合でも10語以上含む入力であれば許容範囲の検索数となる．語順を使った場合は8語以上で許容範囲となる．*-4mm</subsection>
  <subsection title="検索結果の満足度">*-0.5mm語順に変位の制約を加えると検索結果に優先順位をつけることができる．この順位が妥当であれば検索用例数の多さの問題は解決できる．そこで著者らはこの順位の妥当性を検証するため3手法の検索結果の満足度の高さを主観的に評価して比較した．実験要領は以下の通りである．被験者翻訳者3名．このうち1名はニュース翻訳の経験が豊富である．残りの2名はニュース翻訳を直接担当しているわけではないが翻訳の経験は豊富である．いずれの被験者も検索手法については知らされていない．入力表現現実の入力を想定して58の日本語表現を作成した．具体的には先の実験で使用した500文から文をランダムに抽出し，それらの一部を切り出して作成した．すなわちカットアンドペーストで入力することを想定した．長さの平均は22.6文字，最大の入力は62文字，最小の入力は14文字である．出力一つの入力に対して各3手法の上位5個の日本語検索結果を印刷して提示した．この時，各手法の検索結果の提示順序を1つの入力ごとに変更して，検索手法と結果の対応がわからなくなるようにした．また照合したキーワードを&lt;&gt;で囲んで表示した．被験者は最初のキーワードから最後のキーワードが出現した区間を中心に評価した．これはキーワードで検索した部分以外に偶然類似した部分があった場合にこれを評価しないためである．評価手法検索した部分の正しい英訳があると想定したときの満足度を次の2種類で評価した．相対評価3手法すべての結果を見て，最も満足度の高い結果を5点として，以下この結果との満足度の差を下記の要領で評価した．絶対評価翻訳を行うときに英訳があればどの程度役に立つかを以下の5段階で絶対評価した．評価シートの実例を付録に示す．3名の評価結果の平均値を表~と~に示す．また各手法の違いを検定するため平均値の差のt--検定を行った．手法間のt--値を表~とに示す．t_0.025()=1.960であるからどちらの表でもAND+W+DとAND，AND+W+DとAND+Wの組み合わせでは有意水準5%で帰無仮説（平均値に差がない）を棄却できる()=3.291であり0.1%であっても棄却できる．．一方，ANDとAND+Wでは5%有意水準の棄却はできない．以上の結果より次のことが結論できる．AND検索とAND検索に語順制約を加えたAND+W検索ではAND+W検索の方が満足度が高くなる傾向は認められたが，統計的に有意な差はなかった．AND+W+D検索の満足度はAND検索とAND+W検索のいずれの満足度より高くなった．またこれは統計的に有意な差であった．以上より提案手法の精度が最も高かったと結論できる．*-1.5mm</subsection>
  <subsection title="議論">*-0.5mm本章の実験結果のまとめを示す．検索時間はAND検索が有利であったが語順と変位を加えても1.3倍程度の時間増であった．語順制約を追加することで検索結果を絞り込む効果は確認できた．しかし，短い入力に対する絞り込み効果は十分ではなかった．変位の制約を加えると検索結果に順位付けができる．この効果を計測したところ有効性を有意に検出できた．今回の実験から，カットアンドペースト方式の入力ではAND+W+D検索とAND検索を使うのが良いと著者らは考えている．AND+W+D検索は最も満足度が高かったからである．AND検索は今回の満足度の実験の結果は一番低かった．しかし，速度の面は最も優れている．また入力の表現が長い部分では検索結果の数も問題にならない．そこで長い表現を検索する場合にAND+W+D検索を補完する意味で利用する価値があると考える．一方AND+W検索とAND+W+D検索の両方を使う必要性は小さいと言える．両者は基本的に同じ検索結果となるからである．ただし，これは本稿のように入力表現を原文のカットアンドペーストで作成する場合に限る．利用者が直接キーワード列を入力する場合には変位の情報を使えない．このため語順だけを使ったAND+W検索を使う必要も生じる．</subsection>
  <section title="関連研究">類似用例提示型翻訳支援システムの提案はこれまで多くなされている．ここではこのようなシステムの中で著者らの検索の研究と近い研究について比較を行う．中村の研究は著者らの研究の出発点になったものである．この論文は用例検索による翻訳支援の考え方と構成を示している．中村はこの論文で入力表現と用例が共有する自立語の数に基づいて類似性を計算する手法を提案している．また，検索結果の順位を次の3つの条件で整列している：1）構成語（本研究のキーワード）がその他の語をはさまない，2）用例中の自立語の個数に対する構成語の数の比率，3）含んでいる構成語の数．このシステムを使った小規模な評価実験では長い(複数文節)表現を入力した場合に検索結果が「あいまい」となって被験者の評価が低くなったと報告している．これは検索結果の効果的な絞り込みの必要性を示唆した結果である．著者らはこれに対して語順と変位を考慮した検索を提案しその有効性を確認した．隅田らは表現辞典の用例文を検索する翻訳支援システムを提案している．著者らとの主要な違いは2点ある．1）用例文はニュースの記事に比べて短く入力も単文に近い用例を想定している点，2）検索では構文的な類似性を重視している点である．類似検索は入力の自立語を順次無視して最後に付属語列のパターンまで検索条件を緩和する手法を採用している．ここで語順は考慮していない．隅田らは構文情報の把握に助詞を利用している．これは短い用例を対象にした場合に有効であるが，著者らのように長い用例を扱う場合には不適切である．なぜなら長い用例では表層の助詞だけで主要な構文構造を把握することができないからである．また，助詞は極めて多くの場所に出現するためこれを使う処理は遅くなる問題もある．実際著者らのシステムで助詞をキーワードに含めて検索実験を行ったところ自立語だけを対象にする場合の約23倍の時間がかかることが分かった．佐藤は文字を連続して多く共有する2つの文を近いと考えた「最適照合検索」を提案している．この論文では1文字を照合単位としかつ順序を考慮した照合手法（CTM1）と2文字と3文字を照合単位とし，順序を無視した照合手法（CTM2）を提案している．またどちらの手法も文字列が連続して出現することを類似性の条件に含めている．文字と単語の違いを無視すれば，著者らの語順と変位を考えた手法がCTM1に，語順を無視した手法がCTM2に対応する．またこの二つの手法の検索結果の違いを次のような実験で検討している．1）100個の入力をそれぞれ検索し，上位5つの類似表現を得る，2）その英訳の中で最良の英訳の有用性を4段階で主観評価する．実験結果よると二つの手法の有用性は同等もしくはCTM2の方が若干良かったとなっている．著者らの結果と比べると出現順序を考えないCTM2の結果が良いのは意外である．原因は用例データベースの違い，入力表現の違い，評価法の違いがあるため断定できないが，CTM2の文字列の連続性の条件が貢献している可能性がある．この条件が著者らの変位と対応したと考えられる．著者らの実験結果でも語順だけでは効果が薄く変位が有効であった点を考えると両者の実験結果に矛盾はない．</section>
  <section title="おわりに">翻訳支援を目的とした類似文検索手法を提案してその有効性を実験で確認した．提案したのは入力と用例のキーワードの共有数，語順，その変位を類似性の基準とした検索手法である．提案手法は入力文の形態素解析以外は表層文字列の一致を使うため，高速かつ頑健という利点を持つ．今後の課題を述べる．現在はすべての自立語を同等の重要性を持ったキーワードとして検索を実行している．しかし，利用者が知りたい表現が特定のキーワードを含む場合があろう．また，動詞を含んだ表現で条件緩和をする場合に，一般的に動詞は削除しない方が良いと考えられる．このような特別な条件や経験則を現在の処理に追加するのは今後の課題である．このような変更は内容が明らかになれば現在の枠組みで簡単に実現できると考えている．現在，本検索部分を含んだ日英翻訳支援システムをニュースの翻訳現場で実際に使用し始めている．そこで検索条件の改良は実際の利用者の意見を取り入れて進めていきたいと考えている．また今回は日本語の検索部分だけの評価を行ったが，実際の英語の出力を使ってシステム全体の評価も行う予定である．これについては別途報告したい．今回は日本語を対象にした検索システムを報告した．今回の内容は言語に依存した部分がほとんどないためその他の言語への応用も簡単である．すでに英語の検索部分を作成しており，その有効性を調査したいと考えている．さらにその他の言語への適用可能性も検討したい．付録\quad評価シートの例=0.98この場合はAND+W，AND+W+D，ANDの順に検索結果を表示している．評価文の最初の括弧付の数字が相対評価，2番目の数字が絶対評価の値を示す．++++++++++入力文++++++++++++++IN事故のあった施設の中を調査しました．++++++++++キーワード++++++++++KW&lt;事故&gt;の&lt;あっ&gt;た&lt;施設&gt;の中を&lt;調査し&gt;ました．++++++++++検索文++++++++++++++SR2-1(1)(2)この研究グループは，車に携帯電話を備えていて，軽い物損&lt;事故&gt;を起こしたことの&lt;ある&gt;ドライバー六百九十九人について，事故のデータと通話記録を&lt;調査し&gt;ました．SR2-2(1)(2)公海上でおきた今回の&lt;事故&gt;の原因調査は国際条約で船籍の&lt;ある&gt;ロシアが行うことになりますが事故の原因を特定するためには船首部分の破断面などを詳しく分析する必要があるため，運輸省では引き続き外交ルートを通して共同で&lt;調査す&gt;ることをロシア側に求めていくことにしています．SR2-3(1)(2)埼玉県内では小山代表が理事長を務める特別養護老人ホームが&lt;ある&gt;北本市でもきょう臨時の市議会が開かれ，&lt;施設&gt;建設に至る経緯や運営について&lt;調査す&gt;る特別委員会を設けたほか，現在同じ社会福祉グループの特別養護老人ホームの建設が進んでいる上福岡市も，市役所の中に対策委員会を設置して補助金の使い途などについて調査を始めています．SR2-4(1)(2)埼玉県内では小山容疑者が理事長を務める特別養護老人ホームが&lt;ある&gt;北本市でもきょう臨時の市議会が開かれ，&lt;施設&gt;建設に至る経緯や運営について&lt;調査す&gt;る特別委員会を設けたほか，現在同じ社会福祉グループの特別養護老人ホームの建設が進んでいる上福岡市も，市役所の中に対策委員会を設置して補助金の使い途などについて調査を始めています．SR2-5(1)(1)去年，山形県でジェット機の低空飛行が原因で女性が馬から落ちて怪我をした&lt;事故&gt;について在日アメリカ軍はこのジェット機がアメリカ軍機で&lt;ある&gt;ことを認め被害者に賠償の支払いに応じる意向を防衛&lt;施設&gt;庁に伝えてきていたことが分かりました．++++++++++検索文++++++++++++++SR2-1(5)(4)東京電力によりますと&lt;事故&gt;が&lt;あっ&gt;た&lt;施設&gt;は定期点検中でタービンなどを分解して組み直し再び発電を始めるための試運転中に事故が起きたということです．SR2-2(3)(3)警察庁は今年六月に全国で起きた死者やケガ人のでたおよそ六万二千件の交通事故を対象に携帯電話が原因とみられる&lt;事故&gt;がどの程度&lt;ある&gt;のか初めて&lt;調査し&gt;ました．SR2-3(3)(3)警察庁は今年六月に全国で起きた死者やケガ人のでたおよそ六万二千件の交通事故を対象に携帯電話が原因とみられる&lt;事故&gt;がどの程度&lt;ある&gt;のか初めて&lt;調査し&gt;ました．SR2-4(1)(1)このため，ノースウエスト航空では問題のエンジンをアメリカのミネアポリスに&lt;ある&gt;本社の整備&lt;施設&gt;に運んで詳しく&lt;調査す&gt;る事にしたもので，きょう，機体から問題のエンジンを取り外して新しいエンジンと取り替え，このエンジンをきょうにもミネアポリスに向け送る事にしています．SR2-5(1)(1)それによりますと，去年の六月二十四日，ワシントン州のフェアチャイルド空軍基地の上空で航空ショーのリハーサル飛行をしていたＢー五十二戦略爆撃機が墜落し乗員四人全員が死亡した&lt;事故&gt;で，墜落地点は基地に&lt;ある&gt;距離はわずか十五メートルしか離れていなかったいうことです．++++++++++検索文++++++++++++++SR2-1(1)(1)このうち，原子力の問題に取り組んでいる原子力資料情報室は，地球規模で環境に影響を及ぼす恐れの&lt;ある&gt;原子力発電所の&lt;事故&gt;について，去年十二月の高速増殖炉「もんじゅ」のナトリウム漏れ&lt;事故&gt;を例に挙げて▼地元への&lt;事故&gt;の報告を義務付けることや▼原子力&lt;施設&gt;での&lt;事故&gt;の原因を&lt;調査す&gt;る第三者機関を設けること，それに▼民間の調査に対しても情報を公開することなどを盛り込んだ「原子力&lt;施設&gt;&lt;事故&gt;対応法」の制定を提案しました．SR2-2(1)(1)沖縄県に&lt;ある&gt;アメリカ軍基地の排水管から高い濃度の有害物質ＰＣＢが検出された問題できょう基地をかかえる沖縄県内の自治体の代表らが防衛&lt;施設&gt;庁を訪れ，アメリカ軍による相次ぐ事件や&lt;事故&gt;の防止に全力をあげるよう要請しました．SR2-3(1)(1)ＮＨＫはこの問題の実態をつかむため保健所を持ち処理&lt;施設&gt;に許認可権が&lt;ある&gt;各都道府県や市あわせて八十二の自治体を対象にアンケート方式で&lt;調査し&gt;すべての自治体から回答を得ました．SR2-4(1)(1)ＮＨＫはこの問題の実態をつかむため保健所を持ち処理&lt;施設&gt;に許認可権が&lt;ある&gt;各都道府県や市あわせて八十二を対象にアンケート方式で&lt;調査し&gt;すべての自治体から回答を得ました．SR2-5(1)(1)これに対して池田外務大臣は「在日アメリカ軍は今回の&lt;事故&gt;で使用されたのと同様の劣化ウランを含む砲弾を日本国内の一部の&lt;施設&gt;に所蔵しているがこれは日本が攻撃を受けるなど緊急事態が発生した場合には使用する必要が&lt;ある&gt;ものでそうした意味で撤去を求めるのは適当ではない」と述べ，アメリカ軍に対して，日本国内に所蔵している同種の砲弾の撤去は求めないという考えを示しました．=</section>
</root>
