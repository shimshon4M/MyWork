<?xml version="1.0" ?>
<root>
  <jtitle>多様性の導入による推薦システムにおけるユーザ体験向上の試み</jtitle>
  <jauthor>関喜史福島良典吉田宏司松尾豊</jauthor>
  <jabstract>推薦システムのユーザ体験を高めるために重要な指標の1つが多様性(Diversity)である．多様性は推薦システムが提示するリスト内には様々なコンテンツが含まれるべきという考え方であり，過去の研究では多様性が含まれるリストの方がユーザに好まれるとされている．しかし実際のサービス上で推薦システムを検証したという報告は少なく，サービス上で多様性がユーザにどのような影響を与えるのかは明らかになっていない．本研究では実際にサービスとして提供されているウェブページ推薦システムを分析し，その推薦システムに多様性を導入して比較を行った事例について報告する．まず多様性が導入されていない推薦システムのユーザ行動を分析し，結果としてリストの中位以降に表示するウェブページに課題があることを明らかにした．その上で多様性を導入し，多様性のない既存システムとサービス上でのユーザ行動を比較した．結果として継続率やサービス利用日数が有意に改善していることを示し，従来研究で示されていた多様性を含む推薦リストの方がユーザに好まれるということを実サービス上で示した．そして利用日数が増えるに従ってリスト全体のクリック数が改善していくこと，特にリスト下部のクリック率が多様性のない手法では下がっていくのに対して，多様性のある手法では向上していくことを示した．</jabstract>
  <jkeywords>推薦システム，多様性，キュレーション，ウェブサービス，ユーザ体験</jkeywords>
  <section title="はじめに">インターネットを通じたサービス利用はスマートフォンの普及を背景に近年ますます増加している．スマートフォンでの各種サービスの利用はこれまでのPCを経由して利用するインターネットサービスに比べて，画面の大きさや操作性という面で大きく制限されており，サービス提供者はスマートフォンに合わせたユーザ体験を新たに構築する必要に迫られている．このような背景の中で推薦システムに注目が集まっている．推薦システムはユーザの興味関心に合わせて商品などを提示することを目的としたシステムであり，Amazonでの商品推薦や,Facebookでの友人推薦をはじめとして幅広く利用されている．画面の大きさや操作性が制限されているスマートフォンにおいて，推薦システムを用いてユーザに合わせて最適な選択肢を提示することでユーザ体験を大きく改善することが期待されており，今後様々な場面での利用が進んでいくと考えられる．このような背景から推薦システムのユーザ体験に関する研究が近年注目を集めており，その中で重要だと言われている指標の1つに多様性(Diversity)がある．推薦システムが悪いとそのサービスが悪いとみなされると指摘されており，推薦システムのユーザ体験を考慮することはそのサービス設計のためにも重要である．多様性がユーザにもたらす影響についてはZieglerらの研究がよく知られており，多様性を含んだリストをユーザに提示するとユーザは自分に最適化されていないものが含まれていることは認識するが，多様性が含まれたものを好むという結果が報告されている．また推薦システムについてはFilterBubbleという問題が指摘されているが，その問題への対応のためにも推薦リストの多様性が重要であると言われている．ジャーナリストであるイーライ・パリサーは検索エンジンやSNS(SocialNetworkService)が推薦システムの技術を用いてパーソナライズ化されていくことに対して，情報のタコツボ化が起こることを懸念し，人々が正しい意思決定をすることを阻害していると警鐘を鳴らした．その動きに対応して推薦システムに関する国際会議であるRecsysでは，2011年にFilterBubbleに関するワークショップを開催し，FilterBubble問題に関する見解を示した．その中でFilterBubbleとパーソナライズはトレードオフであること，すべての情報を人が網羅することは不可能なのでフィルタリング技術は必要であることを指摘した上で，推薦システムを作る過程において，そのシステムの説明性，透明性を担保すること，推薦される個々のアイテムだけでなくリスト全体を評価し，多様性も考慮して設計することが必要であるとした．このような背景から近年推薦システムを構築する上で多様性を考慮することは一般的になったが，推薦結果の多様性がユーザやサービスにどのような影響をあたえるかについては分かっていない点が多い．多様性に関する研究の多くは多様性がユーザ体験を向上させるという前提に立っているが，その根拠はユーザへのアンケートによるものであり，サービスにどのような形で利益をもたらすかについては明らかになっていない．これは推薦システム研究の多くが過去のデータを用いたオフラインテストで行われており，実際にサービス上でシステムを提供して比較した例が少ないことが要因である．本研究の目的は推薦システムを用いて提供されているサービスに対して多様性を導入し，推薦結果の多様性がユーザに与える影響について明らかにすることである．本研究ではウェブページ推薦システムを提供しているグノシーというサービスにおいて，推薦システムに多様性を導入しそのユーザ行動への影響について報告する．まず多様性がない既存システムにおけるユーザの行動を分析し，どのような特性をもったシステムであるかを示した．その上で多様性を導入したユーザ減衰モデルを構築した上で実際にサービス上でユーザに対して提供し，既存システムとの比較を行った．その結果多様性がサービスの継続率の改善や利用日数の増加という形でユーザの満足度を高めていることを示した．これはユーザは多様性を含むリストの方を好むという従来研究で指摘されていた点がサービス上においても有用に働くことを示したといえる．また利用日数が浅い段階ではユーザがクリックするウェブページの数は既存システムと同程度であるが，利用日数が増えるにしたがって多様性をもったユーザ減衰モデルのほうがクリックするウェブページの数が増えていくことを明らかにした．そして多様性のない既存システムでは，利用日数が増えるに従って推薦リスト下部のクリック率が下がっていくのに対して，多様性を取り入れたユーザ減衰モデルでは，推薦リスト下部のクリック率が向上していくことを示した．これは従来研究は確認できなかった多様性の中長期における影響を示したものである．本研究では実際に事業として開発・運用されているウェブサービスを利用しているため，ビジネス上の制約により用いている手法をすべて公開することはできない．既存システムのユーザ行動の分析によって推薦システムとして有効に作用していることを示すことによってその代わりとしたい．本研究の目的は多様性がユーザ体験にどのような影響を与えるかについて論じることであり，手法が非公開であることが本研究の結果に与える影響は軽微であると考える．以下に本論文の構成を示す．章に関連研究と本研究の位置付けを示す．章において本研究で利用するグノシーというサービスと，そこで用いられている推薦システムについて紹介し，そのシステムのユーザ行動とその課題について分析する．章で前章で述べた課題を元に推薦システムに多様性を導入する方法について述べる．章で既存システムと比較手法の比較実験を行い，推薦システムの多様性がサービスにもたらす影響について考察し，章で本研究のまとめを行う．</section>
  <section title="関連研究">本章では本研究の関連研究についてまとめる．推薦システムの初期の研究では検索エンジンと同様に結果の適合度によって推薦システムが評価されていた．しかしHerlockerらの研究によって多様性，意外性，新規性などが推薦システムのユーザ満足度を高める可能性があると指摘され，現在ではKonstanらが推薦システムとユーザ体験に関する研究についてまとめたように様々な試みがなされている．多様性に関する研究としてはZieglerらの研究がよく知られている．Zieglerらはリスト内の多様性を表すintra-list-similarityという多様性に関係する指標を提案し，通常の類似度による推薦との重み付け和によって推薦を行う推薦システムを提案した．本の推薦システムによって多様性を持つシステムのユーザへのアンケートを行い，ユーザは自分に最適化されていないことは認識するものの，多様性が含まれている推薦リストのほうが好ましいと答えた．この結果が多様性が推薦システムにおいて重要だとされる根拠となり，推薦システムにおいて多様性を考慮する研究が数多く生まれているが，多様性がユーザに与える影響についてより踏み込んだ分析は我々の知る限りでは行われていない．本研究は実サービスでの推薦システムの比較を行うことで，多様性がユーザに与える影響について新たな示唆を与えるものである．推薦システムのユーザ行動に関する知見が少ない理由として実際にサービス上で行われた実験が少ないことが挙げられる．ここではサービス上で行われた実験をいくつか紹介する．DavidsonらはYoutubeにおいて推薦システムを導入した際の効果について報告した．そのシステムはco-viewを用いた単純なものであるとされており，手法の詳細については公開されていないが，単純な人気ランキングを表示するのと比べて207%クリック率が向上したと報告されている．BellufらはブラジルのECサイトを対象に5%のユーザに対して推薦システムを適用しユーザ行動の差を分析する研究を行い，結果として8--20%の売上の向上が見込めることを報告している．なおこちらの研究においても推薦システムの手法の詳細は公開されていない．サービス上での評価とは少し異なるが，Flederらは推薦システムを経済シミュレーションにより分析し，経路依存性が存在すること，推薦システムによってその特性が様々に変わることを指摘している．このように推薦システムがサービスにどのような影響を与えるかを調べた研究はまだ少ない．本研究ではウェブページ推薦を行うサービスであるグノシー上において提供する推薦システムを対象に実験を行い，推薦システムがどのように利用されており，多様性がサービスにどのような影響を与えているかを実データを分析することで示す．</section>
  <section title="グノシーの推薦システム">本研究は株式会社Gunosyが提供している情報キュレーションサービスであるグノシー内において行われている．本章ではグノシーがどのようなサービスなのかを述べ，サービス内で用いられている推薦システムの概要を説明し，本システムがどのような特性を持っているのかをいくつかの実験の結果を元に説明する．その上で本システムの課題について分析を行い，多様性がどのような影響を与えるかを考察する．</section>
  <subsection title="グノシーについて">グノシーは株式会社Gunosyが運営する情報キュレーションサービスである．2011年9月にサービスを開始し，翌年11月に法人化された．スマートフォンアプリケーションを中心にサービスを展開しており，アプリケーションのダウンロード数は2016年10月で1600万を超えている国内最大級の情報キュレーションサービスである．情報キュレーションサービスはウェブ上の様々なコンテンツを取捨選択し，サービス上でユーザに提示するサービスである．国内ではグノシーの他にSmartnews,Anntena,NewsPicks等がよく知られている．情報キュレーションサービスで扱うコンテンツはニュースが中心ではあるが，コラムやブログ，まとめサイトなど様々なコンテンツを扱っていることが多い．2014年に矢野経済研究所が行った調査ではキュレーションサービスの市場規模は2012年は60億円程度であったが，2014年には178億円，2017年には395億円と急成長していくとしている．本研究は2011年9月のサービスリリース時から2012年末までの期間を対象に行われたものである．その期間においてグノシーはTwitter,Facebook,はてなブックマークのアカウントを連携することにより，登録したユーザのそれぞれのサービス内での行動から1日25件のウェブページをユーザに提示するサービスを提供していた．提示されたコンテンツはウェブブラウザでログインして見ることができる他，登録したメールアドレスに指定した時間に送ることもできる．現在のグノシーではこの機能は‘マイニュース’というサービス上の一部の機能として提供されている．</subsection>
  <subsection title="グノシーの推薦システムの概要">本節ではグノシーで利用されている推薦システムがどのようなものかについて述べる．システムの詳細についてはビジネス上の制約により紹介することはできないが，本研究の目的は多様性がもたらすユーザ体験の変化を明らかにすることであり，システムの詳細が明らかでなくても問題はないと考える．グノシーの推薦システムは内容ベースフィルタリングをベースにしたシンプルなものである．推薦対象となるウェブページ集合Wとユーザ集合Uを考える．ここであるウェブページwWがユーザuUにどれだけ好まれるかの予測値をrとして表す．この予測値は正の値をとり，正規化されておらず値域は[0,)となる．この評価値を元にユーザuに対してrが大きい順にウェブページをw_1,w_2,...,w_|W|と並べると，w_1,...,w_Kのウェブページがユーザに提示するウェブページのリストとなる．Kはユーザに提示するウェブページの個数で，Gunosyの場合はK=25となる．多くの内容ベースフィルタリングによる推薦システムがそうであるように，ユーザuの興味関心とウェブページwの特徴量を共通のN次元ベクトル空間で表現し，評価値rはベクトルの類似度により求められる．ウェブページ特徴量wとユーザ特徴量uは単語によって構築される共通の次元空間を持っており，評価関数はウェブページの特徴量wとユーザ特徴量uとの内積をベースに重み付けや正規化にいくつかのヒューリスティクスを用いている．ウェブページの特徴量wの構築にはウェブページ内のテキストにおける単語のTF-IDF値を出現位置によって重み付けした値をベースに，そのウェブページが誰によって書かれたかによって幾つかの単語に値が追加されるルールや，そのウェブページについてSNS，ソーシャルブックマークサービス，ブログなどの外部のウェブサイトに投稿された内容を解析した結果なども用いている．ユーザの特徴量uにはサービス登録時は連携したサービスでのプロフィール文などから構築した特徴量と，連携したサービスに投稿したウェブページとグノシー内でクリックしたウェブページの特徴量wの重み付け和を組み合わせたものを利用している．このように手法は様々なルールやヒューリスティクスを含む形で構築されている．ウェブページの特徴量を生成するための詳細や連携サービスからの特徴量抽出，重み付けの詳細などは事業上の理由により公開することができない．しかし本研究の目的は多様性を導入した際のユーザ行動の変化を明らかにすることであるため，多様性を導入した手法と既存システムで非公開にしているウェブページの特徴量w,ユーザの特徴量u,評価値関数fは共通であることと，既存システムにおけるユーザ行動の分析が十分に行われていることで，本研究の目的と結果の有効性に対する影響は軽微であると我々は考えている．まず本システムが推薦システムとして有効に作用しているのかを検証する．本システムはユーザuがウェブページwに興味の持つ度合いrを求めている．rが適切に求められているのであれば，rが高ければ高いほどユーザuがウェブページwを閲覧する確率は高くなると考えられる．2012年5月から9月にサービスを利用した全ユーザに対して，推薦された記事のrとその記事のクリック率を比較し相関関係を求めた．各ウェブページのrを09.9まで0.1刻みとそれ以上に分け，各区分でのクリック率をクリックしたユーザ数推薦されたユーザ数として求める．クリック率とrの関係を図に示す．相関係数は0.958となり，この結果からクリック率とrには強い正の相関があることが示された．このことからウェブページのクリック率がユーザの興味関心の度合いを示すと仮定すれば，rはそのウェブページに対するユーザの興味関心の度合いを示すことができていると考えられる．</subsection>
  <subsection title="表示位置とクリック率">本節では記事の表示順位がクリック率にどのような影響を及ぼしているのかについて述べ，多様性の導入が本システムにどのような影響をもたらすのかについて考察する．本システムではユーザごとにrの大きい順に25件のウェブページを縦に並べて提示している．これは一般的な検索エンジンが検索結果を表示するのと似ており，検索エンジンのクリック率は順位によって変動することが知られている．前節ではrとクリック率に強い相関があることを示したが，rが高ければ本システムでは高い位置に表示されることになる．本システムにおいてリスト内での表示位置がウェブページのクリック率にどのような影響を与えているのかを調べるために2つの実験を行った．第1の実験として一部のユーザに対して推薦結果のリストを逆順に表示し比較を行った．本システムでは通常25件のウェブページをrの大きい順に表示しているが，この実験ではk番目のウェブページを26-k番目に表示するようにした．つまり元々1番目に表示されていたウェブページが25件目に表示され，25番目に表示されていたウェブページが1番目に表示されることになる．対象ユーザとしてアクティブなユーザの中から2,000人のユーザをランダムに抽出し，一定期間実施した．この実験の目的はウェブページのクリック率が表示位置によってどの程度変わるのかを知ることである．もし前節で示したrとクリック率の相関関係が，rが高いウェブページが上位に表示されることによるのであれば，逆表示であっても最上位に表示されたウェブページのクリック率は高くなり，最下位に表示されたrの高いウェブページのクリック率は低くなる．図に順表示と逆表示での位置ごとのクリック率を比較したグラフを示す．ここでクリック率は前節とは異なり，そのリスト内のウェブページを1つ以上クリックしたユーザを母数として求めている．まず順表示のほうのクリック率を見ると，順位が高いほどクリック率が高くなることがわかる．またリストの最下部で若干の上昇がみられるが，これはリストの最下部はスクロールが止まるため若干クリック率が上がるためであると考えられる．次に逆順表示のクリック率をみると，最上部は少し高いものの順表示と比べてると大幅に低く，その後5番目からゆるやかに上昇しだし，最下部では最上部と同じようなクリック率を計測した．逆表示において最上部以外は順位が下がるにつれてクリック率が上昇すること，最上部のクリック率は順表示と逆表示で大きな差があることから，rとクリック率の相関関係が表示位置のみによるものではなく，rがユーザの興味関心度合いをある程度表していることが明らかとなった．第2の実験として人手で選択したウェブページを25件のランダムな位置に挿入し，システムによって推薦されたウェブページとのクリック率の差分を調べた．ウェブページの選択に際しては外部のメディア運営者に協力を依頼し，運営するメディアの記事から日1件選択されたものを利用した．選択されたウェブページは対象となったユーザのウェブページリストのランダムな位置に挿入される．本実験は一定期間すべてのユーザを対象に行われた．この実験の目的はrの値にしたがってウェブページのリストを構築することがどれだけユーザのクリック率に寄与しているのかを確認することである．rの値に関係なく人手で選んだウェブページのクリック率が高くなるような表示位置があるのであれば，推薦システムのウェブページの選び方に課題があると考えられる．図に比較結果を示す．リストの上位の記事は人手で挿入された記事と比較して高いクリック率を有しているが，リストの中位の記事は手動で挿入された記事と比較し同程度のクリック率をもち，下位では人手で挿入した記事のほうが高いクリック率を持つようになっている．この結果は本システムが中位以降についてはrに従って推薦することがユーザのクリック率を高めることに寄与しない可能性があることを示唆している．2つの実験によって以下の事柄が明らかとなった．	rの大きさとウェブページのクリック率の相関は表示順位のみによるものではないため，rの値はある程度ユーザの興味関心度合いを反映しているといえる．	rの大きさにしたがってリストを構築した場合，上位においては高いクリック率を得ることができるが，中位以降では無作為に挿入した記事と同等のクリック率であり，下位では無作為に挿入した記事のほうが高いクリック率をもつ．つまり本システムは興味関心をある程度表現できてはいるものの，推薦リストの構築として考えた際に中位以降の表示に対して課題があることが明らかになった．本システムではユーザの特徴量uとウェブページの特徴量wの類似度が高いものから順に並べてリストを構築している．ここでユーザの特徴量uにおいてi番目の次元のu_iの値が他の次元の値と比べ非常に大きいとする(u_iu_i)．その時i次元が高い特徴量を持つウェブページのrが高くなるため，推薦リスト内のウェブページがそのようなウェブページばかりになってしまう．特徴量の各次元はユーザの興味関心の方向を表しているため，結果として推薦リスト内が同じようなウェブページばかりで構成されてしまうことになる．上記の例は極端ではあるが，上部で既に提示された記事と同じような内容になるため中位以降では飽きが生じてしまい，結果として人手で挿入した記事のほうが新鮮さがあるためクリック率が同程度かそれ以上になるのではないかと考える．このような結果から本システムに多様性を導入することにより，中位以降のクリック率を改善することができ，ユーザ満足度を向上させることに繋がるのではないかと考えた．</subsection>
  <section title="推薦システムへの多様性の導入">本章では既存の推薦システムに多様性を導入する方法について述べる．まず多様性の手法としてよく知られているZieglerらのTopicDiversificationAlgorithm(TDA)を紹介する．そしてTDAをベースにグノシーの推薦システムに多様性を導入するためのユーザ減衰モデルについて述べ，TDAとの関連について議論する．そしてユーザ減衰モデルがどのように多様性を向上させているのかを比較実験によって示す．</section>
  <subsection title="Topic Diversification Algorithm">本節では推薦リストの多様性に関する手法としてよく知られているZieglerらの手法を紹介する．Zieglerらは多様性を表す指標Intra-ListSimilarityと，関連度順に与えられた推薦リストから多様性を持った推薦リストを生成するTopicDiversificationAlgorithm(TDA)を提案している．TDAは既に関連度順に並んでいるアイテムリストLがあるときに，そのリストを多様性を持つように並び替えたリストL_diverを構築することを目的としている．ここで多様性リストL_diverはもともとのリストLと同じ長さかそれより短いものとする．ここでアイテムリストlとアイテムpの類似度を表す関数をc(l,p)と，アイテムpのリストl内での位置を表す関数をrank(p,l)とする．またリストLのi番目のアイテムをL(i)とすることにする．つまりrank(L(i),L)=iと書ける．TDAではまずL_diver(0)=L(0)として，その後L_diverに含まれないL内のアイテムリストL_diverからL_diverにアイテムを1つずつ追加する．まずL_diver内のアイテムpとリストL_diverとの類似度c(L_diver,p)の昇順になるようにソートしたリストL_similarを構築し，以下の条件を満たすpをL_diverの末尾に加える．式では既に作られているリストとの類似度の少なさの順位と，推薦システムとしての関連度の順位を平均した順位が最も高いアイテムを選ぶ．このようにして選ばれたアイテムをリストに加えることを繰り返し，多様性のあるリストを作る．この手法によって構築した推薦リストはを高めるとPresicionやRecallは低下するが多様性は高まっていき，アンケートによる実験の結果ユーザはが0.3〜0.4のリストを最も好むと報告された．特に内容ベースフィルタリングを用いた推薦リストにおいて著しいユーザ満足度の向上が見られたことが示されている．</subsection>
  <subsection title="多様性の導入">本節では章で述べた手法に多様性を導入する方法について述べる．前節で紹介したTDAは既に推薦されたリスト内のアイテムと類似度が高いアイテムが推薦されにくくなることを目的とした手法である．この考え方を元に既存システムに多様性を組み込むために，本研究では推薦されたアイテムの特徴量を，ユーザの特徴量から減衰することによって同様の多様性効果を得ることを目指す．以降本手法をユーザ減衰モデルと呼ぶ．このユーザ減衰モデルはTDAの考えをグノシーのシステムで実現するための手法であり，本論文の貢献としてユーザ減衰モデルの提案は含まない．まず推薦リストをいくつかのブロックに分割する．K個のウェブページを推薦する場合それをN&lt;KとなるN個のリストに分割する．ここでi番目のリスト内のウェブページの個数をk_iとするとK=_i=0^Nk_iと書ける．またi番目のブロックまでに推薦されているウェブページの数をn_iとすると，n_0=0,iが1以上のときはn_i=_j=0^ik_jと書ける．このようにリストをN個に分割した上で，各ブロックごとに推薦を行いながらユーザの特徴量を減衰させていく．i番目のリストを生成するためのユーザの特徴量をu_iとすると，以下のように書ける．u_0=uu_i+1=u_i-_j=n_i^n_i+1w_j(i0)gatherここでは定数である．このユーザ減衰モデルがTDAと同じような性質を持つことを示す．ユーザ減衰モデルにおいてk_0=3であり，u_0を用いてw_0,w_1,w_2を推薦したとする．ここで次の推薦のための減衰されたユーザの特徴量u_1は式から以下のように求められる．[u_1=u_0-*(w_0+w_1+w_2)]ここで次に推薦されるアイテムw_4は以下のように書ける．[w_4=max_wW_w_0,w_1,w_2f(u_1,w)]ここでf(u,w)は同じベクトル空間上のユーザ特徴量とウェブページ特徴量の類似度をベースに表現されることからfでは以下が成立すると仮定する．f(u_1+u_2,w)f(u_1,w)+f(u_2,w)(u,w)f(u,w)gather*これを利用するとf(u_1,w)は以下のように展開できる．ここで第一項のf(u_0,w)は減衰前のユーザ特徴量とwの類似度を返すものであり，第二項目は既に構築された推薦リストとwの類似度を返すものである．つまりユーザ減衰モデルでは元々のユーザ特徴量の評価値から，既に構築された記事リストとの評価値に一定の値を乗じた値を引いた値が最大になるウェブページを推薦しているといえる．ここで式と式を比較すると，TDAにおける順位を返す関数を評価値を返す関数と考えれば，ユーザ減衰モデルとTDAは一致するといえる．ユーザ減衰モデルとTDAの違いを以下にまとめる．	TDAではリストとの類似度を順位として重み付け平均で計算しているが，本研究では評価値の重み付け平均とすることでユーザ特徴量の減衰によって実現している．	TDAでは構築したリストにアイテムを1つずつ追加しているが，ユーザ減衰モデルではブロックにわけて複数個ずつ追加している．このように細部の違いはあるもののユーザ減衰モデルの基本的な考え方はTDAと一致している．</subsection>
  <subsection title="既存システムとの比較実験">本節ではユーザ減衰モデルがどれだけ多様性を向上させているのかを既存システムと比較することによって示す．2012年11月の1週間の記事データを用いて1日ずつ当該期間にアクティブであったユーザから無作為に抽出した1,000人のユーザに対して，既存システムとユーザ減衰モデルを用いてそれぞれ25件の記事リスト生成し比較を行う．このとき推薦リストの分割数N=5とし，各ブロックの大きさはk_1=3,k_2=4,k_3=5,k_4=6,k_5=7とした．比較のためにZiegerらの研究でも用いられていたIntra-List-Similarity(ILS)とoverlapの2つの指標を用いる．ILSはZieglerらが提案した多様性を評価するための指標であり，多様性を評価する上で代表的な手法である．定義を以下に示す．[ILS(P_w_i)=_b_kP_w_i_b_eP_w_i,b_kb_ec_o(b_k,b_e)2]このようにILSはリスト内のすべてのアイテムの組み合わせの類似度の総和である．本節では各記事の特徴量のコサイン類似度によってILSを求めることとする．overlapは元の推薦リストと多様性のある記事リストが何件一致しているかによって求められる．これによって多様性によってどれだけ推薦結果が変化するのかを知ることができる．まず7日間全体での各指標の平均値を表に示す．ユーザ減衰モデルでは既存システムに比べてILSが下がっていることが分かる．これはユーザ特徴量を減衰しながら推薦することで，既存システムでは推薦されていたリスト上位で既に推薦された記事と類似しているrが高い値をもつ記事が推薦されにくくなったためである．overlapは8.06であり既存システムと提案手法では約8件と約2/3の記事が変化していることが分かる．最上位ブロックは両方の手法で変化しない．k_1=3であるため今回の実験では3件の記事は必ず一致する．そのため残りの22件のうち17件が多様性によって変化したと言える．このようにユーザ減衰モデルがリスト内の類似度を低下させ，記事リストを変化させていることが明らかになった．</subsection>
  <section title="多様性の導入によるユーザ行動の変化">本章ではユーザ減衰モデルを実際にサービスに適用することでユーザ行動におこった変化について述べ，推薦システムの多様性がユーザ体験に与える影響について考察する．</section>
  <subsection title="実験方法">本節では実験方法について述べる．本研究ではグノシーのサービス上で章で述べた既存システムと章で述べたユーザ減衰モデルの比較を行った．実験は2012年の8月から12月において行われた．既存システムによってサービスを提供する期間と，ユーザ減衰モデルによってサービスを提供する期間に分け，それぞれの期間における新規登録ユーザのサービス内でのユーザ行動を比較した．また本サービスでは各種ウェブサービスとの連携によって初期のユーザ特徴量を構築しているが，連携したウェブサービス上での行動が少ない場合は初期のユーザの特徴量を構築することができない．本サービスではそのようなユーザに対してランダムな記事リストの生成を初期段階で行い，クリックしたウェブページのみによってユーザ特徴量を生成している．このようなユーザは継続率やウェブページのクリック率がそうでないユーザに比べて低いことが経験的に知られており，期間中のそのようなユーザの登録人数の比率が実験結果に影響を及ぼすと予想されることから，今回登録時にユーザ特徴量が生成できなかったユーザは比較実験の対象外とした．このようにして実験対象となるユーザ群を定義した．既存システムによるサービスを受けたユーザは3,465人，ユーザ減衰モデルによるサービスを受けたユーザは3,482人であり比較実験として同程度のユーザ数となった，各手法でユーザの登録期間は異なるが，実験期間において手法の変更以外のサービスのアップデートはデザインなども含めて行われてはいないため，実験として期間の違いは問題にならないと考えている．</subsection>
  <subsection title="評価方法">本節では行った実験の評価方法について述べる．ユーザ減衰モデルでは多様性の導入により，サービスを利用しているユーザの満足度が向上することが期待されている．それを測るために，週次でのユーザの継続率を比較する．登録してから7日目以内にウェブページを1つでもクリックした場合はそのユーザは1週目継続したとする．そして8日目以降14日目以内にウェブページを1つでもクリックした場合はそのユーザは2週目に継続したとする．このようにユーザが登録日から7日毎に推薦されたウェブページをクリックしたかを対象期間の登録ユーザ数を母数とした週次の継続率として評価に用いる．継続率はウェブサービスの改善の指標としてよく用いられる指標であり，これが高いとユーザがサービスに満足していると評価することができる．その上で各週に継続しているユーザがその週次内で何日間サービスを利用したかを比較する．この数値が高いとサービスを利用している日数が多いといえるため，ユーザがよりサービスに定着していると考えられる．そして順位ごとのクリック率を章と同様に比較し，ユーザが推薦リストをどのように利用しているか，それが利用日数が増えるごとにどのように変化していくかを評価する．</subsection>
  <subsection title="サービス利用の比較">本節では既存システムとユーザ減衰モデルの継続率の比較結果について述べる．既存システムとユーザ減衰モデルのそれぞれの週次継続率を表に示す．ユーザ減衰モデルのほうがすべての週次で良い継続率を記録していることがわかる．この継続率が同等であるという仮説は1週目から4週目まですべてカイ二乗検定において有意水準1%で棄却することができるため，ユーザ減衰モデルがユーザの継続率を有意に改善しているといえる．次に各週内でのサービスの利用日数を調べる．ユーザ減衰モデルがユーザの満足度を向上させているのであれば，利用日数も高くなっていることが期待される．表に既存システム，ユーザ減衰モデルそれぞれの週次での平均利用日数とその分散を示す．ユーザ減衰モデルのほうが平均利用日数が高いことがわかる．2つの手法の平均利用日数は差がないという仮説は平均利用日数が正規分布に従うとするとt検定によって有意水準1%で棄却されるため，この平均利用日数の差は統計的に有意であるといえる．このようにユーザ減衰モデルによって推薦リストに多様性を導入した結果，ユーザのサービス利用の満足度が向上したことが示唆された．</subsection>
  <subsection title="表示順位ごとのクリック率の変化">本節では多様性の導入がユーザのリスト内のクリック率に対してどのような変化を与えたのかを分析する．ユーザ減衰モデルでは上位で推薦したウェブページに関係するユーザの特徴量が減衰され，既存システムでは推薦されなかったウェブページが推薦されるようになっている．その結果として順位ごとのクリック率がどのように変化しているのかを調べる．ユーザ減衰モデルによって新たに推薦されるようになったウェブページは，既存システムではrが低いためにより低い位置で推薦されるウェブページであるため，rとクリック率の相関関係のみを考えればクリック率が低下する恐れがある．ユーザ減衰モデルではリスト内の多様性が生まれることによって既存システムと同等かそれ以上のクリック率が生まれることを期待している．表に週次のリスト内での平均クリック数と10段目までと11段目以降の平均クリック数を示す．平均クリック数はユーザ減衰モデルが既存システムをすべての期間で上回っており，登録から日数が経つごとにその差は拡大していく．平均クリック数が正規分布に従うと仮定しt検定を行った結果，3週目と4週目においてリスト全体の平均クリック数と11段目以降の平均クリック数，4週目において10段目までの平均クリック数においてそれらが等しいという仮説が有意水準1%で棄却された．以上のことからユーザ減衰モデルによって平均クリック数，特にリスト下部での平均クリック数が3週目以降で改善していることが示される．特に11段目以降のクリック数は既存システムは低下していくのに対してユーザ減衰モデルでは中位以降のクリック数が上昇していっており，既存システムの課題が改善していることが分かる．図に登録1週目の表示位置によるクリック率の既存システムとユーザ減衰モデルの比較を示す．ばらつきはあるものの各表示位置においてクリック率はほぼ同等の傾向を示しており，多様性を導入することによってクリック率に対して悪影響が出ていないことが確認された．2週目も1週目と同等に既存システムとユーザ減衰モデルには大きな差は見られなかった．しかし図に示す3週目には，中位以降でユーザ減衰モデルのほうがわずかではあるがクリック率が高い傾向になる．そして図に示す4週目にはリスト全体でユーザ減衰モデルのほうがクリック率が上回る傾向にある．このように登録してから日が浅い段階ではユーザ減衰モデルと既存システムは同等であったが，利用日数が伸びるにしたがってユーザ減衰モデルの方がよりクリック数が多くなることが明らかになった．</subsection>
  <subsection title="考察">本章では多様性を持たない既存システムと多様性を導入したユーザ減衰モデルを実際のサービス上で提供し，ユーザに与える影響を比較した．その結果多様性によってユーザのサービス利用の継続率と利用日数が有意に向上することが示された．また利用開始から日が浅い段階では記事リストのクリック率に変化はないが，利用日数が増えるにつれて記事リスト全体でクリック率が高くなる．特にリスト下部のクリック率が既存システムでは低下していくが，ユーザ減衰モデルでは上昇していくことが示された．既存システムでリスト下部のクリック率が利用日数が増えていく中で低下していく理由を考察する．本システムでは初期段階ではユーザが連携しているウェブサービスから得られるデータを用いてユーザの特徴量を構築し，その後システム内でクリックしたウェブページの特徴量を元にユーザ特徴量を更新していく．リストに多様性がある場合には個々のユーザがクリックしたウェブページ集合にも多様性が生まれると考えられることから，ユーザ減衰モデルにおけるユーザの特徴量uは既存システムでは得られなかった多種多様な興味関心を内包したものとなり，ユーザ特徴量減衰後のウェブページがより興味に即したものになっていく．既存システムではリストに多様性がないためユーザのクリックするウェブページが同じような特徴量をもったウェブページに集中するため，ユーザ特徴量がそのようなウェブページにより更新されることから，利用日数が増えるほどに一層推薦されるウェブページリストに偏りが生まれる．その結果リスト下部のクリック数が既存システムではサービスへの飽きから徐々に下がっていくのに対し，ユーザ減衰モデルではリスト下部のコンテンツのユーザとのマッチング精度が向上していくことにより，リスト全体のクリック率がユーザ減衰モデルにおいて長期で高い値になっていることが考えられる．推薦リストの多様性については，評価者にリストを見せてどちらかを選ばせるような実験の結果をもって有効であるとされていたが，本研究ではその結果が実際にサービスの利用頻度という点で現れることを示した．その上でリスト全体のクリック率は初期段階では差がないが，利用日数が増えるにしたがって向上していくことが示され，特にリスト下部でのクリック率が多様性がある場合とない場合で大きな差になっていくことが明らかとなった．サービスにおけるユーザの継続率はユーザの満足度を表す重要な指標であると言われている．週次の継続率と利用日数が向上したことにより推薦システムの多様性がサービスのユーザ満足度の向上をもたらすことを示したと我々は考えている．そして利用日数が増えるに従ってクリック率の差が大きくなっていく点については，推薦システムのオンラインでの評価を行う上で短期的な評価だけでなく中長期的な評価も行う必要性があることを示した．以上のように本実験では推薦システムの多様性によって利用ユーザのクリック率，週次継続率，週次利用日数の向上が確認でき，多様性が推薦システムのユーザ満足度を改善することを示した．そしてその影響が継続的な利用によって観測されることを明らかにし，オンライン評価における中長期的な評価の必要性を示した．</subsection>
  <section title="まとめ">本研究では推薦システムに多様性を導入することによるサービス上のユーザ行動の変化について比較実験を行い，多様性がユーザ体験を改善したことを示した．まずサービスのユーザ体験を改善することを目的に推薦システムの分析を行い，多様性がユーザの満足度を高める可能性があることを示した．その上でユーザ特徴量を減衰していく形で推薦システムに多様性もたらす手法との比較実験によってユーザ行動の変化を分析した．結果として継続率やサービス利用日数が有意に改善していることを示し，従来研究で言われていた多様性を含む推薦リストのほうがユーザに好まれるということを実サービス上で示した．そして利用日数が増えるにしたがってリスト全体のクリック率が改善していくこと，特にリスト下部のクリック率が多様性のない手法では下がっていくのに対して，多様性のある手法では向上していくことを示した．これは従来研究で示されていなかった多様性の中長期における影響を示したものである．推薦システムを実サービスに適用した際の効果については不明な点が多い．本研究ではリストの多様性が中長期的な視点でみたときにユーザ体験の改善に貢献することを示唆しており，今後推薦システムにおいて多様性を考慮する上で重要な知見を示すことができたと考えている．また中長期でよりよい影響が生まれていることから推薦システムを評価する上で実サービス上で，なおかつある程度期間を設けて実験を行う重要性を示したものであると言える．推薦システムのユーザ体験を考慮する上で多様性と並んで説明性や透明性が重要であると言われている．今後はこれらの指標の有効性についても実サービス上で考察をしていきたい．また推薦システムにかぎらず本稿のように言語処理技術を実サービスに適用する上での課題や改善の手法について，サービス運営者としての視点から知見の共有や検証を行っていきたい．document</section>
</root>
